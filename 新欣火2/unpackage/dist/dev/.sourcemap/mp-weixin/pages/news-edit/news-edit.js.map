{"version":3,"sources":["uni-app:///main.js","webpack:///D:/代码/小程序/新欣火1/pages/news-edit/news-edit.vue?5788","webpack:///D:/代码/小程序/新欣火1/pages/news-edit/news-edit.vue?4789","webpack:///D:/代码/小程序/新欣火1/pages/news-edit/news-edit.vue?1055","webpack:///D:/代码/小程序/新欣火1/pages/news-edit/news-edit.vue?0f7a","uni-app:///pages/news-edit/news-edit.vue","webpack:///D:/代码/小程序/新欣火1/pages/news-edit/news-edit.vue?489f","webpack:///D:/代码/小程序/新欣火1/pages/news-edit/news-edit.vue?d292"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","statusBarHeight","safeAreaBottom","newsId","isEdit","saving","newsForm","title","content","time","author","isPinned","contentBlocks","computed","canSave","onLoad","console","bottomInset","userInfo","permission","uni","showCancel","success","methods","goBack","loadNewsData","uniCloud","name","action","id","res","news","type","icon","loadNewsFromStorage","newsList","loadMockNewsData","onDateChange","onPinChange","addTextBlock","addImageBlock","count","sizeType","sourceType","fail","uploadImageToCloud","cloudPath","filePath","uploadRes","cloudUrl","imageUrl","caption","removeBlock","moveBlock","updateCharCount","block","previewImage","urls","current","saveNews","finalContent","map","filter","join","payload","saveRes","setTimeout"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkI;AAClI;AAC6D;AACL;AACqC;;;AAG7F;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAuqB,CAAgB,qqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCyJ3rB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QAAA;QACAC;MACA;IACA;EACA;;EAEAC;IACAC;MACA,qCACA,0CACA,sBACA;IACA;EACA;EAEAC;IACAC;IACAA;;IAEA;IACA;IACA;IACA;IACA;MACAC;IACA;MACAA;IACA;IACA;;IAEA;IACA;IACA;MACAD;QAAAE;QAAAC;MAAA;MACAC;QACAb;QACAC;QACAa;QACAC;UACAF;QACA;MACA;MACA;IACA;IAEAJ;;IAEA;IACA;IAEA;MACA;MACA;MACA;IACA;EACA;EAEAO;IACAC;MACAJ;IACA;IAEAK;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,KAGA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAC;kBACAC;kBACA3B;oBAAA4B;oBAAAC;kBAAA;gBACA;cAAA;gBAHAC;gBAAA,MAIAA;kBAAA;kBAAA;gBAAA;gBACAC;gBACA;kBACAxB;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;oBAAAoB;oBAAAxB;kBAAA;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAQ;gBACAI;kBAAAb;kBAAA0B;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;gBACAJ;kBAAA;gBAAA;gBAAA,KAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;kBACAxB;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC,sCACA;oBAAAoB;oBAAAxB;kBAAA;gBAEA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA4B;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEA;kBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAYA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QAAAP;QAAAxB;MAAA;IACA;IAEAgC;MAAA;MACA;MACA;MACA;QACApB;UAAAb;UAAA0B;QAAA;QACA;MACA;MAEAb;QACAqB;QACAC;QACAC;QACArB;UACAN;UAEA;;UAEA;UACAI;YAAAb;UAAA;;UAEA;UACA;QACA;QACAqC;UACA5B;UACA;YACA;UACA;UACAI;YAAAb;YAAA0B;UAAA;QACA;MACA;IACA;IAEAY;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;gBAAA;gBAAA,OACApB;kBAAAqB;kBAAAD;gBAAA;cAAA;gBAAAE;gBACAC,6BAEA;gBACA;kBACAjB;kBACAkB;kBACAC;gBACA;gBAEA/B;gBACAA;kBAAAb;kBAAA0B;gBAAA;gBACAjB;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACAI;gBACAA;kBAAAb;kBAAA0B;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IAEAmB;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA;MACA;QACA;UACAC;QACA;MACA;IACA;IAEAC;MACA;MACA;QACA;QACApC;UACAqC;UACAC;QACA;MACA;QACA;QACAtC;UACAqC;UACAC;QACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEA3C;;gBAEA;gBAAA,uCACA;gBAAA;gBAAA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAAuC;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACAnC;kBAAAb;kBAAA0B;gBAAA;gBAAA;cAAA;gBAAA,MAGAsB;kBAAA;kBAAA;gBAAA;gBACAnC;kBAAAb;kBAAA0B;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAMA;;gBAEA;gBACA2B,6CACAC;kBACA;oBACA;kBACA;kBACA;kBACA;gBACA,GACAC;kBAAA;gBAAA;gBAAA,CACAC;gBAEA/C;gBACAA,wDACA;kBACAR;kBACAI;gBAAA,GACA;;gBAEA;gBACAoD;kBAAAxD;kBAAAI;gBAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACAc;kBAAAC;kBAAA3B;oBAAA4B;oBAAAC;oBAAA7B;kBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA0B;kBAAAC;kBAAA3B;oBAAA4B;oBAAA5B;kBAAA;gBAAA;cAAA;gBAAAiE;gBACA;kBACA;gBACA;cAAA;gBAGA7C;kBACAb;kBACA0B;gBACA;;gBAEA;gBACAb;gBACA8C;kBAAA9C;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAJ;gBACAI;kBAAAb;kBAAA0B;gBAAA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrdA;AAAA;AAAA;AAAA;AAA4+B,CAAgB,s8BAAG,EAAC,C;;;;;;;;;;;ACAhgC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/news-edit/news-edit.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/news-edit/news-edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./news-edit.vue?vue&type=template&id=478d0dd0&scoped=true&\"\nvar renderjs\nimport script from \"./news-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./news-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./news-edit.vue?vue&type=style&index=0&id=478d0dd0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"478d0dd0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/news-edit/news-edit.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-edit.vue?vue&type=template&id=478d0dd0&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.newsForm.contentBlocks, function (block, index) {\n    var $orig = _vm.__get_orig(block)\n    var g0 = block.type === \"text\" ? block.content.length : null\n    var g1 = block.type === \"text\" ? _vm.newsForm.contentBlocks.length : null\n    var g2 =\n      !(block.type === \"text\") && block.type === \"image\"\n        ? _vm.newsForm.contentBlocks.length\n        : null\n    return {\n      $orig: $orig,\n      g0: g0,\n      g1: g1,\n      g2: g2,\n    }\n  })\n  var g3 = _vm.newsForm.contentBlocks.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-edit.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"news-edit-container\">\r\n\t\t<!-- 顶部导航栏 -->\r\n\t\t<view class=\"nav-bar\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\r\n\t\t\t<view class=\"nav-content\">\r\n\t\t\t\t<view class=\"back-btn\" @click=\"goBack\">\r\n\t\t\t\t\t<image class=\"back-icon\" src=\"/static/back-cartoon.svg\" mode=\"aspectFit\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"nav-title\">{{ isEdit ? '编辑' : '发布' }}</text>\r\n\t\t\t\t<view class=\"nav-right\"></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 编辑表单 -->\r\n\t\t<view class=\"edit-form\" :style=\"{ paddingTop: (statusBarHeight + 44) + 'px', paddingBottom: (safeAreaBottom + 120) + 'px' }\">\r\n\t\t\t<view class=\"form-group\">\r\n\t\t\t\t<text class=\"form-label\">标题 *</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"form-input\" \r\n\t\t\t\t\tv-model=\"newsForm.title\" \r\n\t\t\t\t\tplaceholder=\"请输入标题\"\r\n\t\t\t\t\tmaxlength=\"100\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-group\">\r\n\t\t\t\t<text class=\"form-label\">发布时间</text>\r\n\t\t\t\t<picker \r\n\t\t\t\t\tmode=\"date\" \r\n\t\t\t\t\t:value=\"newsForm.time\" \r\n\t\t\t\t\t@change=\"onDateChange\"\r\n\t\t\t\t\tclass=\"date-picker\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"picker-display\">\r\n\t\t\t\t\t\t<text>{{ newsForm.time || '请选择日期' }}</text>\r\n\t\t\t\t\t\t<text class=\"picker-arrow\">></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-group\">\r\n\t\t\t\t<text class=\"form-label\">作者</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"form-input\" \r\n\t\t\t\t\tv-model=\"newsForm.author\" \r\n\t\t\t\t\tplaceholder=\"请输入作者姓名\"\r\n\t\t\t\t\tmaxlength=\"50\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-group\">\r\n\t\t\t\t<view class=\"switch-container\">\r\n\t\t\t\t\t<text class=\"form-label\">置顶</text>\r\n\t\t\t\t\t<switch \r\n\t\t\t\t\t\t:checked=\"newsForm.isPinned\" \r\n\t\t\t\t\t\t@change=\"onPinChange\"\r\n\t\t\t\t\t\tcolor=\"#007aff\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"switch-tip\">开启后，此事件将显示在列表顶部</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-group\">\r\n\t\t\t\t<text class=\"form-label\">内容 *</text>\r\n\t\t\t\t<view class=\"content-editor\">\r\n\t\t\t\t\t<view class=\"editor-toolbar\">\r\n\t\t\t\t\t\t<button class=\"tool-btn\" @click=\"addTextBlock\">\r\n\t\t\t\t\t\t\t<text class=\"tool-icon\">📝</text>\r\n\t\t\t\t\t\t\t<text class=\"tool-text\">添加文字</text>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class=\"tool-btn\" @click=\"addImageBlock\">\r\n\t\t\t\t\t\t\t<text class=\"tool-icon\">🖼️</text>\r\n\t\t\t\t\t\t\t<text class=\"tool-text\">添加图片</text>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"content-blocks\">\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\tv-for=\"(block, index) in newsForm.contentBlocks\" \r\n\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\tclass=\"content-block\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<!-- 文字块 -->\r\n\t\t\t\t\t\t\t<view v-if=\"block.type === 'text'\" class=\"text-block\">\r\n\t\t\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\t\t\tclass=\"text-input\" \r\n\t\t\t\t\t\t\t\t\tv-model=\"block.content\" \r\n\t\t\t\t\t\t\t\t\tplaceholder=\"请输入文字内容\"\r\n\t\t\t\t\t\t\t\t\tmaxlength=\"1000\"\r\n\t\t\t\t\t\t\t\t\t@input=\"updateCharCount\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<view class=\"block-actions\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"char-count\">{{ block.content.length }}/1000</text>\r\n\t\t\t\t\t\t\t\t\t<button class=\"action-btn delete\" @click=\"removeBlock(index)\">\r\n\t\t\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"action-btn move-up\" @click=\"moveBlock(index, -1)\" :disabled=\"index === 0\">\r\n\t\t\t\t\t\t\t\t\t\t上移\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"action-btn move-down\" @click=\"moveBlock(index, 1)\" :disabled=\"index === newsForm.contentBlocks.length - 1\">\r\n\t\t\t\t\t\t\t\t\t\t下移\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- 图片块 -->\r\n\t\t\t\t\t\t\t<view v-else-if=\"block.type === 'image'\" class=\"image-block\">\r\n\t\t\t\t\t\t\t\t<view class=\"image-preview\">\r\n\t\t\t\t\t\t\t\t\t<image \r\n\t\t\t\t\t\t\t\t\t\t:src=\"block.imageUrl\" \r\n\t\t\t\t\t\t\t\t\t\tclass=\"preview-image\" \r\n\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"previewImage(block.imageUrl)\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<button class=\"remove-image-btn\" @click=\"removeBlock(index)\">×</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"image-caption\">\r\n\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\tclass=\"caption-input\" \r\n\t\t\t\t\t\t\t\t\t\tv-model=\"block.caption\" \r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"图片说明（可选）\"\r\n\t\t\t\t\t\t\t\t\t\tmaxlength=\"100\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"block-actions\">\r\n\t\t\t\t\t\t\t\t\t<button class=\"action-btn move-up\" @click=\"moveBlock(index, -1)\" :disabled=\"index === 0\">\r\n\t\t\t\t\t\t\t\t\t\t上移\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"action-btn move-down\" @click=\"moveBlock(index, 1)\" :disabled=\"index === newsForm.contentBlocks.length - 1\">\r\n\t\t\t\t\t\t\t\t\t\t下移\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view v-if=\"newsForm.contentBlocks.length === 0\" class=\"empty-content\">\r\n\t\t\t\t\t\t\t<text>点击上方按钮添加内容块</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 底部固定保存栏 -->\r\n\t\t\t<view class=\"bottom-bar\" :style=\"{ paddingBottom: safeAreaBottom + 'px' }\">\r\n\t\t\t\t<button class=\"bottom-save-btn\" @click=\"saveNews\" :disabled=\"!canSave || saving\">\r\n\t\t\t\t\t{{ saving ? '保存中...' : '发布' }}\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstatusBarHeight: 0,\r\n\t\t\tsafeAreaBottom: 0,\r\n\t\t\tnewsId: '',\r\n\t\t\tisEdit: false,\r\n\t\t\tsaving: false,\r\n\t\t\tnewsForm: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\ttime: '',\r\n\t\t\t\tauthor: '',\r\n\t\t\t\tisPinned: false, // 新增：置顶状态\r\n\t\t\t\tcontentBlocks: [] // 新增：用于存储内容块\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tcomputed: {\r\n\t\tcanSave() {\r\n\t\t\treturn this.newsForm.title.trim() && \r\n\t\t\t\t   this.newsForm.contentBlocks.length > 0 && \r\n\t\t\t\t   this.newsForm.time && \r\n\t\t\t\t   !this.saving;\r\n\t\t}\r\n\t},\r\n\t\r\n\tonLoad(options) {\r\n\t\tconsole.log('新闻编辑页面加载，参数:', options);\r\n\t\tconsole.log('当前用户信息:', uni.getStorageSync('userInfo'));\r\n\t\t\r\n\t\t// 适配状态栏高度 & 安全区\r\n\t\tconst sys = uni.getSystemInfoSync();\r\n\t\tthis.statusBarHeight = sys.statusBarHeight || 20;\r\n\t\tlet bottomInset = 0;\r\n\t\tif (sys.safeAreaInsets && typeof sys.safeAreaInsets.bottom === 'number') {\r\n\t\t\tbottomInset = sys.safeAreaInsets.bottom;\r\n\t\t} else if (sys.safeArea && typeof sys.safeArea.bottom === 'number') {\r\n\t\t\tbottomInset = sys.screenHeight - sys.safeArea.bottom;\r\n\t\t}\r\n\t\tthis.safeAreaBottom = bottomInset || 0;\r\n\t\t\r\n\t\t// 检查用户权限\r\n\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\tif (!userInfo || !(userInfo.permission === '管理员' || userInfo.permission === 'superadmin')) {\r\n\t\t\tconsole.log('权限检查失败:', { userInfo, permission: userInfo?.permission });\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '权限不足',\r\n\t\t\t\tcontent: '只有管理员可以编辑新闻，请使用管理员账号登录',\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log('权限检查通过，继续加载页面');\r\n\t\t\r\n\t\t// 设置默认时间\r\n\t\tthis.newsForm.time = new Date().toISOString().split('T')[0];\r\n\t\t\r\n\t\tif (options.id) {\r\n\t\t\tthis.newsId = options.id;\r\n\t\t\tthis.isEdit = true;\r\n\t\t\tthis.loadNewsData();\r\n\t\t}\r\n\t},\r\n\t\r\n\tmethods: {\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack();\r\n\t\t},\r\n\t\t\r\n\t\tasync loadNewsData() {\r\n\t\t\ttry {\r\n\t\t\t\t// 优先从云端获取\r\n\t\t\t\tif (this.newsId) {\r\n\t\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\t\tname: 'news-service',\r\n\t\t\t\t\t\tdata: { action: 'getNewsById', id: this.newsId }\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (res && res.result && res.result.code === 0 && res.result.data) {\r\n\t\t\t\t\t\tconst news = res.result.data;\r\n\t\t\t\t\t\tthis.newsForm = {\r\n\t\t\t\t\t\t\ttitle: news.title || '',\r\n\t\t\t\t\t\t\tcontent: news.content || '',\r\n\t\t\t\t\t\t\ttime: news.time || new Date().toISOString().split('T')[0],\r\n\t\t\t\t\t\t\tauthor: news.author || '',\r\n\t\t\t\t\t\t\tisPinned: news.isPinned || false,\r\n\t\t\t\t\t\t\tcontentBlocks: Array.isArray(news.contentBlocks) ? news.contentBlocks : [{ type: 'text', content: news.content || '' }]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 回退到本地存储\r\n\t\t\t\tawait this.loadNewsFromStorage();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('加载新闻数据失败:', error);\r\n\t\t\t\tuni.showToast({ title: '加载失败', icon: 'none' });\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync loadNewsFromStorage() {\r\n\t\t\t// 从本地存储获取新闻列表\r\n\t\t\tconst newsList = uni.getStorageSync('newsList') || [];\r\n\t\t\tconst news = newsList.find(item => item.id === this.newsId);\r\n\t\t\t\r\n\t\t\tif (news) {\r\n\t\t\t\t// 如果找到新闻，使用存储的数据\r\n\t\t\t\tthis.newsForm = {\r\n\t\t\t\t\ttitle: news.title || '',\r\n\t\t\t\t\tcontent: news.content || '',\r\n\t\t\t\t\ttime: news.time || new Date().toISOString().split('T')[0],\r\n\t\t\t\t\tauthor: news.author || '',\r\n\t\t\t\t\tisPinned: news.isPinned || false,\r\n\t\t\t\t\tcontentBlocks: news.contentBlocks || [\r\n\t\t\t\t\t\t{ type: 'text', content: news.content || '' }\r\n\t\t\t\t\t]\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\t// 如果没找到，使用模拟数据\r\n\t\t\t\tawait this.loadMockNewsData();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync loadMockNewsData() {\r\n\t\t\t// 模拟加载新闻数据\r\n\t\t\tawait new Promise(resolve => setTimeout(resolve, 500));\r\n\t\t\t\r\n\t\t\t// 模拟新闻数据\r\n\t\t\t//this.newsForm = {\r\n\t\t\t\t//title: '公司荣获XX奖项11',\r\n\t\t\t\t//content: '近日，公司在教育领域取得了重大突破，荣获XX奖项。这是对我们专注教育、点亮成长理念的肯定。',\r\n\t\t\t\t//time: '2024-06-01',\r\n\t\t\t\t//author: '新欣火教育中心',\r\n\t\t\t\t//contentBlocks: [\r\n\t\t\t\t//\t{ type: 'text', content: '近日，公司在教育领域取得了重大突破，荣获XX奖项。这是对我们专注教育、点亮成长理念的肯定。' }\r\n\t\t\t\t//]\r\n\t\t\t//};\r\n\t\t},\r\n\t\t\r\n\t\tonDateChange(e) {\r\n\t\t\tthis.newsForm.time = e.detail.value;\r\n\t\t},\r\n\r\n\t\tonPinChange(e) {\r\n\t\t\tthis.newsForm.isPinned = e.detail.value;\r\n\t\t},\r\n\r\n\t\taddTextBlock() {\r\n\t\t\tthis.newsForm.contentBlocks.push({ type: 'text', content: '' });\r\n\t\t},\r\n\r\n\t\taddImageBlock() {\r\n\t\t\t// 检查用户权限\r\n\t\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\t\tif (!userInfo || !(userInfo.permission === '管理员' || userInfo.permission === 'superadmin')) {\r\n\t\t\t\tuni.showToast({ title: '权限不足', icon: 'none' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log('选择图片成功:', res);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst filePath = res.tempFilePaths[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 显示上传中提示\r\n\t\t\t\t\tuni.showLoading({ title: '上传图片中...' });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 上传图片到云存储\r\n\t\t\t\t\tthis.uploadImageToCloud(filePath);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('选择图片失败:', err);\r\n\t\t\t\t\tif (err.errMsg && err.errMsg.includes('cancel')) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showToast({ title: '选择图片失败', icon: 'none' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\tasync uploadImageToCloud(filePath) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cloudPath = `news-images/${Date.now()}_${Math.random().toString(36).substring(2,10)}.jpg`;\r\n\t\t\t\tconst uploadRes = await uniCloud.uploadFile({ filePath, cloudPath });\r\n\t\t\t\tconst cloudUrl = uploadRes.fileID;\r\n\t\t\t\t\r\n\t\t\t\t// 添加图片块到内容\r\n\t\t\t\tthis.newsForm.contentBlocks.push({ \r\n\t\t\t\t\ttype: 'image', \r\n\t\t\t\t\timageUrl: cloudUrl, \r\n\t\t\t\t\tcaption: '' \r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({ title: '图片上传成功', icon: 'success' });\r\n\t\t\t\tconsole.log('当前contentBlocks:', this.newsForm.contentBlocks);\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('图片上传失败:', error);\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({ title: '图片上传失败', icon: 'none' });\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 移除模拟上传函数\r\n\r\n\t\tremoveBlock(index) {\r\n\t\t\tthis.newsForm.contentBlocks.splice(index, 1);\r\n\t\t},\r\n\r\n\t\tmoveBlock(fromIndex, toIndex) {\r\n\t\t\tconst block = this.newsForm.contentBlocks.splice(fromIndex, 1)[0];\r\n\t\t\tthis.newsForm.contentBlocks.splice(toIndex, 0, block);\r\n\t\t},\r\n\r\n\t\tupdateCharCount() {\r\n\t\t\t// 更新每个文字块的字符计数\r\n\t\t\tthis.newsForm.contentBlocks.forEach(block => {\r\n\t\t\t\tif (block.type === 'text') {\r\n\t\t\t\t\tblock.charCount = block.content.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tpreviewImage(url) {\r\n\t\t\t// 如果是临时图片路径，需要特殊处理\r\n\t\t\tif (url && url.startsWith('http://tmp/')) {\r\n\t\t\t\t// 临时图片，直接预览\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [url],\r\n\t\t\t\t\tcurrent: url\r\n\t\t\t\t});\r\n\t\t\t} else if (url) {\r\n\t\t\t\t// 普通图片\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [url],\r\n\t\t\t\t\tcurrent: url\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tasync saveNews() {\r\n\t\t\tif (!this.canSave) return;\r\n\t\t\t\r\n\t\t\tconsole.log('开始保存新闻，当前数据:', this.newsForm);\r\n\t\t\t\r\n\t\t\t// 验证内容块\r\n\t\t\tfor (let block of this.newsForm.contentBlocks) {\r\n\t\t\t\tif (block.type === 'text' && !block.content.trim()) {\r\n\t\t\t\t\tuni.showToast({ title: '请填写完整的文字内容', icon: 'none' });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (block.type === 'image' && !block.imageUrl) {\r\n\t\t\t\t\tuni.showToast({ title: '请选择图片', icon: 'none' });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tthis.saving = true;\r\n\t\t\t\t\r\n\t\t\t\t// 生成最终内容（用于兼容旧版本）\r\n\t\t\t\tconst finalContent = this.newsForm.contentBlocks\r\n\t\t\t\t\t.map(block => {\r\n\t\t\t\t\t\tif (block.type === 'text') {\r\n\t\t\t\t\t\t\treturn block.content;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 图片块不生成占位符，直接跳过\r\n\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.filter(content => content.trim()) // 过滤掉空内容\r\n\t\t\t\t\t.join('\\n\\n');\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('生成的最终内容:', finalContent);\r\n\t\t\t\tconsole.log('保存的完整数据:', {\r\n\t\t\t\t\t...this.newsForm,\r\n\t\t\t\t\tcontent: finalContent,\r\n\t\t\t\t\tcontentBlocks: this.newsForm.contentBlocks\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 保存到云端\r\n\t\t\t\tconst payload = { ...this.newsForm, content: finalContent, contentBlocks: this.newsForm.contentBlocks };\r\n\t\t\t\tif (this.isEdit) {\r\n\t\t\t\t\tawait uniCloud.callFunction({ name: 'news-service', data: { action: 'updateNews', id: this.newsId, data: payload } });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst saveRes = await uniCloud.callFunction({ name: 'news-service', data: { action: 'createNews', data: payload } });\r\n\t\t\t\t\tif (saveRes && saveRes.result && saveRes.result.code === 0 && saveRes.result.data && saveRes.result.data._id) {\r\n\t\t\t\t\t\tthis.newsId = saveRes.result.data._id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({ \r\n\t\t\t\t\ttitle: this.isEdit ? '修改成功' : '发布成功', \r\n\t\t\t\t\ticon: 'success' \r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 通知首页刷新\r\n\t\t\t\tuni.$emit('newsUpdated');\r\n\t\t\t\tsetTimeout(() => { uni.navigateBack(); }, 1200);\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('保存新闻失败:', error);\r\n\t\t\t\tuni.showToast({ title: '保存失败', icon: 'none' });\r\n\t\t\t} finally {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.news-edit-container {\r\n\tmin-height: 100vh;\r\n\tbackground: #f8f8f8;\r\n}\r\n\r\n.nav-bar {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbackground: #fff;\r\n\tz-index: 1000;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.nav-content {\r\n\theight: 44px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tpadding: 0 20rpx;\r\n}\r\n\r\n.back-btn {\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.back-icon {\r\n\twidth: 40rpx; /* Adjust as needed */\r\n\theight: 40rpx; /* Adjust as needed */\r\n}\r\n\r\n.nav-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n\r\n.save-btn {\r\n\tbackground: #007aff;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 8rpx 24rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.save-btn:disabled {\r\n\tbackground: #ccc;\r\n}\r\n\r\n.edit-form {\r\n\tpadding: 20rpx;\r\n}\r\n\r\n/* 底部固定保存栏 */\r\n.bottom-bar {\r\n\tposition: fixed;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: #fff;\r\n\tpadding: 16rpx 20rpx;\r\n\tbox-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.08);\r\n\tz-index: 1000;\r\n}\r\n\r\n.bottom-save-btn {\r\n\twidth: 100%;\r\n\tbackground: #007aff;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 24rpx;\r\n\tpadding: 22rpx 0;\r\n\tfont-size: 32rpx;\r\n}\r\n\r\n.bottom-save-btn:disabled {\r\n\tbackground: #ccc;\r\n}\r\n\r\n.form-group {\r\n\tbackground: #fff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 30rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\r\n}\r\n\r\n.form-label {\r\n\tfont-size: 30rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmargin-bottom: 20rpx;\r\n\tdisplay: block;\r\n}\r\n\r\n.form-input {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tborder: 2rpx solid #e5e5e5;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 0 20rpx;\r\n\tfont-size: 28rpx;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.form-textarea {\r\n\twidth: 100%;\r\n\tmin-height: 200rpx;\r\n\tborder: 2rpx solid #e5e5e5;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 20rpx;\r\n\tfont-size: 28rpx;\r\n\tbox-sizing: border-box;\r\n\tresize: none;\r\n}\r\n\r\n.char-count {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n\ttext-align: right;\r\n\tmargin-top: 10rpx;\r\n\tdisplay: block;\r\n}\r\n\r\n.date-picker {\r\n\twidth: 100%;\r\n}\r\n\r\n.picker-display {\r\n\theight: 80rpx;\r\n\tborder: 2rpx solid #e5e5e5;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 0 20rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tbackground: #fff;\r\n}\r\n\r\n.picker-arrow {\r\n\tcolor: #999;\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.content-editor {\r\n\tbackground: #fff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 20rpx;\r\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\r\n}\r\n\r\n.editor-toolbar {\r\n\tdisplay: flex;\r\n\tjustify-content: space-around;\r\n\tmargin-bottom: 20rpx;\r\n\tpadding: 20rpx 0;\r\n\tborder-bottom: 2rpx solid #f0f0f0;\r\n}\r\n\r\n.tool-btn {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tpadding: 15rpx 20rpx;\r\n\tbackground: #f8f9fa;\r\n\tborder: 2rpx solid #e9ecef;\r\n\tborder-radius: 12rpx;\r\n\tmin-width: 120rpx;\r\n}\r\n\r\n.tool-btn:active {\r\n\tbackground: #e9ecef;\r\n}\r\n\r\n.tool-icon {\r\n\tfont-size: 36rpx;\r\n\tmargin-bottom: 8rpx;\r\n}\r\n\r\n.tool-text {\r\n\tfont-size: 22rpx;\r\n\tcolor: #495057;\r\n}\r\n\r\n.content-blocks {\r\n\tmargin-top: 20rpx;\r\n}\r\n\r\n.content-block {\r\n\tbackground: #ffffff;\r\n\tborder: 2rpx solid #e9ecef;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 25rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tposition: relative;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(0,0,0,0.05);\r\n}\r\n\r\n.text-block {\r\n\tpadding: 0;\r\n}\r\n\r\n.text-input {\r\n\twidth: 100%;\r\n\tmin-height: 120rpx;\r\n\tborder: 2rpx solid #e9ecef;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 20rpx;\r\n\tfont-size: 28rpx;\r\n\tline-height: 1.6;\r\n\tbox-sizing: border-box;\r\n\tbackground: #f8f9fa;\r\n}\r\n\r\n.text-input:focus {\r\n\tborder-color: #007aff;\r\n\tbackground: #ffffff;\r\n}\r\n\r\n.image-block {\r\n\tpadding: 0;\r\n}\r\n\r\n.image-preview {\r\n\tposition: relative;\r\n\tmargin-bottom: 15rpx;\r\n\tborder-radius: 12rpx;\r\n\toverflow: hidden;\r\n}\r\n\r\n.preview-image {\r\n\twidth: 100%;\r\n\theight: 300rpx;\r\n\tborder-radius: 12rpx;\r\n\tobject-fit: cover;\r\n}\r\n\r\n.remove-image-btn {\r\n\tposition: absolute;\r\n\ttop: 10rpx;\r\n\tright: 10rpx;\r\n\tbackground: rgba(255, 59, 48, 0.9);\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 50%;\r\n\twidth: 50rpx;\r\n\theight: 50rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tz-index: 10;\r\n}\r\n\r\n.image-caption {\r\n\tmargin-top: 15rpx;\r\n}\r\n\r\n.caption-input {\r\n\twidth: 100%;\r\n\theight: 70rpx;\r\n\tborder: 2rpx solid #e9ecef;\r\n\tborder-radius: 10rpx;\r\n\tpadding: 0 20rpx;\r\n\tfont-size: 26rpx;\r\n\tbox-sizing: border-box;\r\n\tbackground: #f8f9fa;\r\n}\r\n\r\n.block-actions {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-top: 20rpx;\r\n\tpadding-top: 20rpx;\r\n\tborder-top: 2rpx solid #f0f0f0;\r\n}\r\n\r\n.char-count {\r\n\tfont-size: 24rpx;\r\n\tcolor: #6c757d;\r\n}\r\n\r\n.action-btn {\r\n\tbackground: #6c757d;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 8rpx;\r\n\tpadding: 8rpx 16rpx;\r\n\tfont-size: 22rpx;\r\n\tmargin-left: 10rpx;\r\n}\r\n\r\n.action-btn.delete {\r\n\tbackground: #dc3545;\r\n}\r\n\r\n.action-btn.move-up,\r\n.action-btn.move-down {\r\n\tbackground: #007aff;\r\n}\r\n\r\n.action-btn:disabled {\r\n\tbackground: #adb5bd;\r\n}\r\n\r\n.empty-content {\r\n\ttext-align: center;\r\n\tpadding: 80rpx 0;\r\n\tcolor: #adb5bd;\r\n\tfont-size: 28rpx;\r\n\tbackground: #f8f9fa;\r\n\tborder-radius: 12rpx;\r\n\tborder: 2rpx dashed #dee2e6;\r\n}\r\n\r\n.switch-container {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.switch-tip {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n\tline-height: 1.4;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-edit.vue?vue&type=style&index=0&id=478d0dd0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-edit.vue?vue&type=style&index=0&id=478d0dd0&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1759881831364\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}