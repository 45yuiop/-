{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/news-detail/news-detail.vue?4b31","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/news-detail/news-detail.vue?3b57","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/news-detail/news-detail.vue?0ae7","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/news-detail/news-detail.vue?2a85","uni-app:///pages/news-detail/news-detail.vue","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/news-detail/news-detail.vue?6617","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/news-detail/news-detail.vue?f576"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","statusBarHeight","newsId","newsData","loading","computed","isAdmin","onLoad","uni","title","icon","setTimeout","console","methods","goBack","loadNewsDetail","uniCloud","name","action","id","res","news","content","time","author","isPinned","contentBlocks","type","loadNewsFromStorage","newsList","loadMockNewsDetail","images","imageUrl","caption","formatTime","previewImage","urls","current","editNews","url","deleteNews","confirmText","confirmColor","success","performDelete","togglePin"],"mappings":"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","file":"pages/news-detail/news-detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/news-detail/news-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./news-detail.vue?vue&type=template&id=69e22b1e&scoped=true&\"\nvar renderjs\nimport script from \"./news-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./news-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./news-detail.vue?vue&type=style&index=0&id=69e22b1e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69e22b1e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/news-detail/news-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=template&id=69e22b1e&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.newsData ? _vm.formatTime(_vm.newsData.time) : null\n  var g0 = _vm.newsData\n    ? _vm.newsData.contentBlocks && _vm.newsData.contentBlocks.length > 0\n    : null\n  var g1 = _vm.newsData\n    ? _vm.newsData.images && _vm.newsData.images.length > 0\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"news-detail-container\">\n\t\t<!-- é¡¶éƒ¨å¯¼èˆªæ  -->\n\t\t<view class=\"nav-bar\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n\t\t\t<view class=\"nav-content\">\n\t\t\t\t<view class=\"back-btn\" @click=\"goBack\">\n\t\t\t\t\t<image class=\"back-icon\" src=\"/static/back-cartoon.svg\" mode=\"aspectFit\" />\n\t\t\t\t</view>\n\t\t\t\t<text class=\"nav-title\">æ–°é—»è¯¦æƒ…</text>\n\t\t\t\t<view class=\"nav-right\"></view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- æ–°é—»å†…å®¹ -->\n\t\t<view class=\"news-content\" :style=\"{ paddingTop: (statusBarHeight + 44) + 'px' }\">\n\t\t\t<view v-if=\"newsData\" class=\"news-card\">\n\t\t\t\t<view class=\"news-header\">\n\t\t\t\t\t<text class=\"news-title\">{{ newsData.title }}</text>\n\t\t\t\t\t<view class=\"news-meta\">\n\t\t\t\t\t\t<view class=\"meta-row\">\n\t\t\t\t\t\t\t<text class=\"news-time\">{{ formatTime(newsData.time) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"meta-row\" v-if=\"newsData.author\">\n\t\t\t\t\t\t\t<text class=\"news-author\">ä½œè€…ï¼š{{ newsData.author }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"news-body\">\n\t\t\t\t\t<!-- æ”¯æŒæ–°çš„contentBlocksæ ¼å¼ -->\n\t\t\t\t\t<view v-if=\"newsData.contentBlocks && newsData.contentBlocks.length > 0\" class=\"content-blocks\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tv-for=\"(block, index) in newsData.contentBlocks\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\tclass=\"content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<!-- æ–‡å­—å— -->\n\t\t\t\t\t\t\t<text v-if=\"block.type === 'text'\" class=\"news-text\" :user-select=\"true\">{{ block.content }}</text>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- å›¾ç‰‡å— -->\n\t\t\t\t\t\t\t<view v-else-if=\"block.type === 'image'\" class=\"image-block\">\n\t\t\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t\t\t:src=\"block.imageUrl\" \n\t\t\t\t\t\t\t\t\tclass=\"news-image\" \n\t\t\t\t\t\t\t\t\tmode=\"widthFix\"\n\t\t\t\t\t\t\t\t\t@click=\"previewImage([block.imageUrl], 0)\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<text v-if=\"block.caption\" class=\"image-caption\">{{ block.caption }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- å…¼å®¹æ—§æ ¼å¼ -->\n\t\t\t\t\t<text v-else class=\"news-text\" :user-select=\"true\">{{ newsData.content }}</text>\n\t\t\t\t\t\n\t\t\t\t\t<!-- å…¼å®¹æ—§æ ¼å¼çš„å›¾ç‰‡ -->\n\t\t\t\t\t<view v-if=\"newsData.images && newsData.images.length > 0\" class=\"news-images\">\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\tv-for=\"(img, index) in newsData.images\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:src=\"img\"\n\t\t\t\t\t\t\tclass=\"news-image\"\n\t\t\t\t\t\t\tmode=\"widthFix\"\n\t\t\t\t\t\t\t@click=\"previewImage(newsData.images, index)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- åŠ è½½ä¸­ -->\n\t\t\t<view v-else-if=\"loading\" class=\"loading\">\n\t\t\t\t<text>åŠ è½½ä¸­...</text>\n\t\t\t</view>\n\n\t\t\t<!-- æ— æ•°æ® -->\n\t\t\t<view v-else class=\"empty\">\n\t\t\t\t<text>æ–°é—»ä¸å­˜åœ¨</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- ç®¡ç†å‘˜ä¿®æ”¹æŒ‰é’® -->\n\t\t<view v-if=\"isAdmin && newsData\" class=\"edit-btn-container\">\n\t\t\t<button class=\"delete-btn\" @click=\"deleteNews\">\n\t\t\t\t<text class=\"delete-icon\">ğŸ—‘ï¸</text>\n\t\t\t\t<text class=\"delete-text\">åˆ é™¤</text>\n\t\t\t</button>\n\t\t\t<button class=\"pin-btn\" @click=\"togglePin\" :class=\"{ 'pinned': newsData.isPinned }\">\n\t\t\t\t<text class=\"pin-icon\">{{ newsData.isPinned ? 'ğŸ“Œ' : 'ğŸ“' }}</text>\n\t\t\t\t<text class=\"pin-text\">{{ newsData.isPinned ? 'å–æ¶ˆç½®é¡¶' : 'ç½®é¡¶' }}</text>\n\t\t\t</button>\n\t\t\t<button class=\"edit-btn\" @click=\"editNews\">\n\t\t\t\t<text class=\"edit-icon\">âœï¸</text>\n\t\t\t\t<text class=\"edit-text\">ä¿®æ”¹</text>\n\t\t\t</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: 0,\n\t\t\tnewsId: '',\n\t\t\tnewsData: null,\n\t\t\tloading: true\n\t\t}\n\t},\n\t\n\tcomputed: {\n\t\tisAdmin() {\n\t\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\t\treturn userInfo && (userInfo.permission === 'ç®¡ç†å‘˜' || userInfo.permission === 'superadmin');\n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.newsId = options.id;\n\t\t\tthis.loadNewsDetail();\n\t\t} else {\n\t\t\tuni.showToast({ title: 'ç¼ºå°‘æ–°é—»ID', icon: 'none' });\n\t\t\tsetTimeout(() => uni.navigateBack(), 1500);\n\t\t}\n\t\t\n\t\t// é€‚é…çŠ¶æ€æ é«˜åº¦\n\t\tconst sys = uni.getSystemInfoSync();\n\t\tthis.statusBarHeight = sys.statusBarHeight || 20;\n\t\t\n\t\t// æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€\n\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\tif (!userInfo) {\n\t\t\tconsole.log('ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢');\n\t\t\t// å¯ä»¥é€‰æ‹©è·³è½¬åˆ°ç™»å½•é¡µé¢æˆ–ç»§ç»­æµè§ˆ\n\t\t\t// uni.reLaunch({ url: '/pages/login/login' });\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\tgoBack() {\n\t\t\tuni.navigateBack();\n\t\t},\n\t\t\n\t\tasync loadNewsDetail() {\n\t\t\ttry {\n\t\t\t\t// ä¼˜å…ˆä»äº‘ç«¯è·å–\n\t\t\t\tconst res = await uniCloud.callFunction({ name: 'news-service', data: { action: 'getNewsById', id: this.newsId } });\n\t\t\t\tif (res && res.result && res.result.code === 0 && res.result.data) {\n\t\t\t\t\tconst news = res.result.data;\n\t\t\t\t\tthis.newsData = {\n\t\t\t\t\t\tid: news._id || news.id,\n\t\t\t\t\t\ttitle: news.title,\n\t\t\t\t\t\tcontent: news.content,\n\t\t\t\t\t\ttime: news.time,\n\t\t\t\t\t\tauthor: news.author,\n\t\t\t\t\t\tisPinned: news.isPinned || false,\n\t\t\t\t\t\tcontentBlocks: Array.isArray(news.contentBlocks) ? news.contentBlocks : [{ type: 'text', content: news.content || '' }]\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tawait this.loadNewsFromStorage();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('åŠ è½½æ–°é—»è¯¦æƒ…å¤±è´¥:', error);\n\t\t\t\tuni.showToast({ title: 'åŠ è½½å¤±è´¥', icon: 'none' });\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync loadNewsFromStorage() {\n\t\t\t// ä»æœ¬åœ°å­˜å‚¨è·å–æ–°é—»åˆ—è¡¨\n\t\t\tconst newsList = uni.getStorageSync('newsList') || [];\n\t\t\tconst news = newsList.find(item => item.id === this.newsId);\n\t\t\t\n\t\t\tif (news) {\n\t\t\t\t// å¦‚æœæ‰¾åˆ°æ–°é—»ï¼Œä½¿ç”¨å­˜å‚¨çš„æ•°æ®\n\t\t\t\tthis.newsData = {\n\t\t\t\t\t...news,\n\t\t\t\t\tisPinned: news.isPinned || false,\n\t\t\t\t\t// å¦‚æœæ²¡æœ‰contentBlocksï¼Œä»contentç”Ÿæˆ\n\t\t\t\t\tcontentBlocks: news.contentBlocks || [\n\t\t\t\t\t\t{ type: 'text', content: news.content }\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// å¦‚æœæ²¡æ‰¾åˆ°ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n\t\t\t\tawait this.loadMockNewsDetail();\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync loadMockNewsDetail() {\n\t\t\t// æ¨¡æ‹ŸåŠ è½½æ–°é—»è¯¦æƒ…\n\t\t\tawait new Promise(resolve => setTimeout(resolve, 500));\n\t\t\t\n\t\t\t// æ¨¡æ‹Ÿæ–°é—»æ•°æ®\n\t\t\tthis.newsData = {\n\t\t\t\tid: this.newsId,\n\t\t\t\ttitle: 'å…¬å¸è£è·XXå¥–é¡¹11',\n\t\t\t\tcontent: 'è¿‘æ—¥ï¼Œå…¬å¸åœ¨æ•™è‚²é¢†åŸŸå–å¾—äº†é‡å¤§çªç ´ï¼Œè£è·XXå¥–é¡¹ã€‚è¿™æ˜¯å¯¹æˆ‘ä»¬ä¸“æ³¨æ•™è‚²ã€ç‚¹äº®æˆé•¿ç†å¿µçš„è‚¯å®šã€‚æˆ‘ä»¬å°†ç»§ç»­åŠªåŠ›ï¼Œä¸ºæ•™è‚²äº‹ä¸šè´¡çŒ®æ›´å¤šåŠ›é‡ã€‚\\n\\nè·å¥–é¡¹ç›®åŒ…æ‹¬ï¼š\\nâ€¢ åˆ›æ–°æ•™å­¦æ–¹æ³•\\nâ€¢ å­¦ç”Ÿæˆé•¿è·Ÿè¸ªç³»ç»Ÿ\\nâ€¢ å®¶é•¿æ²Ÿé€šå¹³å°\\n\\næ„Ÿè°¢æ‰€æœ‰åŒäº‹çš„è¾›å‹¤ä»˜å‡ºï¼Œè®©æˆ‘ä»¬ä¸€èµ·ä¸ºæ›´ç¾å¥½çš„æ•™è‚²æœªæ¥è€ŒåŠªåŠ›ï¼',\n\t\t\t\ttime: '2024-06-01',\n\t\t\t\tauthor: 'æ–°æ¬£ç«æ•™è‚²ä¸­å¿ƒ',\n\t\t\t\timages: [],\n\t\t\t\tcontentBlocks: [\n\t\t\t\t\t{ type: 'text', content: 'è¿‘æ—¥ï¼Œå…¬å¸åœ¨æ•™è‚²é¢†åŸŸå–å¾—äº†é‡å¤§çªç ´ï¼Œè£è·XXå¥–é¡¹ã€‚è¿™æ˜¯å¯¹æˆ‘ä»¬ä¸“æ³¨æ•™è‚²ã€ç‚¹äº®æˆé•¿ç†å¿µçš„è‚¯å®šã€‚æˆ‘ä»¬å°†ç»§ç»­åŠªåŠ›ï¼Œä¸ºæ•™è‚²äº‹ä¸šè´¡çŒ®æ›´å¤šåŠ›é‡ã€‚\\n\\nè·å¥–é¡¹ç›®åŒ…æ‹¬ï¼š\\nâ€¢ åˆ›æ–°æ•™å­¦æ–¹æ³•\\nâ€¢ å­¦ç”Ÿæˆé•¿è·Ÿè¸ªç³»ç»Ÿ\\nâ€¢ å®¶é•¿æ²Ÿé€šå¹³å°\\n\\næ„Ÿè°¢æ‰€æœ‰åŒäº‹çš„è¾›å‹¤ä»˜å‡ºï¼Œè®©æˆ‘ä»¬ä¸€èµ·ä¸ºæ›´ç¾å¥½çš„æ•™è‚²æœªæ¥è€ŒåŠªåŠ›ï¼' },\n\t\t\t\t\t{ type: 'image', imageUrl: '/static/news/news1.jpg', caption: 'å›¾ç‰‡1' },\n\t\t\t\t\t{ type: 'text', content: 'è¿™æ˜¯æˆ‘ä»¬çš„å›¢é˜Ÿï¼Œä»–ä»¬ä¸ºæ•™è‚²äº‹ä¸šè´¡çŒ®äº†å·¨å¤§çš„åŠªåŠ›ã€‚' },\n\t\t\t\t\t{ type: 'image', imageUrl: '/static/news/news2.jpg', caption: 'å›¾ç‰‡2' },\n\t\t\t\t\t{ type: 'text', content: 'æˆ‘ä»¬çš„æ„¿æ™¯æ˜¯æˆä¸ºæ•™è‚²é¢†åŸŸçš„é¢†å¯¼è€…ï¼Œä¸ºæ¯ä¸ªå­©å­æä¾›æœ€å¥½çš„æ•™è‚²ã€‚' }\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\t\n\t\tformatTime(timeStr) {\n\t\t\tif (!timeStr) return '';\n\t\t\tconst date = new Date(timeStr);\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0');\n\t\t\tconst day = date.getDate().toString().padStart(2, '0');\n\t\t\treturn `${year}-${month}-${day}`;\n\t\t},\n\t\t\n\t\tpreviewImage(images, currentIndex) {\n\t\t\tif (!images || images.length === 0) return;\n\t\t\t\n\t\t\t// è¿‡æ»¤æ‰æ— æ•ˆçš„å›¾ç‰‡URL\n\t\t\tconst validImages = images.filter(img => img && img.trim());\n\t\t\tif (validImages.length === 0) return;\n\t\t\t\n\t\t\tuni.previewImage({\n\t\t\t\turls: validImages,\n\t\t\t\tcurrent: validImages[currentIndex] || validImages[0]\n\t\t\t});\n\t\t},\n\t\t\n\t\teditNews() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/news-edit/news-edit?id=${this.newsId}`\n\t\t\t});\n\t\t},\n\t\t\n\t\tdeleteNews() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: 'ç¡®è®¤åˆ é™¤',\n\t\t\t\tcontent: 'ç¡®å®šè¦åˆ é™¤è¿™æ¡æ–°é—»å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ã€‚',\n\t\t\t\tconfirmText: 'åˆ é™¤',\n\t\t\t\tconfirmColor: '#ff4444',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.performDelete();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tasync performDelete() {\n\t\t\ttry {\n\t\t\t\tawait uniCloud.callFunction({ name: 'news-service', data: { action: 'deleteNews', id: this.newsId } });\n\t\t\t\t// é€šçŸ¥é¦–é¡µåˆ·æ–°\n\t\t\t\tuni.$emit('newsUpdated');\n\t\t\t\t\n\t\t\t\tuni.showToast({ title: 'åˆ é™¤æˆåŠŸ', icon: 'success' });\n\t\t\t\t\n\t\t\t\t// è¿”å›ä¸Šä¸€é¡µ\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateBack();\n\t\t\t\t}, 1500);\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('åˆ é™¤æ–°é—»å¤±è´¥:', error);\n\t\t\t\tuni.showToast({ title: 'åˆ é™¤å¤±è´¥', icon: 'none' });\n\t\t\t}\n\t\t},\n\n\t\tasync togglePin() {\n\t\t\ttry {\n\t\t\t\tconst res = await uniCloud.callFunction({ \n\t\t\t\t\tname: 'news-service', \n\t\t\t\t\tdata: { action: 'togglePin', id: this.newsId } \n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (res && res.result && res.result.code === 0) {\n\t\t\t\t\t// æ›´æ–°æœ¬åœ°æ•°æ®\n\t\t\t\t\tthis.newsData.isPinned = res.result.data.isPinned;\n\t\t\t\t\t\n\t\t\t\t\t// é€šçŸ¥é¦–é¡µåˆ·æ–°\n\t\t\t\t\tuni.$emit('newsUpdated');\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({ \n\t\t\t\t\t\ttitle: res.result.message, \n\t\t\t\t\t\ticon: 'success' \n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({ title: 'æ“ä½œå¤±è´¥', icon: 'none' });\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('ç½®é¡¶æ“ä½œå¤±è´¥:', error);\n\t\t\t\tuni.showToast({ title: 'æ“ä½œå¤±è´¥', icon: 'none' });\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.news-detail-container {\n\tmin-height: 100vh;\n\tbackground: #f8f8f8;\n}\n\n.nav-bar {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: #fff;\n\tz-index: 1000;\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\n}\n\n.nav-content {\n\theight: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 20rpx;\n}\n\n.back-btn {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.back-icon {\n\twidth: 36rpx; /* Adjust as needed */\n\theight: 36rpx; /* Adjust as needed */\n}\n\n.nav-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n}\n\n.nav-right {\n\twidth: 60rpx;\n}\n\n.news-content {\n\tpadding: 20rpx;\n}\n\n.news-card {\n\tbackground: #fff;\n\tborder-radius: 20rpx;\n\tpadding: 40rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0,0,0,0.08);\n}\n\n.news-header {\n\tmargin-bottom: 40rpx;\n}\n\n.news-title {\n\tfont-size: 40rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tline-height: 1.4;\n\tmargin-bottom: 20rpx;\n\tdisplay: block;\n\ttext-align: center; /* Added for centering */\n}\n\n.news-meta {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.meta-row {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.news-time {\n\tfont-size: 26rpx;\n\tcolor: #999;\n\ttext-align: left;\n\twidth: 100%;\n}\n\n.news-author {\n\tfont-size: 26rpx;\n\tcolor: #666;\n\ttext-align: left;\n\twidth: 100%;\n}\n\n.news-body {\n\tline-height: 1.8;\n\tmargin-top: 40rpx;\n}\n\n\n.news-text {\n    font-size: 30rpx;\n    color: #333;\n    line-height: 1.8;\n    white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œç¬¦ */\n    margin-bottom: 40rpx;\n    text-align: left; /* ç¡®ä¿æ–‡æœ¬å·¦å¯¹é½ */\n    text-indent: 2em; /* é¦–è¡Œç¼©è¿›ä¸¤ä¸ªå­—ç¬¦ */\n    word-break: break-word; /* å¤„ç†é•¿å•è¯æ¢è¡Œ */\n    overflow-wrap: break-word; /* æ›´å…¼å®¹çš„æ¢è¡Œå¤„ç† */\n}\n\n/* å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾…åŠ©ç±»æ¥æµ‹è¯•ä¸åŒå†…å®¹çš„æ˜¾ç¤ºæ•ˆæœ */\n.test-content {\n    /* ç»§æ‰¿.news-textçš„æ‰€æœ‰æ ·å¼ */\n    composes: news-text;\n    /* å¯ä»¥æ·»åŠ æµ‹è¯•ç”¨çš„é¢å¤–æ ·å¼ */\n}\n\n\n.content-blocks {\n\tmargin-bottom: 20rpx;\n}\n\n.content-block {\n\tmargin-bottom: 20rpx;\n}\n\n.image-block {\n\tmargin: 20rpx 0;\n\ttext-align: center;\n}\n\n.image-caption {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\ttext-align: center;\n\tmargin-top: 10rpx;\n\tdisplay: block;\n}\n\n.news-images {\n\tmargin-top: 30rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.news-image {\n\twidth: 100%;\n\tborder-radius: 12rpx;\n}\n\n.loading, .empty {\n\ttext-align: center;\n\tpadding: 100rpx 0;\n\tcolor: #999;\n\tfont-size: 28rpx;\n}\n\n.edit-btn-container {\n\tposition: fixed;\n\tbottom: 40rpx;\n\tright: 40rpx;\n\tz-index: 100;\n\tdisplay: flex;\n\tgap: 20rpx;\n}\n\n.edit-btn, .delete-btn, .pin-btn {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tborder-radius: 50%;\n\tborder: none;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tbox-shadow: 0 8rpx 30rpx rgba(0,0,0,0.3);\n}\n\n.edit-btn {\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(102, 126, 234, 0.4);\n}\n\n.delete-btn {\n\tbackground: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(255, 107, 107, 0.4);\n}\n\n.pin-btn {\n\tbackground: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(255, 167, 38, 0.4);\n}\n\n.pin-btn.pinned {\n\tbackground: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(76, 175, 80, 0.4);\n}\n\n.edit-icon, .delete-icon, .pin-icon {\n\tfont-size: 28rpx;\n\tmargin-bottom: 4rpx;\n}\n\n.edit-text, .delete-text, .pin-text {\n\tfont-size: 22rpx;\n\tcolor: #fff;\n}\n</style>\n","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=style&index=0&id=69e22b1e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=style&index=0&id=69e22b1e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1759881831358\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}