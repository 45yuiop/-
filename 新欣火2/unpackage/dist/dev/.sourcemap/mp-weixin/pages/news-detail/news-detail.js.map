{"version":3,"sources":["uni-app:///main.js","webpack:///D:/代码/小程序/新欣火1/pages/news-detail/news-detail.vue?4b31","webpack:///D:/代码/小程序/新欣火1/pages/news-detail/news-detail.vue?3b57","webpack:///D:/代码/小程序/新欣火1/pages/news-detail/news-detail.vue?0ae7","webpack:///D:/代码/小程序/新欣火1/pages/news-detail/news-detail.vue?2a85","uni-app:///pages/news-detail/news-detail.vue","webpack:///D:/代码/小程序/新欣火1/pages/news-detail/news-detail.vue?6617","webpack:///D:/代码/小程序/新欣火1/pages/news-detail/news-detail.vue?f576"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","statusBarHeight","newsId","newsData","loading","computed","isAdmin","onLoad","uni","title","icon","setTimeout","console","methods","goBack","loadNewsDetail","uniCloud","name","action","id","res","news","content","time","author","isPinned","contentBlocks","type","loadNewsFromStorage","newsList","loadMockNewsDetail","images","imageUrl","caption","formatTime","previewImage","urls","current","editNews","url","deleteNews","confirmText","confirmColor","success","performDelete","togglePin"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACqC;;;AAG/F;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAyqB,CAAgB,uqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmG7rB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;MACA;MACA;IACA;EACA;EAEAC;IACA;MACA;MACA;IACA;MACAC;QAAAC;QAAAC;MAAA;MACAC;QAAA;MAAA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;MACAC;MACA;MACA;IACA;EACA;;EAEAC;IACAC;MACAN;IACA;IAEAO;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAC;kBAAAC;kBAAAjB;oBAAAkB;oBAAAC;kBAAA;gBAAA;cAAA;gBAAAC;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACAC;gBACA;kBACAF;kBACAV;kBACAa;kBACAC;kBACAC;kBACAC;kBACAC;oBAAAC;oBAAAL;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAV;gBACAJ;kBAAAC;kBAAAC;gBAAA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAkB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;gBACAR;kBAAA;gBAAA;gBAAA,KAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA,kDACAA;kBACAI;kBACA;kBACAC,sCACA;oBAAAC;oBAAAL;kBAAA;gBACA,EACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAQ;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEA;kBAAA;gBAAA;cAAA;gBAEA;gBACA;kBACAX;kBACAV;kBACAa;kBACAC;kBACAC;kBACAO;kBACAL,gBACA;oBAAAC;oBAAAL;kBAAA,GACA;oBAAAK;oBAAAK;oBAAAC;kBAAA,GACA;oBAAAN;oBAAAL;kBAAA,GACA;oBAAAK;oBAAAK;oBAAAC;kBAAA,GACA;oBAAAN;oBAAAL;kBAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAY;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;;MAEA;MACA;QAAA;MAAA;MACA;MAEA3B;QACA4B;QACAC;MACA;IACA;IAEAC;MACA9B;QACA+B;MACA;IACA;IAEAC;MAAA;MACAhC;QACAC;QACAa;QACAmB;QACAC;QACAC;UACA;YACA;UACA;QACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA5B;kBAAAC;kBAAAjB;oBAAAkB;oBAAAC;kBAAA;gBAAA;cAAA;gBACA;gBACAX;gBAEAA;kBAAAC;kBAAAC;gBAAA;;gBAEA;gBACAC;kBACAH;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAI;gBACAJ;kBAAAC;kBAAAC;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAmC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEA7B;kBACAC;kBACAjB;oBAAAkB;oBAAAC;kBAAA;gBACA;cAAA;gBAHAC;gBAKA;kBACA;kBACA;;kBAEA;kBACAZ;kBAEAA;oBACAC;oBACAC;kBACA;gBACA;kBACAF;oBAAAC;oBAAAC;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAE;gBACAJ;kBAAAC;kBAAAC;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5SA;AAAA;AAAA;AAAA;AAA8+B,CAAgB,w8BAAG,EAAC,C;;;;;;;;;;;ACAlgC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/news-detail/news-detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/news-detail/news-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./news-detail.vue?vue&type=template&id=69e22b1e&scoped=true&\"\nvar renderjs\nimport script from \"./news-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./news-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./news-detail.vue?vue&type=style&index=0&id=69e22b1e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69e22b1e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/news-detail/news-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=template&id=69e22b1e&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.newsData ? _vm.formatTime(_vm.newsData.time) : null\n  var g0 = _vm.newsData\n    ? _vm.newsData.contentBlocks && _vm.newsData.contentBlocks.length > 0\n    : null\n  var g1 = _vm.newsData\n    ? _vm.newsData.images && _vm.newsData.images.length > 0\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"news-detail-container\">\n\t\t<!-- 顶部导航栏 -->\n\t\t<view class=\"nav-bar\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n\t\t\t<view class=\"nav-content\">\n\t\t\t\t<view class=\"back-btn\" @click=\"goBack\">\n\t\t\t\t\t<image class=\"back-icon\" src=\"/static/back-cartoon.svg\" mode=\"aspectFit\" />\n\t\t\t\t</view>\n\t\t\t\t<text class=\"nav-title\">新闻详情</text>\n\t\t\t\t<view class=\"nav-right\"></view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 新闻内容 -->\n\t\t<view class=\"news-content\" :style=\"{ paddingTop: (statusBarHeight + 44) + 'px' }\">\n\t\t\t<view v-if=\"newsData\" class=\"news-card\">\n\t\t\t\t<view class=\"news-header\">\n\t\t\t\t\t<text class=\"news-title\">{{ newsData.title }}</text>\n\t\t\t\t\t<view class=\"news-meta\">\n\t\t\t\t\t\t<view class=\"meta-row\">\n\t\t\t\t\t\t\t<text class=\"news-time\">{{ formatTime(newsData.time) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"meta-row\" v-if=\"newsData.author\">\n\t\t\t\t\t\t\t<text class=\"news-author\">作者：{{ newsData.author }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"news-body\">\n\t\t\t\t\t<!-- 支持新的contentBlocks格式 -->\n\t\t\t\t\t<view v-if=\"newsData.contentBlocks && newsData.contentBlocks.length > 0\" class=\"content-blocks\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tv-for=\"(block, index) in newsData.contentBlocks\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\tclass=\"content-block\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<!-- 文字块 -->\n\t\t\t\t\t\t\t<text v-if=\"block.type === 'text'\" class=\"news-text\" :user-select=\"true\">{{ block.content }}</text>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 图片块 -->\n\t\t\t\t\t\t\t<view v-else-if=\"block.type === 'image'\" class=\"image-block\">\n\t\t\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t\t\t:src=\"block.imageUrl\" \n\t\t\t\t\t\t\t\t\tclass=\"news-image\" \n\t\t\t\t\t\t\t\t\tmode=\"widthFix\"\n\t\t\t\t\t\t\t\t\t@click=\"previewImage([block.imageUrl], 0)\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<text v-if=\"block.caption\" class=\"image-caption\">{{ block.caption }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 兼容旧格式 -->\n\t\t\t\t\t<text v-else class=\"news-text\" :user-select=\"true\">{{ newsData.content }}</text>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 兼容旧格式的图片 -->\n\t\t\t\t\t<view v-if=\"newsData.images && newsData.images.length > 0\" class=\"news-images\">\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\tv-for=\"(img, index) in newsData.images\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:src=\"img\"\n\t\t\t\t\t\t\tclass=\"news-image\"\n\t\t\t\t\t\t\tmode=\"widthFix\"\n\t\t\t\t\t\t\t@click=\"previewImage(newsData.images, index)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 加载中 -->\n\t\t\t<view v-else-if=\"loading\" class=\"loading\">\n\t\t\t\t<text>加载中...</text>\n\t\t\t</view>\n\n\t\t\t<!-- 无数据 -->\n\t\t\t<view v-else class=\"empty\">\n\t\t\t\t<text>新闻不存在</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 管理员修改按钮 -->\n\t\t<view v-if=\"isAdmin && newsData\" class=\"edit-btn-container\">\n\t\t\t<button class=\"delete-btn\" @click=\"deleteNews\">\n\t\t\t\t<text class=\"delete-icon\">🗑️</text>\n\t\t\t\t<text class=\"delete-text\">删除</text>\n\t\t\t</button>\n\t\t\t<button class=\"pin-btn\" @click=\"togglePin\" :class=\"{ 'pinned': newsData.isPinned }\">\n\t\t\t\t<text class=\"pin-icon\">{{ newsData.isPinned ? '📌' : '📍' }}</text>\n\t\t\t\t<text class=\"pin-text\">{{ newsData.isPinned ? '取消置顶' : '置顶' }}</text>\n\t\t\t</button>\n\t\t\t<button class=\"edit-btn\" @click=\"editNews\">\n\t\t\t\t<text class=\"edit-icon\">✏️</text>\n\t\t\t\t<text class=\"edit-text\">修改</text>\n\t\t\t</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstatusBarHeight: 0,\n\t\t\tnewsId: '',\n\t\t\tnewsData: null,\n\t\t\tloading: true\n\t\t}\n\t},\n\t\n\tcomputed: {\n\t\tisAdmin() {\n\t\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\t\treturn userInfo && (userInfo.permission === '管理员' || userInfo.permission === 'superadmin');\n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.newsId = options.id;\n\t\t\tthis.loadNewsDetail();\n\t\t} else {\n\t\t\tuni.showToast({ title: '缺少新闻ID', icon: 'none' });\n\t\t\tsetTimeout(() => uni.navigateBack(), 1500);\n\t\t}\n\t\t\n\t\t// 适配状态栏高度\n\t\tconst sys = uni.getSystemInfoSync();\n\t\tthis.statusBarHeight = sys.statusBarHeight || 20;\n\t\t\n\t\t// 检查用户登录状态\n\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\tif (!userInfo) {\n\t\t\tconsole.log('用户未登录，跳转到登录页面');\n\t\t\t// 可以选择跳转到登录页面或继续浏览\n\t\t\t// uni.reLaunch({ url: '/pages/login/login' });\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\tgoBack() {\n\t\t\tuni.navigateBack();\n\t\t},\n\t\t\n\t\tasync loadNewsDetail() {\n\t\t\ttry {\n\t\t\t\t// 优先从云端获取\n\t\t\t\tconst res = await uniCloud.callFunction({ name: 'news-service', data: { action: 'getNewsById', id: this.newsId } });\n\t\t\t\tif (res && res.result && res.result.code === 0 && res.result.data) {\n\t\t\t\t\tconst news = res.result.data;\n\t\t\t\t\tthis.newsData = {\n\t\t\t\t\t\tid: news._id || news.id,\n\t\t\t\t\t\ttitle: news.title,\n\t\t\t\t\t\tcontent: news.content,\n\t\t\t\t\t\ttime: news.time,\n\t\t\t\t\t\tauthor: news.author,\n\t\t\t\t\t\tisPinned: news.isPinned || false,\n\t\t\t\t\t\tcontentBlocks: Array.isArray(news.contentBlocks) ? news.contentBlocks : [{ type: 'text', content: news.content || '' }]\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tawait this.loadNewsFromStorage();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载新闻详情失败:', error);\n\t\t\t\tuni.showToast({ title: '加载失败', icon: 'none' });\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync loadNewsFromStorage() {\n\t\t\t// 从本地存储获取新闻列表\n\t\t\tconst newsList = uni.getStorageSync('newsList') || [];\n\t\t\tconst news = newsList.find(item => item.id === this.newsId);\n\t\t\t\n\t\t\tif (news) {\n\t\t\t\t// 如果找到新闻，使用存储的数据\n\t\t\t\tthis.newsData = {\n\t\t\t\t\t...news,\n\t\t\t\t\tisPinned: news.isPinned || false,\n\t\t\t\t\t// 如果没有contentBlocks，从content生成\n\t\t\t\t\tcontentBlocks: news.contentBlocks || [\n\t\t\t\t\t\t{ type: 'text', content: news.content }\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// 如果没找到，使用模拟数据\n\t\t\t\tawait this.loadMockNewsDetail();\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync loadMockNewsDetail() {\n\t\t\t// 模拟加载新闻详情\n\t\t\tawait new Promise(resolve => setTimeout(resolve, 500));\n\t\t\t\n\t\t\t// 模拟新闻数据\n\t\t\tthis.newsData = {\n\t\t\t\tid: this.newsId,\n\t\t\t\ttitle: '公司荣获XX奖项11',\n\t\t\t\tcontent: '近日，公司在教育领域取得了重大突破，荣获XX奖项。这是对我们专注教育、点亮成长理念的肯定。我们将继续努力，为教育事业贡献更多力量。\\n\\n获奖项目包括：\\n• 创新教学方法\\n• 学生成长跟踪系统\\n• 家长沟通平台\\n\\n感谢所有同事的辛勤付出，让我们一起为更美好的教育未来而努力！',\n\t\t\t\ttime: '2024-06-01',\n\t\t\t\tauthor: '新欣火教育中心',\n\t\t\t\timages: [],\n\t\t\t\tcontentBlocks: [\n\t\t\t\t\t{ type: 'text', content: '近日，公司在教育领域取得了重大突破，荣获XX奖项。这是对我们专注教育、点亮成长理念的肯定。我们将继续努力，为教育事业贡献更多力量。\\n\\n获奖项目包括：\\n• 创新教学方法\\n• 学生成长跟踪系统\\n• 家长沟通平台\\n\\n感谢所有同事的辛勤付出，让我们一起为更美好的教育未来而努力！' },\n\t\t\t\t\t{ type: 'image', imageUrl: '/static/news/news1.jpg', caption: '图片1' },\n\t\t\t\t\t{ type: 'text', content: '这是我们的团队，他们为教育事业贡献了巨大的努力。' },\n\t\t\t\t\t{ type: 'image', imageUrl: '/static/news/news2.jpg', caption: '图片2' },\n\t\t\t\t\t{ type: 'text', content: '我们的愿景是成为教育领域的领导者，为每个孩子提供最好的教育。' }\n\t\t\t\t]\n\t\t\t};\n\t\t},\n\t\t\n\t\tformatTime(timeStr) {\n\t\t\tif (!timeStr) return '';\n\t\t\tconst date = new Date(timeStr);\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0');\n\t\t\tconst day = date.getDate().toString().padStart(2, '0');\n\t\t\treturn `${year}-${month}-${day}`;\n\t\t},\n\t\t\n\t\tpreviewImage(images, currentIndex) {\n\t\t\tif (!images || images.length === 0) return;\n\t\t\t\n\t\t\t// 过滤掉无效的图片URL\n\t\t\tconst validImages = images.filter(img => img && img.trim());\n\t\t\tif (validImages.length === 0) return;\n\t\t\t\n\t\t\tuni.previewImage({\n\t\t\t\turls: validImages,\n\t\t\t\tcurrent: validImages[currentIndex] || validImages[0]\n\t\t\t});\n\t\t},\n\t\t\n\t\teditNews() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/news-edit/news-edit?id=${this.newsId}`\n\t\t\t});\n\t\t},\n\t\t\n\t\tdeleteNews() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '确认删除',\n\t\t\t\tcontent: '确定要删除这条新闻吗？删除后无法恢复。',\n\t\t\t\tconfirmText: '删除',\n\t\t\t\tconfirmColor: '#ff4444',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.performDelete();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tasync performDelete() {\n\t\t\ttry {\n\t\t\t\tawait uniCloud.callFunction({ name: 'news-service', data: { action: 'deleteNews', id: this.newsId } });\n\t\t\t\t// 通知首页刷新\n\t\t\t\tuni.$emit('newsUpdated');\n\t\t\t\t\n\t\t\t\tuni.showToast({ title: '删除成功', icon: 'success' });\n\t\t\t\t\n\t\t\t\t// 返回上一页\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateBack();\n\t\t\t\t}, 1500);\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('删除新闻失败:', error);\n\t\t\t\tuni.showToast({ title: '删除失败', icon: 'none' });\n\t\t\t}\n\t\t},\n\n\t\tasync togglePin() {\n\t\t\ttry {\n\t\t\t\tconst res = await uniCloud.callFunction({ \n\t\t\t\t\tname: 'news-service', \n\t\t\t\t\tdata: { action: 'togglePin', id: this.newsId } \n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (res && res.result && res.result.code === 0) {\n\t\t\t\t\t// 更新本地数据\n\t\t\t\t\tthis.newsData.isPinned = res.result.data.isPinned;\n\t\t\t\t\t\n\t\t\t\t\t// 通知首页刷新\n\t\t\t\t\tuni.$emit('newsUpdated');\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({ \n\t\t\t\t\t\ttitle: res.result.message, \n\t\t\t\t\t\ticon: 'success' \n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({ title: '操作失败', icon: 'none' });\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('置顶操作失败:', error);\n\t\t\t\tuni.showToast({ title: '操作失败', icon: 'none' });\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.news-detail-container {\n\tmin-height: 100vh;\n\tbackground: #f8f8f8;\n}\n\n.nav-bar {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: #fff;\n\tz-index: 1000;\n\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\n}\n\n.nav-content {\n\theight: 44px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 20rpx;\n}\n\n.back-btn {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.back-icon {\n\twidth: 36rpx; /* Adjust as needed */\n\theight: 36rpx; /* Adjust as needed */\n}\n\n.nav-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n}\n\n.nav-right {\n\twidth: 60rpx;\n}\n\n.news-content {\n\tpadding: 20rpx;\n}\n\n.news-card {\n\tbackground: #fff;\n\tborder-radius: 20rpx;\n\tpadding: 40rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0,0,0,0.08);\n}\n\n.news-header {\n\tmargin-bottom: 40rpx;\n}\n\n.news-title {\n\tfont-size: 40rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tline-height: 1.4;\n\tmargin-bottom: 20rpx;\n\tdisplay: block;\n\ttext-align: center; /* Added for centering */\n}\n\n.news-meta {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.meta-row {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.news-time {\n\tfont-size: 26rpx;\n\tcolor: #999;\n\ttext-align: left;\n\twidth: 100%;\n}\n\n.news-author {\n\tfont-size: 26rpx;\n\tcolor: #666;\n\ttext-align: left;\n\twidth: 100%;\n}\n\n.news-body {\n\tline-height: 1.8;\n\tmargin-top: 40rpx;\n}\n\n\n.news-text {\n    font-size: 30rpx;\n    color: #333;\n    line-height: 1.8;\n    white-space: pre-wrap; /* 保留换行符 */\n    margin-bottom: 40rpx;\n    text-align: left; /* 确保文本左对齐 */\n    text-indent: 2em; /* 首行缩进两个字符 */\n    word-break: break-word; /* 处理长单词换行 */\n    overflow-wrap: break-word; /* 更兼容的换行处理 */\n}\n\n/* 可以添加一个辅助类来测试不同内容的显示效果 */\n.test-content {\n    /* 继承.news-text的所有样式 */\n    composes: news-text;\n    /* 可以添加测试用的额外样式 */\n}\n\n\n.content-blocks {\n\tmargin-bottom: 20rpx;\n}\n\n.content-block {\n\tmargin-bottom: 20rpx;\n}\n\n.image-block {\n\tmargin: 20rpx 0;\n\ttext-align: center;\n}\n\n.image-caption {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\ttext-align: center;\n\tmargin-top: 10rpx;\n\tdisplay: block;\n}\n\n.news-images {\n\tmargin-top: 30rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.news-image {\n\twidth: 100%;\n\tborder-radius: 12rpx;\n}\n\n.loading, .empty {\n\ttext-align: center;\n\tpadding: 100rpx 0;\n\tcolor: #999;\n\tfont-size: 28rpx;\n}\n\n.edit-btn-container {\n\tposition: fixed;\n\tbottom: 40rpx;\n\tright: 40rpx;\n\tz-index: 100;\n\tdisplay: flex;\n\tgap: 20rpx;\n}\n\n.edit-btn, .delete-btn, .pin-btn {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tborder-radius: 50%;\n\tborder: none;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tbox-shadow: 0 8rpx 30rpx rgba(0,0,0,0.3);\n}\n\n.edit-btn {\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(102, 126, 234, 0.4);\n}\n\n.delete-btn {\n\tbackground: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(255, 107, 107, 0.4);\n}\n\n.pin-btn {\n\tbackground: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(255, 167, 38, 0.4);\n}\n\n.pin-btn.pinned {\n\tbackground: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);\n\tbox-shadow: 0 8rpx 30rpx rgba(76, 175, 80, 0.4);\n}\n\n.edit-icon, .delete-icon, .pin-icon {\n\tfont-size: 28rpx;\n\tmargin-bottom: 4rpx;\n}\n\n.edit-text, .delete-text, .pin-text {\n\tfont-size: 22rpx;\n\tcolor: #fff;\n}\n</style>\n","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=style&index=0&id=69e22b1e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./news-detail.vue?vue&type=style&index=0&id=69e22b1e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1759881831358\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}