{"version":3,"sources":["uni-app:///main.js","webpack:///D:/代码/小程序/新欣火1/pages/student-detail/student-detail.vue?06f1","webpack:///D:/代码/小程序/新欣火1/pages/student-detail/student-detail.vue?593e","webpack:///D:/代码/小程序/新欣火1/pages/student-detail/student-detail.vue?a684","webpack:///D:/代码/小程序/新欣火1/pages/student-detail/student-detail.vue?2be7","uni-app:///pages/student-detail/student-detail.vue","webpack:///D:/代码/小程序/新欣火1/pages/student-detail/student-detail.vue?bc02","webpack:///D:/代码/小程序/新欣火1/pages/student-detail/student-detail.vue?2987"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","studentData","originalStudentData","gradeIndex","gradeOptions","allSubjects","showSubjectModalFlag","tempSubjects","availableClasses","showClassModalFlag","classSearchKeyword","filteredClasses","tempClasses","activeTab","courses","scores","showScoreEditModal","editScoreData","id","subject","subjectIndex","examType","examTypeIndex","score","examDate","remark","editScoreIndex","examTypeOptions","onLoad","methods","goBack","uni","loadStudentDetail","uniCloud","name","action","studentId","result","title","icon","setTimeout","console","loadAvailableClasses","loadAcademicRecords","academicResult","onGradeChange","showSubjectModal","closeSubjectModal","toggleSubject","removeSubject","confirmSubjects","saveStudentInfo","updateData","grade","subjects","classes","updateTime","showClassModal","closeClassModal","isClassSelected","toggleClass","removeClass","removedClass","classId","confirmClasses","originalClassIds","newClassIds","addedClasses","removedClasses","classItem","studentIds","onClassSearchInput","createNewClass","syncCoursesWithClasses","courseName","year","semester","status","enroll_date","completion_date","className","extractSubjectFromClassName","removeCourseByClass","switchTab","formatDate","getSubjectByCourseId","editScore","inputUser","closeScoreEditModal","onEditSubjectChange","onEditExamTypeChange","saveScore","exam_name","exam_date","lastModified","editTimestamp","deleteScore","content","success","res","formatDateForInput","deleteStudent","updateArchiveCache","app"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuI;AACvI;AACkE;AACL;AACqC;;;AAGlG;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAA;AAA4qB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCiWhsB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC,eACA,0CACA,qBACA,iBACA;MACAC,cACA,6BACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAC;kBACAC;kBACAlC;oBACAmC;oBACAC;kBACA;gBACA;cAAA;gBANAC;gBAQA;kBACA;kBACA;kBACA;kBACA;kBACA;;kBAEA;kBACA;;kBAEA;kBACA;gBACA;kBACAN;oBACAO;oBACAC;kBACA;kBACAC;oBACAT;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAU;gBACAV;kBACAO;kBACAC;gBACA;gBACAC;kBACAT;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAW;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAT;kBACAC;kBACAlC;oBACAmC;kBACA;gBACA;cAAA;gBALAE;gBAOA;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAI;gBACAV;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAV;kBACAC;kBACAlC;oBACAmC;oBACAC;kBACA;gBACA;cAAA;gBANAQ;gBAQA;kBACA;kBACA;;kBAEA;kBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAH;gBACAV;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAM;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACApB;kBACAO;kBACAC;gBACA;gBAAA;cAAA;gBAAA;gBAKAR;kBACAO;gBACA;gBAAA;gBAAA,OAEAL;kBACAC;kBACAlC;oBACAmC;oBACAC;oBACAgB;sBACAlB;sBACAmB;sBACAC;sBACAC;sBACAC;oBACA;kBACA;gBACA;cAAA;gBAbAnB;gBAeAN;gBAEA;kBACAA;oBACAO;oBACAC;kBACA;kBACA;kBACA;;kBAEA;kBACA;gBACA;kBACAR;oBACAO;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAR;gBACAU;gBACAV;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAkB;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAAA;gBAAA;gBAAA,OAIA7B;kBACAC;kBACAlC;oBACAmC;oBACA4B;oBACA3B;kBACA;gBACA;cAAA;gBAPAC;gBAAA,MASAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;;gBAEA;gBACA;gBAEAN;kBACAO;kBACAC;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAE;gBACAV;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAyB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEA;gBACAC;kBAAA;gBAAA;gBACAC;kBAAA;gBAAA;gBAEAC;kBAAA;gBAAA;gBACAC;kBAAA;gBAAA,IAEA;gBAAA,uCACAD;gBAAA;gBAAA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAAE;gBAAA;gBAAA,OACApC;kBACAC;kBACAlC;oBACAmC;oBACA4B;oBACAO;kBACA;gBACA;cAAA;gBAPAjC;gBAAA,MASAA;kBAAA;kBAAA;gBAAA;gBAAA,MACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAIA;gBAAA,wCACA+B;gBAAA;gBAAA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAAC;gBAAA;gBAAA,OACApC;kBACAC;kBACAlC;oBACAmC;oBACA4B;oBACA3B;kBACA;gBACA;cAAA;gBAPAC;gBAAA,MASAA;kBAAA;kBAAA;gBAAA;gBAAA,MACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;gBAIA;gBACA;gBACA;;gBAEA;gBACA;gBAEAN;kBACAO;kBACAC;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAE;gBACAV;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAgC;MACA;QACA;QACA;MACA;MAEA;MACA;QACA,OACAF,8EACAA;MAEA;IACA;IACAG;MACA;MACAzC;QACAO;QACAC;MACA;IACA;IACA;IACAkC;MAAA;MACA;MACA;QACA;QACA;QAEA;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QAAA;QACA;UACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QAAA,OACA;MAAA,EACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;;MAEA;MACA;QACA;QACA;UAAA;QAAA;MACA;MAEA;IACA;IACA;IACAC;MACA7C;MACA;;MAEA;MACA;MACAA;MAEA;QACAvB;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACA8D;MACA;MACA9C;MACA;IACA;IACA;IACA+C;MACA;MACA;MACA;QACAtE;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IACA;IACAgE;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA5D;kBACAO;kBACAC;gBACA;gBAAA;cAAA;gBAAA;gBAKAa;kBACAjC;kBACAE;kBACAuE;kBAAA;kBACArE;kBACAC;kBACAqE;kBAAA;kBACApE;kBACA8D;kBACA;kBACAO;kBACAC;gBACA,GAEA;gBACA;kBACA3C;gBACA;gBAEAX;kBACAN;kBACAjB;kBACAlB;gBACA;gBAAA;gBAAA,OAEAiC;kBACAC;kBACAlC;oBACAmC;oBACAjB;oBACAlB;kBACA;gBACA;cAAA;gBAPAqC;gBASAI;gBAAA,MAEAJ;kBAAA;kBAAA;gBAAA;gBACA;gBACA,uEACA;kBACAqC;kBACAkB;kBACArE;kBACAsE;kBACApE;gBAAA,EACA;gBAEAM;kBACAO;kBACAC;gBACA;gBAEA;gBAAA;gBAAA;cAAA;gBAEAE;gBAAA,MACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACAV;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAyD;MAAA;MACAjE;QACAO;QACA2D;QACAC;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA,KACAC;sBAAA;sBAAA;oBAAA;oBAAA;oBAEA1D;oBAAA;oBAAA,OAEAR;sBACAC;sBACAlC;wBACAmC;wBACAjB;sBACA;oBACA;kBAAA;oBANAmB;oBAQAI;oBAAA,MAEAJ;sBAAA;sBAAA;oBAAA;oBACA;oBACA;oBAEAN;sBACAO;sBACAC;oBACA;oBAEA;oBAAA;oBAAA;kBAAA;oBAAA,MAEA;kBAAA;oBAAA;oBAAA;kBAAA;oBAAA;oBAAA;oBAGAE;oBACAV;sBACAO;sBACAC;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAGA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IACA;IACA6D;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAtE;QACAO;QACA2D;QACAC;UAAA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA,KACAC;sBAAA;sBAAA;oBAAA;oBAAA;oBAAA;oBAAA,OAEAlE;sBACAC;sBACAlC;wBACAmC;wBACAC;sBACA;oBACA;kBAAA;oBANAC;oBAAA,MAQAA;sBAAA;sBAAA;oBAAA;oBACAN;sBACAO;sBACAC;oBACA;;oBAEA;oBACAC;sBACAT;oBACA;oBAAA;oBAAA;kBAAA;oBAAA,MAEA;kBAAA;oBAAA;oBAAA;kBAAA;oBAAA;oBAAA;oBAGAU;oBACAV;sBACAO;sBACAC;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAGA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IAEA;IACA+D;MACA;QACA;QACA;UACAC;UACA9D;QACA;UACAA;QACA;MACA;QACAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACv/BA;AAAA;AAAA;AAAA;AAAi/B,CAAgB,28BAAG,EAAC,C;;;;;;;;;;;ACArgC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/student-detail/student-detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/student-detail/student-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./student-detail.vue?vue&type=template&id=e4349334&scoped=true&\"\nvar renderjs\nimport script from \"./student-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./student-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./student-detail.vue?vue&type=style&index=0&id=e4349334&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e4349334\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/student-detail/student-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./student-detail.vue?vue&type=template&id=e4349334&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.studentData ? _vm.studentData.subjects.length : null\n  var g1 = _vm.studentData ? _vm.studentData.classes.length : null\n  var g2 =\n    _vm.studentData && _vm.activeTab === \"courses\" ? _vm.courses.length : null\n  var l0 =\n    _vm.studentData && _vm.activeTab === \"courses\" && !(g2 === 0)\n      ? _vm.__map(_vm.courses, function (course, index) {\n          var $orig = _vm.__get_orig(course)\n          var m0 = _vm.formatDate(course.enroll_date)\n          var m1 = course.completion_date\n            ? _vm.formatDate(course.completion_date)\n            : null\n          return {\n            $orig: $orig,\n            m0: m0,\n            m1: m1,\n          }\n        })\n      : null\n  var g3 =\n    _vm.studentData && _vm.activeTab === \"scores\" ? _vm.scores.length : null\n  var l1 =\n    _vm.studentData && _vm.activeTab === \"scores\" && !(g3 === 0)\n      ? _vm.__map(_vm.scores, function (score, index) {\n          var $orig = _vm.__get_orig(score)\n          var m2 = _vm.formatDate(score.exam_date)\n          var m3 = _vm.getSubjectByCourseId(score.course_id)\n          return {\n            $orig: $orig,\n            m2: m2,\n            m3: m3,\n          }\n        })\n      : null\n  var l2 = _vm.showSubjectModalFlag\n    ? _vm.__map(_vm.allSubjects, function (subject, __i0__) {\n        var $orig = _vm.__get_orig(subject)\n        var g4 = _vm.tempSubjects.includes(subject)\n        var g5 = _vm.tempSubjects.includes(subject)\n        return {\n          $orig: $orig,\n          g4: g4,\n          g5: g5,\n        }\n      })\n    : null\n  var l3 = _vm.showClassModalFlag\n    ? _vm.__map(_vm.filteredClasses, function (classItem, __i1__) {\n        var $orig = _vm.__get_orig(classItem)\n        var m4 = _vm.isClassSelected(classItem)\n        var m5 = _vm.isClassSelected(classItem)\n        return {\n          $orig: $orig,\n          m4: m4,\n          m5: m5,\n        }\n      })\n    : null\n  var g6 = _vm.showClassModalFlag\n    ? _vm.classSearchKeyword && _vm.filteredClasses.length === 0\n    : null\n  var g7 = _vm.showClassModalFlag\n    ? _vm.filteredClasses.length === 0 && !_vm.classSearchKeyword\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l0: l0,\n        g3: g3,\n        l1: l1,\n        l2: l2,\n        l3: l3,\n        g6: g6,\n        g7: g7,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./student-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./student-detail.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!-- 自定义导航栏 -->\n    <view class=\"custom-navbar\">\n      <view class=\"navbar-content\">\n        <view class=\"navbar-left\" @click=\"goBack\">\n          <text class=\"back-icon\">‹</text>\n          <text class=\"back-text\">返回</text>\n        </view>\n        <text class=\"navbar-title\">学生详情</text>\n        <view class=\"navbar-right\"></view>\n      </view>\n    </view>\n    \n    <view class=\"form-container\" v-if=\"studentData\">\n      <view class=\"form-item\">\n        <text class=\"label\">学生姓名 *</text>\n        <input \n          class=\"input\" \n          v-model=\"studentData.name\" \n          placeholder=\"请输入学生姓名\"\n          maxlength=\"20\"\n        />\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">年级 *</text>\n        <picker \n          mode=\"selector\" \n          :value=\"gradeIndex\" \n          :range=\"gradeOptions\" \n          @change=\"onGradeChange\"\n        >\n          <view class=\"picker\">\n            {{ studentData.grade || '请选择年级' }}\n            <text class=\"arrow\">></text>\n          </view>\n        </picker>\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">所学科目 *</text>\n        <view class=\"subject-selector\" @click=\"showSubjectModal\">\n          <view class=\"subject-display\">\n            <text v-if=\"studentData.subjects.length === 0\" class=\"placeholder\">请选择科目</text>\n            <view v-else class=\"selected-subjects\">\n              <view \n                v-for=\"(subject, index) in studentData.subjects\" \n                :key=\"index\"\n                class=\"subject-tag\"\n              >\n                <text class=\"subject-text\">{{ subject }}</text>\n                <text class=\"remove-btn\" @click.stop=\"removeSubject(index)\">×</text>\n              </view>\n            </view>\n          </view>\n          <text class=\"arrow\">></text>\n        </view>\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">学校</text>\n        <input \n          class=\"input\" \n          v-model=\"studentData.school\" \n          placeholder=\"请输入学校名称（可选）\"\n          maxlength=\"50\"\n        />\n      </view>\n      \n      <view class=\"form-item\">\n        <text class=\"label\">加入班级</text>\n        <view class=\"class-selector\" @click=\"showClassModal\">\n          <view class=\"class-display\">\n            <text v-if=\"studentData.classes.length === 0\" class=\"placeholder\">请选择班级（可选）</text>\n            <view v-else class=\"selected-classes\">\n              <view \n                v-for=\"(classItem, index) in studentData.classes\" \n                :key=\"index\"\n                class=\"class-tag\"\n              >\n                <text class=\"class-text\">{{ classItem.className }}</text>\n                <text class=\"remove-btn\" @click.stop=\"removeClass(index)\">×</text>\n              </view>\n            </view>\n          </view>\n          <text class=\"arrow\">></text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 保存按钮 -->\n    <view class=\"save-button-container\">\n      <button class=\"save-button\" @click=\"saveStudentInfo\">保存修改</button>\n    </view>\n    \n    <!-- 学习课程和考试成绩 -->\n    <view class=\"academic-section\" v-if=\"studentData\">\n      <view class=\"tabs\">\n        <view \n          class=\"tab\" \n          :class=\"{ active: activeTab === 'courses' }\"\n          @click=\"switchTab('courses')\"\n        >\n          学习课程\n        </view>\n        <view \n          class=\"tab\" \n          :class=\"{ active: activeTab === 'scores' }\"\n          @click=\"switchTab('scores')\"\n        >\n          考试成绩\n        </view>\n      </view>\n      \n      <!-- 学习课程列表 -->\n      <view v-if=\"activeTab === 'courses'\" class=\"content\">\n        <view v-if=\"courses.length === 0\" class=\"empty-state\">\n          <text class=\"empty-text\">暂无课程记录</text>\n        </view>\n        \n        <view v-else class=\"course-list\">\n          <view \n            v-for=\"(course, index) in courses\" \n            :key=\"index\"\n            class=\"course-item\"\n          >\n            <view class=\"course-header\">\n              <text class=\"course-name\">{{ course.courseName }}</text>\n              <text class=\"course-year\">{{ course.year }} {{ course.semester }}</text>\n            </view>\n            <view class=\"course-details\">\n              <text class=\"status\">状态：{{ course.status }}</text>\n              <text class=\"enroll-date\">入学时间：{{ formatDate(course.enroll_date) }}</text>\n              <text v-if=\"course.completion_date\" class=\"completion-date\">结业时间：{{ formatDate(course.completion_date) }}</text>\n              <!-- 显示班级信息 -->\n              <text v-if=\"course.className\" class=\"class-info\">班级：{{ course.className }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 考试成绩列表 -->\n      <view v-if=\"activeTab === 'scores'\" class=\"content\">\n        <view v-if=\"scores.length === 0\" class=\"empty-state\">\n          <text class=\"empty-text\">暂无成绩记录</text>\n        </view>\n        \n        <view v-else class=\"score-list\">\n          <view \n            v-for=\"(score, index) in scores\" \n            :key=\"index\"\n            class=\"score-item\"\n            @click=\"editScore(score, index)\"\n          >\n            <view class=\"score-header\">\n              <text class=\"course-name\">{{ score.courseName }}</text>\n              <text class=\"exam-name\">{{ score.exam_name }}</text>\n            </view>\n            <view class=\"score-details\">\n              <text class=\"score-value\">成绩：{{ score.score }}分</text>\n              <text class=\"exam-date\">考试时间：{{ formatDate(score.exam_date) }}</text>\n              <text v-if=\"score.remark\" class=\"remark\">备注：{{ score.remark }}</text>\n              <!-- 显示科目信息 -->\n              <text class=\"subject-info\">科目：{{ getSubjectByCourseId(score.course_id) }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 删除学生按钮 - 右下角浮动按钮 -->\n    <view class=\"delete-button-container\">\n      <image \n        src=\"/static/删除 .png\" \n        class=\"delete-button-image\" \n        @click=\"deleteStudent\"\n        mode=\"aspectFit\"\n      />\n    </view>\n    \n    <!-- 科目选择弹窗 -->\n    <view v-if=\"showSubjectModalFlag\" class=\"subject-modal\" @click=\"closeSubjectModal\">\n      <view class=\"subject-modal-content\" @click.stop>\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">选择科目</text>\n          <view class=\"close-btn\" @click=\"closeSubjectModal\">\n            <text class=\"close-icon\">×</text>\n          </view>\n        </view>\n        \n        <view class=\"modal-body\">\n          <view class=\"subject-grid\">\n            <view \n              v-for=\"subject in allSubjects\" \n              :key=\"subject\"\n              class=\"subject-item\"\n              :class=\"{selected: tempSubjects.includes(subject)}\"\n              @click=\"toggleSubject(subject)\"\n            >\n              <text class=\"subject-name\">{{ subject }}</text>\n              <text v-if=\"tempSubjects.includes(subject)\" class=\"check-icon\">✓</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"modal-footer\">\n          <button class=\"cancel-btn\" @click=\"closeSubjectModal\">取消</button>\n          <button class=\"confirm-btn\" @click=\"confirmSubjects\">确定</button>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 班级选择弹窗 -->\n    <view v-if=\"showClassModalFlag\" class=\"class-modal\" @click=\"closeClassModal\">\n      <view class=\"class-modal-content\" @click.stop>\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">选择班级</text>\n          <view class=\"close-btn\" @click=\"closeClassModal\">\n            <text class=\"close-icon\">×</text>\n          </view>\n        </view>\n        \n        <view class=\"modal-body\">\n          <!-- 添加搜索框 -->\n          <view class=\"search-container\">\n            <input \n              class=\"search-input\" \n              v-model=\"classSearchKeyword\" \n              placeholder=\"搜索班级名称或年级\" \n              @input=\"onClassSearchInput\"\n            />\n          </view>\n          \n          <!-- 添加提示信息 -->\n          <view class=\"search-tip\" v-if=\"!classSearchKeyword\">\n            <text class=\"tip-text\">输入关键字搜索班级，或滑动查看所有班级</text>\n          </view>\n          \n          <view class=\"class-grid\">\n            <view \n              v-for=\"classItem in filteredClasses\" \n              :key=\"classItem._id\"\n              class=\"class-item\"\n              :class=\"{selected: isClassSelected(classItem)}\"\n              @click=\"toggleClass(classItem)\"\n            >\n              <view class=\"class-info\">\n                <text class=\"class-name\">{{ classItem.className }}</text>\n                <text class=\"class-grade\">{{ classItem.grade }}</text>\n                <text class=\"class-teacher\">班主任：{{ classItem.teacherName }}</text>\n              </view>\n              <text v-if=\"isClassSelected(classItem)\" class=\"check-icon\">✓</text>\n            </view>\n            \n            <!-- 当搜索结果为空且有输入关键字时，显示创建新班级选项 -->\n            <view \n              v-if=\"classSearchKeyword && filteredClasses.length === 0\" \n              class=\"create-class-item\"\n              @click=\"createNewClass\"\n            >\n              <text class=\"create-text\">创建新班级 \"{{ classSearchKeyword }}\"</text>\n            </view>\n            \n            <!-- 当没有班级时显示提示 -->\n            <view v-if=\"filteredClasses.length === 0 && !classSearchKeyword\" class=\"empty-class-tip\">\n              <text class=\"empty-text\">暂无班级信息</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"modal-footer\">\n          <button class=\"cancel-btn\" @click=\"closeClassModal\">取消</button>\n          <button class=\"confirm-btn\" @click=\"confirmClasses\">确定</button>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 成绩编辑弹窗 -->\n    <view v-if=\"showScoreEditModal\" class=\"score-edit-modal\" @click=\"closeScoreEditModal\">\n      <view class=\"score-edit-modal-content\" @click.stop>\n        <view class=\"modal-header\">\n          <text class=\"modal-title\">编辑成绩</text>\n          <view class=\"close-btn\" @click=\"closeScoreEditModal\">\n            <text class=\"close-icon\">×</text>\n          </view>\n        </view>\n        \n        <view class=\"modal-body\">\n          <view class=\"form-item\">\n            <text class=\"label\">科目</text>\n            <picker \n              :value=\"editScoreData.subjectIndex\" \n              :range=\"allSubjects\" \n              @change=\"onEditSubjectChange\"\n              class=\"picker\"\n            >\n              <view class=\"picker-text\">{{ allSubjects[editScoreData.subjectIndex] || '请选择科目' }}</view>\n            </picker>\n          </view>\n          \n          <view class=\"form-item\">\n            <text class=\"label\">考试类型</text>\n            <picker \n              :value=\"editScoreData.examTypeIndex\" \n              :range=\"examTypeOptions\" \n              @change=\"onEditExamTypeChange\"\n              class=\"picker\"\n            >\n              <view class=\"picker-text\">{{ examTypeOptions[editScoreData.examTypeIndex] || '请选择考试类型' }}</view>\n            </picker>\n          </view>\n          \n          <view class=\"form-item\">\n            <text class=\"label\">考试成绩</text>\n            <input \n              v-model=\"editScoreData.score\" \n              class=\"input\" \n              type=\"number\" \n              placeholder=\"请输入成绩\"\n            />\n          </view>\n          \n          <view class=\"form-item\">\n            <text class=\"label\">考试日期</text>\n            <input \n              v-model=\"editScoreData.examDate\" \n              class=\"input\" \n              type=\"date\" \n              placeholder=\"请选择考试日期\"\n            />\n          </view>\n          \n          <view class=\"form-item\">\n            <text class=\"label\">备注</text>\n            <textarea \n              v-model=\"editScoreData.remark\" \n              class=\"textarea\" \n              placeholder=\"备注信息（可选）\"\n            />\n          </view>\n        </view>\n        \n        <view class=\"modal-footer\">\n          <button class=\"cancel-btn\" @click=\"closeScoreEditModal\">取消</button>\n          <button class=\"confirm-btn\" @click=\"saveScore\">保存</button>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      studentData: null,\n      originalStudentData: null,\n      gradeIndex: 0,\n      gradeOptions: [\n        '一年级', '二年级', '三年级', '四年级', '五年级', '六年级',\n        '七年级', '八年级', '九年级',\n        '高一', '高二', '高三'\n      ],\n      allSubjects: [\n        '语文', '数学', '英语', '物理', '化学'\n      ],\n      showSubjectModalFlag: false,\n      tempSubjects: [],\n      availableClasses: [],\n      showClassModalFlag: false,\n      classSearchKeyword: '',\n      filteredClasses: [],\n      tempClasses: [],\n      // 添加学术信息相关数据\n      activeTab: 'courses',\n      courses: [],\n      scores: [],\n      // 成绩编辑相关数据\n      showScoreEditModal: false,\n      editScoreData: {\n        id: '',\n        subject: '',\n        subjectIndex: -1,\n        examType: '',\n        examTypeIndex: -1,\n        score: '',\n        examDate: '',\n        remark: ''\n      },\n      editScoreIndex: -1,\n      examTypeOptions: ['期中', '期末', '月考', '中考']\n    }\n  },\n  onLoad(options) {\n    if (options.studentId) {\n      this.loadStudentDetail(options.studentId);\n    }\n  },\n  methods: {\n    goBack() {\n      uni.navigateBack();\n    },\n    async loadStudentDetail(studentId) {\n      try {\n        const result = await uniCloud.callFunction({\n          name: 'archive-manager',\n          data: {\n            action: 'getStudentDetail',\n            studentId: studentId\n          }\n        });\n        \n        if (result.result.code === 0) {\n          this.studentData = result.result.data;\n          this.originalStudentData = JSON.parse(JSON.stringify(result.result.data));\n          this.gradeIndex = this.gradeOptions.indexOf(this.studentData.grade);\n          this.tempSubjects = [...this.studentData.subjects];\n          this.tempClasses = [...this.studentData.classes];\n          \n          // 加载班级列表\n          this.loadAvailableClasses();\n          \n          // 加载学术信息\n          this.loadAcademicRecords(studentId);\n        } else {\n          uni.showToast({\n            title: '加载学生信息失败',\n            icon: 'error'\n          });\n          setTimeout(() => {\n            uni.navigateBack();\n          }, 1500);\n        }\n      } catch (error) {\n        console.error('加载学生详情失败:', error);\n        uni.showToast({\n          title: '加载学生信息失败',\n          icon: 'error'\n        });\n        setTimeout(() => {\n          uni.navigateBack();\n        }, 1500);\n      }\n    },\n    async loadAvailableClasses() {\n      try {\n        const result = await uniCloud.callFunction({\n          name: 'archive-manager',\n          data: {\n            action: 'getClasses'\n          }\n        });\n        \n        if (result.result.code === 0) {\n          this.availableClasses = result.result.data || [];\n          this.filteredClasses = this.availableClasses;\n        }\n      } catch (error) {\n        console.error('加载班级列表失败:', error);\n        uni.showToast({\n          title: '加载班级失败',\n          icon: 'error'\n        });\n      }\n    },\n    // 添加加载学术记录的方法\n    async loadAcademicRecords(studentId) {\n      try {\n        // 获取学生学术档案\n        const academicResult = await uniCloud.callFunction({\n          name: 'archive-manager',\n          data: {\n            action: 'getStudentAcademicRecords',\n            studentId: studentId\n          }\n        });\n        \n        if (academicResult.result.code === 0) {\n          this.courses = academicResult.result.data.courses || [];\n          this.scores = academicResult.result.data.scores || [];\n          \n          // 如果课程数据为空，根据班级数据生成课程\n          if (this.courses.length === 0 && this.studentData.classes.length > 0) {\n            this.syncCoursesWithClasses();\n          }\n        }\n      } catch (error) {\n        console.error('加载学生学术档案失败:', error);\n        uni.showToast({\n          title: '加载学术档案失败',\n          icon: 'error'\n        });\n      }\n    },\n    onGradeChange(e) {\n      this.gradeIndex = e.detail.value;\n      this.studentData.grade = this.gradeOptions[e.detail.value];\n    },\n    showSubjectModal() {\n      this.tempSubjects = [...this.studentData.subjects];\n      this.showSubjectModalFlag = true;\n    },\n    closeSubjectModal() {\n      this.showSubjectModalFlag = false;\n    },\n    toggleSubject(subject) {\n      const index = this.tempSubjects.indexOf(subject);\n      if (index > -1) {\n        this.tempSubjects.splice(index, 1);\n      } else {\n        this.tempSubjects.push(subject);\n      }\n    },\n    removeSubject(index) {\n      this.studentData.subjects.splice(index, 1);\n    },\n    confirmSubjects() {\n      this.studentData.subjects = [...this.tempSubjects];\n      this.showSubjectModalFlag = false;\n    },\n    // 保存学生信息\n    async saveStudentInfo() {\n      if (!this.studentData.name || !this.studentData.grade) {\n        uni.showToast({\n          title: '请填写完整信息',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      try {\n        uni.showLoading({\n          title: '保存中...'\n        });\n        \n        const result = await uniCloud.callFunction({\n          name: 'student-manager',\n          data: {\n            action: 'updateStudent',\n            studentId: this.studentData.studentId,\n            updateData: {\n              name: this.studentData.name,\n              grade: this.studentData.grade,\n              subjects: this.studentData.subjects,\n              classes: this.studentData.classes,\n              updateTime: new Date().toISOString()\n            }\n          }\n        });\n        \n        uni.hideLoading();\n        \n        if (result.result.code === 0) {\n          uni.showToast({\n            title: '保存成功',\n            icon: 'success'\n          });\n          // 重新加载学生数据\n          this.loadStudentDetail();\n          \n          // 更新档案管理页面的本地缓存\n          this.updateArchiveCache();\n        } else {\n          uni.showToast({\n            title: result.result.message || '保存失败',\n            icon: 'error'\n          });\n        }\n      } catch (error) {\n        uni.hideLoading();\n        console.error('保存学生信息失败:', error);\n        uni.showToast({\n          title: '保存失败，请重试',\n          icon: 'error'\n        });\n      }\n    },\n    showClassModal() {\n      this.tempClasses = [...this.studentData.classes];\n      this.showClassModalFlag = true;\n      this.filteredClasses = this.availableClasses;\n      this.classSearchKeyword = '';\n    },\n    closeClassModal() {\n      this.showClassModalFlag = false;\n    },\n    isClassSelected(classItem) {\n      return this.tempClasses.some(c => c._id === classItem._id);\n    },\n    toggleClass(classItem) {\n      const index = this.tempClasses.findIndex(c => c._id === classItem._id);\n      if (index > -1) {\n        this.tempClasses.splice(index, 1);\n      } else {\n        this.tempClasses.push(classItem);\n      }\n    },\n    async removeClass(index) {\n      const removedClass = this.studentData.classes[index];\n      \n      try {\n        // 调用云函数从数据库中删除学生班级关联\n        const result = await uniCloud.callFunction({\n          name: 'class-management',\n          data: {\n            action: 'removeStudentFromClass',\n            classId: removedClass._id,\n            studentId: this.studentData.studentId  // 使用学号字段\n          }\n        });\n        \n        if (result.result.code === 0) {\n          // 删除成功，更新本地数据\n          this.studentData.classes.splice(index, 1);\n          \n          // 同步删除对应的学习课程\n          this.removeCourseByClass(removedClass);\n          \n          uni.showToast({\n            title: '删除班级成功',\n            icon: 'success'\n          });\n        } else {\n          throw new Error(result.result.message || '删除班级失败');\n        }\n      } catch (error) {\n        console.error('删除班级失败:', error);\n        uni.showToast({\n          title: '删除班级失败，请重试',\n          icon: 'error'\n        });\n      }\n    },\n    async confirmClasses() {\n      try {\n        // 找出新增的班级和删除的班级\n        const originalClassIds = this.studentData.classes.map(c => c._id);\n        const newClassIds = this.tempClasses.map(c => c._id);\n        \n        const addedClasses = this.tempClasses.filter(c => !originalClassIds.includes(c._id));\n        const removedClasses = this.studentData.classes.filter(c => !newClassIds.includes(c._id));\n        \n        // 添加新班级\n        for (const classItem of addedClasses) {\n          const result = await uniCloud.callFunction({\n            name: 'class-management',\n            data: {\n              action: 'addStudentsToClass',\n              classId: classItem._id,\n              studentIds: [this.studentData.studentId]  // 这里使用studentId，因为addStudentsToClass期望的是学号\n            }\n          });\n          \n          if (result.result.code !== 0) {\n            throw new Error(result.result.message || '添加班级失败');\n          }\n        }\n        \n        // 删除班级\n        for (const classItem of removedClasses) {\n          const result = await uniCloud.callFunction({\n            name: 'class-management',\n            data: {\n              action: 'removeStudentFromClass',\n              classId: classItem._id,\n              studentId: this.studentData.studentId  // 使用学号字段\n            }\n          });\n          \n          if (result.result.code !== 0) {\n            throw new Error(result.result.message || '删除班级失败');\n          }\n        }\n        \n        // 更新本地数据\n        this.studentData.classes = [...this.tempClasses];\n        this.showClassModalFlag = false;\n        \n        // 同步更新学习课程数据\n        this.syncCoursesWithClasses();\n        \n        uni.showToast({\n          title: '班级更新成功',\n          icon: 'success'\n        });\n        \n      } catch (error) {\n        console.error('更新班级失败:', error);\n        uni.showToast({\n          title: '更新班级失败，请重试',\n          icon: 'error'\n        });\n      }\n    },\n    onClassSearchInput() {\n      if (!this.classSearchKeyword) {\n        this.filteredClasses = this.availableClasses;\n        return;\n      }\n      \n      const keyword = this.classSearchKeyword.toLowerCase();\n      this.filteredClasses = this.availableClasses.filter(classItem => {\n        return (\n          (classItem.className && classItem.className.toLowerCase().includes(keyword)) ||\n          (classItem.grade && classItem.grade.toLowerCase().includes(keyword))\n        );\n      });\n    },\n    createNewClass() {\n      // 这里可以跳转到班级创建页面或者显示创建弹窗\n      uni.showToast({\n        title: '请到班级管理页面创建新班级',\n        icon: 'none'\n      });\n    },\n    // 同步学习课程与班级数据\n    syncCoursesWithClasses() {\n      // 根据当前班级数据重新生成学习课程\n      this.courses = this.studentData.classes.map(classItem => {\n        // 从班级名称中提取科目信息\n        const subject = this.extractSubjectFromClassName(classItem.className);\n        \n        return {\n          courseName: subject,\n          year: new Date().getFullYear(),\n          semester: '秋季',\n          status: '在学',\n          enroll_date: new Date().toISOString(),\n          completion_date: null,\n          className: classItem.className\n        };\n      });\n    },\n    // 从班级名称中提取科目\n    extractSubjectFromClassName(className) {\n      // 根据班级名称提取科目，例如：\"25秋三年级数学龙班\" -> \"数学\"\n      const subjects = ['语文', '数学', '英语', '物理', '化学'];\n      for (const subject of subjects) {\n        if (className.includes(subject)) {\n          return subject;\n        }\n      }\n      return '未知科目';\n    },\n    // 根据班级删除对应的学习课程\n    removeCourseByClass(removedClass) {\n      const subject = this.extractSubjectFromClassName(removedClass.className);\n      this.courses = this.courses.filter(course => \n        !(course.courseName === subject && course.className === removedClass.className)\n      );\n    },\n    // 添加切换标签页的方法\n    switchTab(tab) {\n      this.activeTab = tab;\n    },\n    // 添加格式化日期的方法\n    formatDate(date) {\n      if (!date) return '';\n      // 处理不同的日期格式\n      if (typeof date === 'string') {\n        return new Date(date).toLocaleDateString();\n      } else if (date instanceof Date) {\n        return date.toLocaleDateString();\n      } else {\n        return new Date(date).toLocaleDateString();\n      }\n    },\n    // 根据课程ID获取科目名称\n    getSubjectByCourseId(courseId) {\n      // 如果courseId就是科目名称，直接返回\n      if (this.allSubjects.includes(courseId)) {\n        return courseId;\n      }\n      \n      // 如果有学生科目信息，尝试匹配\n      if (this.studentData && this.studentData.subjects) {\n        // 简单匹配，实际项目中可能需要更复杂的逻辑\n        return this.studentData.subjects.find(subject => subject === courseId) || '未知科目';\n      }\n      \n      return '未知科目';\n    },\n    // 编辑成绩\n    editScore(score, index) {\n      console.log('编辑成绩 - 原始数据:', score);\n      this.editScoreIndex = index;\n      \n      // 尝试多种可能的ID字段\n      const scoreId = score._id || score.id || score.examScoreId;\n      console.log('成绩ID:', scoreId);\n      \n      this.editScoreData = {\n        id: scoreId,\n        subject: this.getSubjectByCourseId(score.course_id),\n        subjectIndex: this.allSubjects.indexOf(this.getSubjectByCourseId(score.course_id)),\n        examType: score.exam_name || score.examType,\n        examTypeIndex: this.examTypeOptions.indexOf(score.exam_name || score.examType),\n        score: score.score.toString(),\n        examDate: this.formatDateForInput(score.exam_date),\n        remark: score.remark || '',\n        inputUser: score.inputUser || '系统用户'\n      };\n      console.log('编辑成绩 - 处理后的数据:', this.editScoreData);\n      this.showScoreEditModal = true;\n    },\n    // 关闭成绩编辑弹窗\n    closeScoreEditModal() {\n      this.showScoreEditModal = false;\n      this.editScoreIndex = -1;\n      this.editScoreData = {\n        id: '',\n        subject: '',\n        subjectIndex: -1,\n        examType: '',\n        examTypeIndex: -1,\n        score: '',\n        examDate: '',\n        remark: ''\n      };\n    },\n    // 编辑科目变化\n    onEditSubjectChange(e) {\n      this.editScoreData.subjectIndex = e.detail.value;\n      this.editScoreData.subject = this.allSubjects[e.detail.value];\n    },\n    // 编辑考试类型变化\n    onEditExamTypeChange(e) {\n      this.editScoreData.examTypeIndex = e.detail.value;\n      this.editScoreData.examType = this.examTypeOptions[e.detail.value];\n    },\n    // 保存成绩修改\n    async saveScore() {\n      if (!this.editScoreData.subject || !this.editScoreData.examType || !this.editScoreData.score || !this.editScoreData.examDate) {\n        uni.showToast({\n          title: '请填写完整信息',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      try {\n        const updateData = {\n          subject: this.editScoreData.subject,\n          examType: this.editScoreData.examType,\n          exam_name: this.editScoreData.examType, // 兼容exam_name字段\n          score: Number(this.editScoreData.score),\n          examDate: this.editScoreData.examDate,\n          exam_date: this.editScoreData.examDate, // 兼容exam_date字段\n          remark: this.editScoreData.remark,\n          inputUser: this.editScoreData.inputUser || '系统用户',\n          // 强制添加时间戳确保有变化\n          lastModified: Date.now(),\n          editTimestamp: new Date().toISOString()\n        };\n        \n        // 确保数据类型正确\n        if (updateData.score && typeof updateData.score === 'string') {\n          updateData.score = Number(updateData.score);\n        }\n        \n        console.log('保存成绩 - 发送数据:', {\n          action: 'updateScore',\n          id: this.editScoreData.id,\n          data: updateData\n        });\n        \n        const result = await uniCloud.callFunction({\n          name: 'exam-scores',\n          data: {\n            action: 'updateScore',\n            id: this.editScoreData.id,\n            data: updateData\n          }\n        });\n        \n        console.log('保存成绩 - 云函数返回:', result);\n        \n        if (result.result.code === 200) {\n          // 更新本地数据\n          this.scores[this.editScoreIndex] = {\n            ...this.scores[this.editScoreIndex],\n            courseName: this.editScoreData.subject,\n            exam_name: this.editScoreData.examType,\n            score: Number(this.editScoreData.score),\n            exam_date: this.editScoreData.examDate,\n            remark: this.editScoreData.remark\n          };\n          \n          uni.showToast({\n            title: '修改成功',\n            icon: 'success'\n          });\n          \n          this.closeScoreEditModal();\n        } else {\n          console.error('云函数返回错误:', result.result);\n          throw new Error(result.result.message || '修改失败');\n        }\n      } catch (error) {\n        console.error('修改成绩失败:', error);\n        uni.showToast({\n          title: '修改失败，请重试',\n          icon: 'error'\n        });\n      }\n    },\n    // 删除成绩\n    deleteScore() {\n      uni.showModal({\n        title: '确认删除',\n        content: '确定要删除这条成绩记录吗？',\n        success: async (res) => {\n          if (res.confirm) {\n            try {\n              console.log('删除成绩 - ID:', this.editScoreData.id);\n              \n              const result = await uniCloud.callFunction({\n                name: 'exam-scores',\n                data: {\n                  action: 'deleteScore',\n                  id: this.editScoreData.id\n                }\n              });\n              \n              console.log('删除成绩 - 云函数返回:', result);\n              \n              if (result.result.code === 200) {\n                // 从本地数据中删除\n                this.scores.splice(this.editScoreIndex, 1);\n                \n                uni.showToast({\n                  title: '删除成功',\n                  icon: 'success'\n                });\n                \n                this.closeScoreEditModal();\n              } else {\n                throw new Error(result.result.message || '删除失败');\n              }\n            } catch (error) {\n              console.error('删除成绩失败:', error);\n              uni.showToast({\n                title: '删除失败，请重试',\n                icon: 'error'\n              });\n            }\n          }\n        }\n      });\n    },\n    // 格式化日期为输入框格式\n    formatDateForInput(date) {\n      if (!date) return '';\n      const d = new Date(date);\n      const year = d.getFullYear();\n      const month = String(d.getMonth() + 1).padStart(2, '0');\n      const day = String(d.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    deleteStudent() {\n      uni.showModal({\n        title: '确认删除',\n        content: `确定要删除学生 ${this.studentData.name} 吗？`,\n        success: async (res) => {\n          if (res.confirm) {\n            try {\n              const result = await uniCloud.callFunction({\n                name: 'archive-manager',\n                data: {\n                  action: 'deleteStudent',\n                  studentId: this.studentData.studentId\n                }\n              });\n              \n              if (result.result.code === 0) {\n                uni.showToast({\n                  title: '删除成功',\n                  icon: 'success'\n                });\n                \n                // 返回档案管理页面并刷新\n                setTimeout(() => {\n                  uni.navigateBack();\n                }, 1500);\n              } else {\n                throw new Error(result.result.message || '删除失败');\n              }\n            } catch (error) {\n              console.error('删除学生失败:', error);\n              uni.showToast({\n                title: '删除失败，请重试',\n                icon: 'error'\n              });\n            }\n          }\n        }\n      });\n    },\n    \n    // 更新档案管理页面的本地缓存\n    updateArchiveCache() {\n      try {\n        const app = getApp();\n        if (app.globalData && app.globalData.updateArchiveCache) {\n          app.globalData.updateArchiveCache();\n          console.log('已通知档案管理页面更新缓存');\n        } else {\n          console.log('档案管理页面未加载，无法更新缓存');\n        }\n      } catch (error) {\n        console.error('更新档案管理缓存失败:', error);\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  padding: 20rpx;\n  background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);\n  min-height: 100vh;\n  padding-top: 120rpx; /* 为自定义导航栏留出空间 */\n}\n\n/* 自定义导航栏样式 */\n.custom-navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 999;\n  background: rgba(255, 255, 255, 0.95);\n  border-bottom: 1rpx solid #e5e5e5;\n  backdrop-filter: blur(10rpx);\n  box-shadow: 0 2rpx 20rpx rgba(0, 0, 0, 0.05);\n}\n\n.navbar-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 88rpx;\n  padding: 0 30rpx;\n  padding-top: var(--status-bar-height, 0);\n}\n\n.navbar-left {\n  display: flex;\n  align-items: center;\n  padding: 10rpx 0;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.navbar-left:active {\n  transform: translateX(-5rpx);\n}\n\n.back-icon {\n  font-size: 40rpx;\n  color: #1976D2;\n  margin-right: 8rpx;\n  font-weight: bold;\n}\n\n.back-text {\n  font-size: 28rpx;\n  color: #1976D2;\n  font-weight: 500;\n}\n\n.navbar-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #1976D2;\n  background: linear-gradient(135deg, #1976D2 0%, #4FC3F7 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.navbar-right {\n  width: 100rpx;\n}\n\n.form-container {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(25, 118, 210, 0.1);\n  transition: all 0.3s ease;\n}\n\n.form-container:hover {\n  box-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.12);\n  transform: translateY(-2rpx);\n}\n\n.form-item {\n  margin-bottom: 30rpx;\n}\n\n.form-item:last-child {\n  margin-bottom: 0;\n}\n\n.label {\n  font-size: 28rpx;\n  color: #1976D2;\n  font-weight: 500;\n  display: block;\n  margin-bottom: 15rpx;\n}\n\n.input {\n  width: 100%;\n  height: 80rpx;\n  border: 2rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  box-sizing: border-box;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.input:focus {\n  border-color: #4FC3F7;\n  box-shadow: 0 0 0 2rpx rgba(79, 195, 247, 0.2);\n}\n\n.picker,\n.date-picker {\n  width: 100%;\n  height: 80rpx;\n  border: 2rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.picker:active,\n.date-picker:active {\n  background: rgba(230, 240, 255, 0.9);\n}\n\n.arrow {\n  color: #1976D2;\n  font-size: 28rpx;\n  font-weight: bold;\n}\n\n.subject-selector,\n.class-selector {\n  width: 100%;\n  min-height: 80rpx;\n  border: 2rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  padding: 10rpx 20rpx;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.subject-selector:active,\n.class-selector:active {\n  background: rgba(230, 240, 255, 0.9);\n}\n\n.subject-display,\n.class-display {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  min-height: 60rpx;\n}\n\n.placeholder {\n  color: #999;\n  font-size: 28rpx;\n  font-style: italic;\n}\n\n.selected-subjects,\n.selected-classes {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10rpx;\n}\n\n.subject-tag,\n.class-tag {\n  background: linear-gradient(135deg, #4FC3F7 0%, #1976D2 100%);\n  border-radius: 20rpx;\n  padding: 6rpx 12rpx;\n  display: flex;\n  align-items: center;\n  font-size: 24rpx;\n  color: #fff;\n  box-shadow: 0 2rpx 8rpx rgba(79, 195, 247, 0.3);\n  transition: all 0.3s ease;\n}\n\n.subject-tag:active,\n.class-tag:active {\n  transform: scale(0.95);\n}\n\n.subject-text,\n.class-text {\n  color: #fff;\n  margin-right: 6rpx;\n  font-weight: 500;\n}\n\n.remove-btn {\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: bold;\n  cursor: pointer;\n  padding: 2rpx;\n  border-radius: 50%;\n  width: 20rpx;\n  height: 20rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.2);\n  transition: all 0.3s ease;\n}\n\n.remove-btn:active {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n.score-toggle {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: rgba(248, 250, 255, 0.7);\n  border-radius: 12rpx;\n  padding: 20rpx;\n  border: 1rpx solid rgba(25, 118, 210, 0.05);\n}\n\n.score-section {\n  background: linear-gradient(135deg, #f0f8ff 0%, #e3f2fd 100%);\n  border-radius: 12rpx;\n  padding: 20rpx;\n  margin-top: 20rpx;\n  border: 1rpx solid rgba(79, 195, 247, 0.2);\n  box-shadow: 0 4rpx 12rpx rgba(79, 195, 247, 0.1);\n}\n\n.score-section:hover {\n  box-shadow: 0 6rpx 20rpx rgba(79, 195, 247, 0.15);\n}\n\n.score-instructions {\n  font-size: 26rpx;\n  color: #1976D2;\n  margin-bottom: 20rpx;\n  text-align: center;\n  font-weight: 500;\n}\n\n.score-item {\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 12rpx;\n  padding: 20rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n  border: 1rpx solid rgba(25, 118, 210, 0.1);\n  transition: all 0.3s ease;\n}\n\n.score-item:hover {\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n  transform: translateY(-2rpx);\n}\n\n.score-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n  padding-bottom: 10rpx;\n  border-bottom: 1rpx solid rgba(25, 118, 210, 0.1);\n}\n\n.subject-label {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #1976D2;\n}\n\n.remove-score {\n  font-size: 36rpx;\n  color: #ff6b6b;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  padding: 5rpx;\n  border-radius: 50%;\n  width: 40rpx;\n  height: 40rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.remove-score:active {\n  background: rgba(255, 107, 107, 0.1);\n  transform: scale(0.9);\n}\n\n.score-details {\n  display: flex;\n  flex-direction: column;\n  gap: 15rpx;\n}\n\n.form-item-inline {\n  display: flex;\n  align-items: center;\n}\n\n.inline-label {\n  width: 120rpx;\n  font-size: 26rpx;\n  color: #1976D2;\n  margin-right: 10rpx;\n  font-weight: 500;\n}\n\n.inline-input {\n  flex: 1;\n  height: 60rpx;\n  border: 1rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 8rpx;\n  padding: 0 15rpx;\n  font-size: 26rpx;\n  color: #333;\n  box-sizing: border-box;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.inline-input:focus {\n  border-color: #4FC3F7;\n  box-shadow: 0 0 0 2rpx rgba(79, 195, 247, 0.2);\n}\n\n.score-input {\n  text-align: center;\n  font-weight: bold;\n  color: #4FC3F7;\n}\n\n.add-score-btn {\n  text-align: center;\n  padding: 20rpx;\n  border: 2rpx dashed #4FC3F7;\n  border-radius: 12rpx;\n  margin-top: 10rpx;\n  cursor: pointer;\n  background: linear-gradient(135deg, #f0f8ff 0%, #e3f2fd 100%);\n  transition: all 0.3s ease;\n}\n\n.add-score-btn:active {\n  transform: translateY(-2rpx);\n  box-shadow: 0 4rpx 10rpx rgba(79, 195, 247, 0.2);\n}\n\n.add-score-text {\n  color: #4FC3F7;\n  font-size: 28rpx;\n  font-weight: 500;\n}\n\n.preview-section {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(25, 118, 210, 0.1);\n  transition: all 0.3s ease;\n}\n\n.preview-section:hover {\n  box-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.12);\n  transform: translateY(-2rpx);\n}\n\n.preview-title {\n  font-size: 28rpx;\n  color: #1976D2;\n  font-weight: 500;\n  display: block;\n  margin-bottom: 15rpx;\n  background: linear-gradient(135deg, #1976D2 0%, #4FC3F7 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.student-preview {\n  display: flex;\n  justify-content: center;\n}\n\n.student-card {\n  width: 100%;\n  max-width: 400rpx;\n  background: linear-gradient(135deg, #4FC3F7 0%, #1976D2 100%);\n  border-radius: 16rpx;\n  padding: 30rpx;\n  box-shadow: 0 6rpx 20rpx rgba(79, 195, 247, 0.3);\n}\n\n.student-info {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.student-name {\n  font-size: 32rpx;\n  color: #fff;\n  font-weight: bold;\n  margin-bottom: 10rpx;\n}\n\n.student-id,\n.student-grade,\n.student-subjects,\n.student-school,\n.student-classes {\n  font-size: 24rpx;\n  color: rgba(255, 255, 255, 0.9);\n  margin-bottom: 5rpx;\n  text-align: center;\n}\n\n.preview-placeholder {\n  text-align: center;\n  padding: 30rpx;\n  color: #999;\n  font-size: 28rpx;\n}\n\n/* 删除按钮容器 - 右下角固定定位 */\n.delete-button-container {\n  position: fixed;\n  bottom: 30rpx;\n  right: 30rpx;\n  z-index: 999;\n}\n\n.delete-button-image {\n  width: 80rpx;\n  height: 80rpx;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  filter: drop-shadow(0 4rpx 12rpx rgba(0, 0, 0, 0.2));\n}\n\n.delete-button-image:active {\n  transform: scale(0.9);\n  filter: drop-shadow(0 2rpx 8rpx rgba(0, 0, 0, 0.3));\n}\n\n/* 学术信息区域 */\n.academic-section {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(25, 118, 210, 0.1);\n}\n\n.tabs {\n  display: flex;\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16rpx;\n  overflow: hidden;\n  margin-bottom: 20rpx;\n  box-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(25, 118, 210, 0.1);\n}\n\n.tab {\n  flex: 1;\n  text-align: center;\n  padding: 25rpx 0;\n  font-size: 28rpx;\n  color: #1976D2;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.tab:active {\n  background: rgba(230, 240, 255, 0.9);\n}\n\n.tab.active {\n  background: linear-gradient(135deg, #1976D2 0%, #4FC3F7 100%);\n  color: #fff;\n  font-weight: bold;\n  box-shadow: 0 4rpx 12rpx rgba(25, 118, 210, 0.2);\n}\n\n/* 课程列表 */\n.course-list,\n.score-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.course-item,\n.score-item {\n  padding: 20rpx;\n  border: 1rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.course-item:hover,\n.score-item:hover {\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n  transform: translateY(-2rpx);\n}\n\n.score-item {\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.score-item:active {\n  transform: scale(0.98);\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\n}\n\n.course-header,\n.score-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15rpx;\n  padding-bottom: 10rpx;\n  border-bottom: 1rpx solid rgba(25, 118, 210, 0.1);\n}\n\n.course-name,\n.exam-name {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #1976D2;\n}\n\n.course-year {\n  font-size: 24rpx;\n  color: #4FC3F7;\n  background: linear-gradient(135deg, #f0f8ff 0%, #e3f2fd 100%);\n  padding: 4rpx 12rpx;\n  border-radius: 20rpx;\n  font-weight: 500;\n}\n\n.course-details,\n.score-details {\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n\n.status,\n.enroll-date,\n.completion-date,\n.score-value,\n.exam-date,\n.remark,\n.class-info,\n.subject-info {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.score-value {\n  font-weight: bold;\n  color: #4FC3F7;\n}\n\n.class-info {\n  color: #9C27B0;\n  font-weight: 500;\n}\n\n.subject-info {\n  color: #1976D2;\n  font-weight: 500;\n}\n\n/* 空状态 */\n.empty-state {\n  text-align: center;\n  padding: 60rpx 0;\n}\n\n.empty-text {\n  font-size: 28rpx;\n  color: #999;\n}\n\n/* 科目选择弹窗 */\n.subject-modal,\n.class-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(5rpx);\n}\n\n.subject-modal-content,\n.class-modal-content {\n  width: 90%;\n  max-width: 600rpx;\n  max-height: 80%;\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16rpx;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20rpx 50rpx rgba(0, 0, 0, 0.2);\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\n  animation: modalAppear 0.3s ease-out;\n}\n\n@keyframes modalAppear {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 30rpx;\n  border-bottom: 1rpx solid rgba(0, 0, 0, 0.05);\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n}\n\n.modal-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #1976D2;\n}\n\n.close-btn {\n  padding: 10rpx;\n  cursor: pointer;\n  width: 60rpx;\n  height: 60rpx;\n  border-radius: 50%;\n  background: rgba(240, 240, 240, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.close-btn:active {\n  background: rgba(200, 200, 200, 0.8);\n  transform: rotate(90deg);\n}\n\n.close-icon {\n  font-size: 36rpx;\n  color: #999;\n}\n\n.modal-body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20rpx 30rpx;\n}\n\n.subject-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20rpx;\n}\n\n.subject-item {\n  height: 80rpx;\n  border: 2rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  cursor: pointer;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.subject-item:active {\n  transform: translateY(-2rpx);\n}\n\n.subject-item.selected {\n  border-color: #4FC3F7;\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n  box-shadow: 0 4rpx 12rpx rgba(79, 195, 247, 0.2);\n}\n\n.subject-name {\n  font-size: 28rpx;\n  color: #1976D2;\n  font-weight: 500;\n}\n\n.check-icon {\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n  width: 36rpx;\n  height: 36rpx;\n  background: linear-gradient(135deg, #4FC3F7 0%, #1976D2 100%);\n  border-radius: 50%;\n  color: #fff;\n  font-size: 24rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2rpx 6rpx rgba(79, 195, 247, 0.3);\n}\n\n.modal-footer {\n  display: flex;\n  padding: 20rpx 30rpx;\n  border-top: 1rpx solid rgba(0, 0, 0, 0.05);\n  gap: 20rpx;\n}\n\n.cancel-btn,\n.confirm-btn {\n  flex: 1;\n  height: 70rpx;\n  border-radius: 12rpx;\n  font-size: 28rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\n.cancel-btn {\n  background: #f8f9fa;\n  color: #333;\n  border: 1rpx solid #ddd;\n}\n\n.cancel-btn:active {\n  background: #e9ecef;\n  transform: translateY(2rpx);\n}\n\n.confirm-btn {\n  background: linear-gradient(135deg, #1976D2 0%, #4FC3F7 100%);\n  color: #fff;\n  border: none;\n  box-shadow: 0 4rpx 15rpx rgba(25, 118, 210, 0.3);\n}\n\n.confirm-btn:active {\n  transform: translateY(2rpx);\n  box-shadow: 0 2rpx 10rpx rgba(25, 118, 210, 0.4);\n}\n\n/* 保存按钮样式 */\n.save-button-container {\n  padding: 30rpx 40rpx;\n  background: #fff;\n  border-top: 1rpx solid #f0f0f0;\n}\n\n.save-button {\n  width: 100%;\n  height: 80rpx;\n  background: linear-gradient(135deg, #4FC3F7 0%, #29B6F6 100%);\n  color: #fff;\n  border: none;\n  border-radius: 12rpx;\n  font-size: 32rpx;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4rpx 15rpx rgba(79, 195, 247, 0.3);\n  transition: all 0.3s ease;\n}\n\n.save-button:active {\n  transform: translateY(2rpx);\n  box-shadow: 0 2rpx 8rpx rgba(79, 195, 247, 0.3);\n}\n\n/* 班级选择弹窗特定样式 */\n.search-container {\n  margin-bottom: 20rpx;\n}\n\n.search-input {\n  width: 100%;\n  height: 70rpx;\n  border: 2rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  box-sizing: border-box;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.search-input:focus {\n  border-color: #4FC3F7;\n  box-shadow: 0 0 0 2rpx rgba(79, 195, 247, 0.2);\n}\n\n.search-tip {\n  text-align: center;\n  margin-bottom: 20rpx;\n}\n\n.tip-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.class-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 15rpx;\n}\n\n.class-item {\n  padding: 20rpx;\n  border: 2rpx solid rgba(156, 39, 176, 0.2);\n  border-radius: 12rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n}\n\n.class-item:active {\n  transform: translateY(-2rpx);\n}\n\n.class-item.selected {\n  border-color: #9C27B0;\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n  box-shadow: 0 4rpx 12rpx rgba(156, 39, 176, 0.2);\n}\n\n.class-info {\n  display: flex;\n  flex-direction: column;\n  gap: 5rpx;\n}\n\n.class-name {\n  font-size: 28rpx;\n  color: #9C27B0;\n  font-weight: bold;\n}\n\n.class-grade,\n.class-teacher {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.create-class-item {\n  padding: 20rpx;\n  border: 2rpx dashed #9C27B0;\n  border-radius: 12rpx;\n  text-align: center;\n  cursor: pointer;\n  background: linear-gradient(135deg, #f8f0fa 0%, #f3e5f5 100%);\n  transition: all 0.3s ease;\n}\n\n.create-class-item:active {\n  transform: translateY(-2rpx);\n  box-shadow: 0 4rpx 10rpx rgba(156, 39, 176, 0.2);\n}\n\n.create-text {\n  font-size: 28rpx;\n  color: #9C27B0;\n  font-weight: 500;\n}\n\n.empty-class-tip {\n  text-align: center;\n  padding: 40rpx 0;\n}\n\n.empty-text {\n  font-size: 28rpx;\n  color: #999;\n}\n\n\n/* 成绩编辑弹窗样式 */\n.score-edit-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(5rpx);\n}\n\n.score-edit-modal-content {\n  width: 90%;\n  max-width: 600rpx;\n  max-height: 80%;\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16rpx;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20rpx 50rpx rgba(0, 0, 0, 0.2);\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(255, 255, 255, 0.2);\n  animation: modalAppear 0.3s ease-out;\n}\n\n.picker-text {\n  color: #333;\n  font-size: 28rpx;\n}\n\n.textarea {\n  width: 100%;\n  min-height: 120rpx;\n  border: 2rpx solid rgba(25, 118, 210, 0.2);\n  border-radius: 12rpx;\n  padding: 15rpx 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  box-sizing: border-box;\n  background: rgba(248, 250, 255, 0.7);\n  transition: all 0.3s ease;\n  resize: none;\n}\n\n.textarea:focus {\n  border-color: #4FC3F7;\n  box-shadow: 0 0 0 2rpx rgba(79, 195, 247, 0.2);\n}\n\n</style>","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./student-detail.vue?vue&type=style&index=0&id=e4349334&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./student-detail.vue?vue&type=style&index=0&id=e4349334&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1759362723332\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}