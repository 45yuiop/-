{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/salary-statistics/salary-statistics.vue?8c09","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/salary-statistics/salary-statistics.vue?8685","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/salary-statistics/salary-statistics.vue?9aae","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/salary-statistics/salary-statistics.vue?e335","uni-app:///pages/salary-statistics/salary-statistics.vue","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/salary-statistics/salary-statistics.vue?ce9d","webpack:///D:/ä»£ç /å°ç¨‹åº/æ–°æ¬£ç«1/pages/salary-statistics/salary-statistics.vue?de1e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","allTeacherList","teacherIndex","searchKeyword","selectedMonth","isLoading","statistics","noData","isLoadingAll","allStatistics","isSuperAdmin","isAdmin","computed","filteredTeacherList","teacher","selectedTeacher","watch","onLoad","onShow","methods","checkAdminRole","fetchTeachers","uniCloud","name","action","success","uni","title","icon","fail","onTeacherChange","onMonthChange","fetchAndCalculateStatistics","year","month","params","teacher_id","startDate","endDate","console","complete","goBack","fetchAllTeachersStatistics","username","teacherName","getCourseDuration"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,yBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACqE;AACL;AACa;;;AAG7E;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AAA+qB,CAAgB,6qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC0FnsB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;MACA;MACA;QAAA,OACAC;MAAA,EACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;EACA;EACAC;IACAb;MACA;IACA;EACA;EACAc;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UAAA;QAAA;QACA;UACA;UACA;YAAA;UAAA;QACA;MACA;IACA;IACAC;MAAA;MACAC;QACAC;QACAvB;UAAAwB;QAAA;QACAC;UACA;UACA;YACA;cACA;cACA;gBACA;cACA;gBACA;cACA;YACA;YACA;YACA;UACA;YACAC;cAAAC;cAAAC;YAAA;UACA;QACA;QACAC;UACAH;YAAAC;YAAAC;UAAA;QACA;MACA;IACA;IACAE;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACAN;UAAAC;UAAAC;QAAA;QACA;MACA;MACA;MACA;MACA;MAEA;QAAA;QAAAK;QAAAC;MACA;MACA;MAEAZ;QACAC;QACAvB;UACAwB;UACAW;YACAC;YACAC;YACAC;UACA;QACA;QACAb;UACA;UACA;YACA;YACA;YACA;cAAA;YAAA;YACA;cACA;YACA;UACA;YACA;YACA;cAAA;cAAA;cAAA;YAAA;YACAC;cAAAC;cAAAC;YAAA;UACA;QACA;QACAC;UACAU;UACAb;YAAAC;YAAAC;UAAA;UACA;UACA;YAAA;YAAA;YAAA;UAAA;QACA;QACAY;UACA;QACA;MACA;IACA;IACAC;MACAf;IACA;IACAgB;MAAA;MACA;MACA;MACA;MACA;QAAA;QAAAT;QAAAC;MACA;MACA;MAEAZ;QACAC;QACAvB;UACAwB;UACAW;YAAAE;YAAAC;UAAA;QACA;QACAb;UACA;UACAc;UACA;YACA;YACA;cACA;gBACAI;gBACAC;gBACA;gBACA;gBACA;cACA;YACA;YACA;;YAEA;YACA;cAAA,OACA9B;YAAA;YACA;cACAY;gBAAAC;gBAAAC;cAAA;YACA;UACA;YACA;YACAF;cAAAC;cAAAC;YAAA;UACA;QACA;QACAC;UACAU;UACAb;YAAAC;YAAAC;UAAA;UACA;QACA;QACAY;UACA;QACA;MACA;IACA;IACA;IACAK;MACA;MACA;QACA;UACA;QAAA;QACA;UACA;QAAA;QACA;UACA;QAAA;QACA;UACA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC7SA;AAAA;AAAA;AAAA;AAA49B,CAAgB,s7BAAG,EAAC,C;;;;;;;;;;;ACAh/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/salary-statistics/salary-statistics.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/salary-statistics/salary-statistics.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./salary-statistics.vue?vue&type=template&id=2111bcd4&\"\nvar renderjs\nimport script from \"./salary-statistics.vue?vue&type=script&lang=js&\"\nexport * from \"./salary-statistics.vue?vue&type=script&lang=js&\"\nimport style0 from \"./salary-statistics.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/salary-statistics/salary-statistics.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./salary-statistics.vue?vue&type=template&id=2111bcd4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    (_vm.isAdmin || _vm.isSuperAdmin) &&\n    _vm.allStatistics &&\n    _vm.allStatistics.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./salary-statistics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./salary-statistics.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- <view style=\"font-size:32rpx;color:#1976D2;font-weight:bold;margin:40rpx 0 30rpx 0;text-align:center;\">è¿™é‡Œæ˜¯è¯¾æ—¶ç»Ÿè®¡é¡µé¢</view> -->\r\n\t\t<!-- è¿”å›æŒ‰é’® -->\r\n\t\t<view class=\"back-btn-container\">\r\n\t\t\t<button class=\"back-btn\" @click=\"goBack\">\r\n\t\t\t\t<text class=\"back-btn-icon\">â€¹</text>\r\n\t\t\t</button>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"main-content\">\r\n\t\t\t<view class=\"page-title\">è¯¾æ—¶ç»Ÿè®¡ç®¡ç†</view>\r\n\r\n\t\t\t<!-- æ¡ä»¶é€‰æ‹©åŒºåŸŸ -->\r\n\t\t\t<view class=\"form-section\">\r\n\t\t\t\t<!-- æ•™å¸ˆé€‰æ‹© -->\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<input class=\"search-input\" v-model.trim=\"searchKeyword\" placeholder=\"ğŸ” æœç´¢æ•™å¸ˆå§“å\" />\r\n\t\t\t\t\t<picker @change=\"onTeacherChange\" :value=\"teacherIndex\" :range=\"filteredTeacherList\" range-key=\"teacherName\">\r\n\t\t\t\t\t\t<view class=\"picker-display\">\r\n\t\t\t\t\t\t\t<text>{{ selectedTeacher ? selectedTeacher.teacherName : 'è¯·é€‰æ‹©æ•™å¸ˆ' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"picker-arrow\">â–¼</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t\t<!-- ä»…ç®¡ç†å‘˜å¯åˆ‡æ¢æ•™å¸ˆï¼Œæ™®é€šæ•™å¸ˆåªèƒ½çœ‹è‡ªå·± -->\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- æœˆä»½é€‰æ‹© -->\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<picker mode=\"date\" fields=\"month\" :value=\"selectedMonth\" @change=\"onMonthChange\">\r\n\t\t\t\t\t\t<view class=\"picker-display\">\r\n\t\t\t\t\t\t\t<text>ç»Ÿè®¡æœˆä»½ï¼š{{ selectedMonth }}</text>\r\n\t\t\t\t\t\t\t<text class=\"picker-arrow\">â–¼</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- æŸ¥è¯¢æŒ‰é’® -->\r\n\t\t\t<view class=\"action-buttons\">\r\n\t\t\t\t<button class=\"query-btn\" @click=\"fetchAndCalculateStatistics\" :loading=\"isLoading\">æŸ¥è¯¢ç»Ÿè®¡</button>\r\n\t\t\t\t<button v-if=\"isAdmin || isSuperAdmin\" class=\"query-btn all-btn\" @click=\"fetchAllTeachersStatistics\" :loading=\"isLoadingAll\">\r\n\t\t\t\t\t<text class=\"btn-icon\">ğŸ‘¥</text> æŸ¥è¯¢å…¨å‘˜è¯¾æ—¶\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->\r\n\t\t\t<view v-if=\"statistics\" class=\"results-section\">\r\n\t\t\t\t<view class=\"results-title\">ç»Ÿè®¡ç»“æœ</view>\r\n\t\t\t\t<view class=\"results-grid\">\r\n\t\t\t\t\t<view class=\"result-item\">\r\n\t\t\t\t\t\t<view class=\"result-value one-to-one-value\">{{ statistics['ä¸€å¯¹ä¸€'] || 0 }}</view>\r\n\t\t\t\t\t\t<view class=\"result-label one-to-one-label\">ä¸€å¯¹ä¸€ (å°æ—¶)</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"result-item\">\r\n\t\t\t\t\t\t<view class=\"result-value group-class-value\">{{ statistics['ç­è¯¾'] || 0 }}</view>\r\n\t\t\t\t\t\t<view class=\"result-label group-class-label\">ç­è¯¾ (å°æ—¶)</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"result-item\">\r\n\t\t\t\t\t\t<view class=\"result-value full-time-value\">{{ statistics['è„±äº§ç”Ÿ'] || 0 }}</view>\r\n\t\t\t\t\t\t<view class=\"result-label full-time-label\">è„±äº§ç”Ÿ (å°æ—¶)</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view v-if=\"noData && !isLoading\" class=\"empty-state\">\r\n\t\t\t\t<text>å½“æœˆæ— æ’è¯¾è®°å½•</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-if=\"(isAdmin || isSuperAdmin) && allStatistics && allStatistics.length\" class=\"results-section card-bg\">\r\n\t\t\t\t<view class=\"results-title\">å…¨å‘˜è¯¾æ—¶ç»Ÿè®¡</view>\r\n\t\t\t\t<view class=\"all-table\">\r\n\t\t\t\t\t<view class=\"all-table-header\">\r\n\t\t\t\t\t\t<text class=\"all-th\">æ•™å¸ˆå§“å</text>\r\n\t\t\t\t\t\t<text class=\"all-th\">ä¸€å¯¹ä¸€(å°æ—¶)</text>\r\n\t\t\t\t\t\t<text class=\"all-th\">ç­è¯¾(å°æ—¶)</text>\r\n\t\t\t\t\t\t<text class=\"all-th\">è„±äº§ç”Ÿ(å°æ—¶)</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-for=\"(row, index) in allStatistics\" :key=\"index\" class=\"all-table-row\">\r\n\t\t\t\t\t\t<text class=\"all-td teacher-name\">{{ row.teacherName }}</text>\r\n\t\t\t\t\t\t<text class=\"all-td one-to-one-hours\">{{ row['ä¸€å¯¹ä¸€'] }}</text>\r\n\t\t\t\t\t\t<text class=\"all-td group-class-hours\">{{ row['ç­è¯¾'] }}</text>\r\n\t\t\t\t\t\t<text class=\"all-td full-time-hours\">{{ row['è„±äº§ç”Ÿ'] }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tallTeacherList: [],\r\n\t\t\t\tteacherIndex: 0,\r\n\t\t\t\tsearchKeyword: '',\r\n\t\t\t\tselectedMonth: new Date().toISOString().slice(0, 7), // æ ¼å¼ YYYY-MM\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tstatistics: null, // ç”¨äºå­˜å‚¨ç»Ÿè®¡ç»“æœ\r\n\t\t\t\tnoData: false, // æ˜¯å¦æ— æ•°æ®\r\n\t\t\t\tisLoadingAll: false,\r\n\t\t\t\tallStatistics: null,\r\n\t\t\t\tisSuperAdmin: false,\r\n\t\t\t\tisAdmin: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tfilteredTeacherList() {\r\n\t\t\t\tif (!this.searchKeyword) {\r\n\t\t\t\t\treturn this.allTeacherList;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.allTeacherList.filter(teacher =>\r\n\t\t\t\t\tteacher.teacherName && teacher.teacherName.toLowerCase().includes(this.searchKeyword.toLowerCase())\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tselectedTeacher() {\r\n\t\t\t\tif (this.filteredTeacherList.length > 0) {\r\n\t\t\t\t\treturn this.filteredTeacherList[this.teacherIndex];\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tsearchKeyword() {\r\n\t\t\t\tthis.teacherIndex = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.fetchTeachers();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.checkAdminRole();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcheckAdminRole() {\r\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo');\r\n\t\t\t\tthis.isSuperAdmin = userInfo && userInfo.permission === 'superadmin';\r\n\t\t\t\tconst hasAdminPermission = userInfo && userInfo.permission === 'ç®¡ç†å‘˜';\r\n\t\t\t\tconst hasAdminRole = userInfo && userInfo.role && (userInfo.role.includes('ç®¡ç†å‘˜') || userInfo.role === 'ç®¡ç†å‘˜');\r\n\t\t\t\tthis.isAdmin = hasAdminPermission || hasAdminRole || this.isSuperAdmin;\r\n\t\t\t\t// å¦‚æœä¸æ˜¯ç®¡ç†å‘˜ï¼Œè‡ªåŠ¨é€‰ä¸­è‡ªå·±\r\n\t\t\t\tif (!this.isAdmin && !this.isSuperAdmin) {\r\n\t\t\t\t\tconst self = this.allTeacherList.find(t => t._id === userInfo._id);\r\n\t\t\t\t\tif (self) {\r\n\t\t\t\t\t\tthis.selectedTeacher = self;\r\n\t\t\t\t\t\tthis.teacherIndex = this.filteredTeacherList.findIndex(t => t._id === self._id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfetchTeachers() {\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\tdata: { action: 'get-accounts' },\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconst result = res.result;\r\n\t\t\t\t\t\tif (result.code === 200) {\r\n\t\t\t\t\t\t\tthis.allTeacherList = result.data.filter(acc => {\r\n\t\t\t\t\t\t\t\tif (!acc.role) return false;\r\n\t\t\t\t\t\t\t\tif (Array.isArray(acc.role)) {\r\n\t\t\t\t\t\t\t\t\treturn acc.role.includes('æ•™å¸ˆ');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn acc.role === 'æ•™å¸ˆ';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// å¦‚æœä¸æ˜¯ç®¡ç†å‘˜ï¼Œè‡ªåŠ¨é€‰ä¸­è‡ªå·±\r\n\t\t\t\t\t\t\tthis.checkAdminRole();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({ title: 'è·å–æ•™å¸ˆåˆ—è¡¨å¤±è´¥', icon: 'none' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({ title: 'è·å–æ•™å¸ˆåˆ—è¡¨è¯·æ±‚å¤±è´¥', icon: 'none' });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonTeacherChange(e) {\r\n\t\t\t\tif (!this.isAdmin && !this.isSuperAdmin) return;\r\n\t\t\t\tthis.teacherIndex = e.detail.value;\r\n\t\t\t\tthis.selectedTeacher = this.filteredTeacherList[this.teacherIndex];\r\n\t\t\t},\r\n\t\t\tonMonthChange(e) {\r\n\t\t\t\tthis.selectedMonth = e.detail.value;\r\n\t\t\t},\r\n\t\t\tfetchAndCalculateStatistics() {\r\n\t\t\t\tif (!this.selectedTeacher || !this.selectedTeacher._id) {\r\n\t\t\t\t\tuni.showToast({ title: 'è¯·å…ˆé€‰æ‹©ä¸€ä½æ•™å¸ˆ', icon: 'none' });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\tthis.statistics = null;\r\n\t\t\t\tthis.noData = false;\r\n\r\n\t\t\t\tconst [year, month] = this.selectedMonth.split('-').map(Number);\r\n\t\t\t\tconst startDate = `${this.selectedMonth}-01`;\r\n\t\t\t\tconst endDate = new Date(year, month, 0).toISOString().slice(0, 10);\r\n\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'teacher-hours-statistics',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'get-teacher-hours',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tteacher_id: this.selectedTeacher._id,\r\n\t\t\t\t\t\t\tstartDate: startDate,\r\n\t\t\t\t\t\t\tendDate: endDate\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconst result = res.result;\r\n\t\t\t\t\t\tif (result.code === 200 && result.data) {\r\n\t\t\t\t\t\t\tthis.statistics = result.data.statistics;\r\n\t\t\t\t\t\t\t// æ£€æŸ¥æ˜¯å¦æœ‰è¯¾æ—¶æ•°æ®\r\n\t\t\t\t\t\t\tconst hasHours = Object.values(result.data.statistics).some(val => val > 0);\r\n\t\t\t\t\t\t\tif (!hasHours) {\r\n\t\t\t\t\t\t\t\tthis.noData = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.noData = true;\r\n\t\t\t\t\t\t\tthis.statistics = { 'ä¸€å¯¹ä¸€': 0, 'ç­è¯¾': 0, 'è„±äº§ç”Ÿ': 0 };\r\n\t\t\t\t\t\t\tuni.showToast({ title: result.message || 'æŸ¥è¯¢å¤±è´¥', icon: 'none' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('æŸ¥è¯¢è¯¾æ—¶å¤±è´¥:', err);\r\n\t\t\t\t\t\tuni.showToast({ title: 'æŸ¥è¯¢è¯¾æ—¶å¤±è´¥', icon: 'none' });\r\n\t\t\t\t\t\tthis.noData = true;\r\n\t\t\t\t\t\tthis.statistics = { 'ä¸€å¯¹ä¸€': 0, 'ç­è¯¾': 0, 'è„±äº§ç”Ÿ': 0 };\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\tfetchAllTeachersStatistics() {\r\n\t\t\t\tthis.isLoadingAll = true;\r\n\t\t\t\tthis.allStatistics = null;\r\n\t\t\t\tthis.noData = false;\r\n\t\t\t\tconst [year, month] = this.selectedMonth.split('-').map(Number);\r\n\t\t\t\tconst startDate = `${this.selectedMonth}-01`;\r\n\t\t\t\tconst endDate = new Date(year, month, 0).toISOString().slice(0, 10);\r\n\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname: 'teacher-hours-statistics',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'get-all-teachers-hours',\r\n\t\t\t\t\t\tparams: { startDate, endDate }\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconst result = res.result;\r\n\t\t\t\t\t\tconsole.log('å…¨å‘˜è¯¾æ—¶ç»Ÿè®¡ç»“æœ:', result);\r\n\t\t\t\t\t\tif (result.code === 200 && result.data) {\r\n\t\t\t\t\t\t\t// è½¬æ¢æ•°æ®æ ¼å¼ä»¥é€‚åº”ç°æœ‰UI\r\n\t\t\t\t\t\t\tconst allStats = result.data.map(teacher => {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tusername: teacher.username,\r\n\t\t\t\t\t\t\t\t\tteacherName: teacher.teacherName || teacher.username,\r\n\t\t\t\t\t\t\t\t\t'ä¸€å¯¹ä¸€': teacher.statistics['ä¸€å¯¹ä¸€'] || 0,\r\n\t\t\t\t\t\t\t\t\t'ç­è¯¾': teacher.statistics['ç­è¯¾'] || 0,\r\n\t\t\t\t\t\t\t\t\t'è„±äº§ç”Ÿ': teacher.statistics['è„±äº§ç”Ÿ'] || 0\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.allStatistics = allStats;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// æ£€æŸ¥æ˜¯å¦æœ‰æ•™å¸ˆæœ‰è¯¾æ—¶\r\n\t\t\t\t\t\t\tconst hasActiveTeachers = allStats.some(teacher => \r\n\t\t\t\t\t\t\t\tteacher['ä¸€å¯¹ä¸€'] > 0 || teacher['ç­è¯¾'] > 0 || teacher['è„±äº§ç”Ÿ'] > 0);\r\n\t\t\t\t\t\t\tif (!hasActiveTeachers) {\r\n\t\t\t\t\t\t\t\tuni.showToast({ title: 'æš‚æ— æ•™å¸ˆæœ‰è¯¾æ—¶è®°å½•', icon: 'none' });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.allStatistics = [];\r\n\t\t\t\t\t\t\tuni.showToast({ title: result.message || 'æŸ¥è¯¢å¤±è´¥', icon: 'none' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('æŸ¥è¯¢å…¨å‘˜è¯¾æ—¶å¤±è´¥:', err);\r\n\t\t\t\t\t\tuni.showToast({ title: 'æŸ¥è¯¢å…¨å‘˜è¯¾æ—¶å¤±è´¥', icon: 'none' });\r\n\t\t\t\t\t\tthis.allStatistics = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tthis.isLoadingAll = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// æ–°å¢ï¼šè·å–è¯¾ç¨‹æ—¶é•¿çš„æ–¹æ³•\r\n\t\t\tgetCourseDuration(courseType) {\r\n\t\t\t\t// å¯ä»¥æ ¹æ®è¯¾ç¨‹ç±»å‹è®¾ç½®ä¸åŒçš„æ—¶é•¿\r\n\t\t\t\tswitch(courseType) {\r\n\t\t\t\t\tcase 'ä¸€å¯¹ä¸€':\r\n\t\t\t\t\t\treturn 2; // ä¸€å¯¹ä¸€è¯¾ç¨‹2å°æ—¶\r\n\t\t\t\t\tcase 'ç­è¯¾':\r\n\t\t\t\t\t\treturn 2; // ç­è¯¾2å°æ—¶\r\n\t\t\t\t\tcase 'è„±äº§ç”Ÿ':\r\n\t\t\t\t\t\treturn 2; // è„±äº§ç”Ÿ2å°æ—¶\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn 2; // é»˜è®¤2å°æ—¶\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n.statistics-page {\r\n\tpadding: 40rpx;\r\n\tpadding-top: calc(env(safe-area-inset-top) + 80rpx);\r\n\tbackground: #f4f6f8;\r\n\tmin-height: 100vh;\r\n\tbox-sizing: border-box;\r\n\tposition: relative; /* ä¸ºè¿”å›æŒ‰é’®å®šä½ */\r\n}\r\n\r\n/* è¿”å›æŒ‰é’®æ ·å¼ */\r\n.back-btn-container {\r\n\tposition: absolute;\r\n\ttop: calc(env(safe-area-inset-top) + 90rpx);\r\n\tleft: 40rpx;\r\n\tz-index: 100;\r\n}\r\n\r\n.back-btn {\r\n\tbackground: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); /* ä¿®æ”¹ä¸ºä¸ä¿å­˜æŒ‰é’®ç›¸åŒçš„ç»¿è‰²æ¸å˜ */\r\n\tborder: none;\r\n\tborder-radius: 50%;\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(67, 233, 123, 0.4);\r\n\ttransition: all 0.3s ease;\r\n\tpadding: 0;\r\n\tline-height: 1;\r\n}\r\n\r\n.back-btn:active {\r\n\ttransform: scale(0.95);\r\n\tbox-shadow: 0 4rpx 15rpx rgba(67, 233, 123, 0.3);\r\n}\r\n\r\n.back-btn-icon {\r\n\tcolor: #ffffff;\r\n\tfont-size: 40rpx;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.main-content {\r\n\tmargin-top: 100rpx;\r\n}\r\n\r\n.page-title {\r\n\tfont-size: 48rpx;\r\n\tfont-weight: bold;\r\n\ttext-align: center;\r\n\tmargin-bottom: 40rpx;\r\n\tcolor: #333;\r\n}\r\n.form-section, .action-buttons {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n.form-item {\r\n\tmargin-bottom: 20rpx;\r\n}\r\n.search-input {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 40rpx;\r\n\tpadding: 0 40rpx;\r\n\tbox-sizing: border-box;\r\n\tfont-size: 28rpx;\r\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);\r\n\tmargin-bottom: 20rpx;\r\n\tborder: 1rpx solid #e0e0e0;\r\n}\r\n.picker-display {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tbackground: #ffffff;\r\n\tpadding: 25rpx 40rpx;\r\n\tborder-radius: 40rpx;\r\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);\r\n\tfont-size: 30rpx;\r\n\tcolor: #333;\r\n\tborder: 1rpx solid #e0e0e0;\r\n}\r\n.picker-arrow {\r\n\tcolor: #999;\r\n}\r\n.action-buttons {\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\tmargin-bottom: 40rpx;\r\n\tgap: 30rpx;\r\n}\r\n.query-btn {\r\n\tflex: 1;\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #fff;\r\n\tfont-weight: bold;\r\n\tborder-radius: 50rpx;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.3);\r\n\tfont-size: 30rpx;\r\n\tpadding: 18rpx 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tgap: 12rpx;\r\n\tmin-width: 0;\r\n}\r\n.btn-icon {\r\n\tfont-size: 32rpx;\r\n}\r\n.all-btn {\r\n\tbackground: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);\r\n\tbox-shadow: 0 8rpx 25rpx rgba(67, 233, 123, 0.2);\r\n}\r\n.all-btn:active {\r\n\tbox-shadow: 0 4rpx 15rpx rgba(67, 233, 123, 0.15);\r\n}\r\n\r\n.card-bg {\r\n\tbackground: #fff;\r\n\tborder-radius: 28rpx;\r\n\tbox-shadow: 0 8rpx 40rpx rgba(0,0,0,0.07);\r\n\tpadding: 32rpx 20rpx 24rpx 20rpx;\r\n\tmargin-bottom: 32rpx;\r\n}\r\n\r\n.results-section {\r\n\tbackground: #fff;\r\n\tpadding: 32rpx 20rpx 24rpx 20rpx;\r\n\tborder-radius: 28rpx;\r\n\tmargin-top: 0;\r\n\tbox-shadow: 0 8rpx 40rpx rgba(0, 0, 0, 0.07);\r\n\tmargin-bottom: 32rpx;\r\n}\r\n.results-title {\r\n\tfont-size: 34rpx;\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 40rpx;\r\n\ttext-align: center;\r\n\tcolor: #333;\r\n}\r\n.results-grid {\r\n\tdisplay: flex;\r\n\tjustify-content: space-around;\r\n\ttext-align: center;\r\n}\r\n.result-item {\r\n\tpadding: 10rpx;\r\n}\r\n.result-value {\r\n\tfont-size: 52rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #667eea;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n.result-label {\r\n\tfont-size: 26rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n/* ä¸ºä¸åŒè¯¾ç¨‹ç±»å‹è®¾ç½®ä¸åŒé¢œè‰² */\r\n.one-to-one-value {\r\n\tcolor: #FF6B6B; /* çº¢è‰² */\r\n}\r\n.group-class-value {\r\n\tcolor: #4ECDC4; /* é’è‰² */\r\n}\r\n.full-time-value {\r\n\tcolor: #FFD166; /* é»„è‰² */\r\n}\r\n\r\n.one-to-one-label {\r\n\tcolor: #FF6B6B;\r\n}\r\n.group-class-label {\r\n\tcolor: #4ECDC4;\r\n}\r\n.full-time-label {\r\n\tcolor: #FFD166;\r\n}\r\n\r\n.empty-state {\r\n\ttext-align: center;\r\n\tcolor: #999;\r\n\tmargin-top: 80rpx;\r\n\tfont-size: 30rpx;\r\n}\r\n\r\n/* æ–°å¢å…¨å‘˜ç»Ÿè®¡è¡¨æ ¼æ ·å¼ */\r\n.all-table {\r\n\tmargin-top: 30rpx;\r\n\twidth: 100%;\r\n}\r\n.all-table-header, .all-table-row {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 18rpx 0;\r\n\tborder-bottom: 1rpx solid #e0e0e0;\r\n}\r\n.all-table-header {\r\n\tfont-weight: bold;\r\n\tbackground: #f7f7fa;\r\n}\r\n.all-th, .all-td {\r\n\tflex: 1;\r\n\ttext-align: center;\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n}\r\n.all-td {\r\n\tcolor: #4a67d6;\r\n}\r\n\r\n/* æ•™å¸ˆå§“åé¢œè‰² */\r\n.teacher-name {\r\n\tcolor: #1976D2; /* è“è‰² */\r\n\tfont-weight: bold;\r\n}\r\n\r\n/* ä¸åŒè¯¾ç¨‹ç±»å‹çš„æ•°å­—é¢œè‰² */\r\n.one-to-one-hours {\r\n\tcolor: #FF6B6B; /* çº¢è‰² */\r\n\tfont-weight: bold;\r\n}\r\n\r\n.group-class-hours {\r\n\tcolor: #4ECDC4; /* é’è‰² */\r\n\tfont-weight: bold;\r\n}\r\n\r\n.full-time-hours {\r\n\tcolor: #FFD166; /* é»„è‰² */\r\n\tfont-weight: bold;\r\n}\r\n</style>","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./salary-statistics.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./salary-statistics.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1759881831427\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}