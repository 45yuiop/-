{"version":3,"sources":["webpack:///D:/代码/小程序/新欣火1/pages/account-manage/account-manage.vue?4089","webpack:///D:/代码/小程序/新欣火1/pages/account-manage/account-manage.vue?6271","uni-app:///main.js","webpack:///D:/代码/小程序/新欣火1/pages/account-manage/account-manage.vue?213a","webpack:///D:/代码/小程序/新欣火1/pages/account-manage/account-manage.vue?b06b","webpack:///D:/代码/小程序/新欣火1/pages/account-manage/account-manage.vue?403d","webpack:///D:/代码/小程序/新欣火1/pages/account-manage/account-manage.vue?8d47","uni-app:///pages/account-manage/account-manage.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","showEdit","editOriginUsername","editUsername","editPassword","editTeacherName","editRoleOptions","editRoleIndex","editSubjectOptions","editSubjectIndex","editDepartmentOptions","editDepartmentIndex","editWorkTypeOptions","editWorkTypeIndex","editPermissionOptions","editPermissionIndex","editSupervisorList","editSelectedSupervisor","editShowSupervisorPicker","showDeleteModal","deleteUsername","deleteUid","searchText","accountList","computed","editShowSubjectSelect","editShowPermissionSelect","editShowSupervisorSelect","filteredAccountList","acc","onShow","methods","fetchAccountList","uniCloud","name","action","success","fail","console","fetchEditSupervisorList","role","params","res","selectEditSupervisor","openDelete","doDeleteAccount","id","uni","title","icon","openEdit","_id","teacherName","username","onEditRoleChange","onEditSubjectChange","onEditDepartmentChange","onEditWorkTypeChange","onEditPermissionChange","saveEdit","permission","subject","workType","department","supervisor","dataToSend","goBack","searchAccounts","resetPassword","newPassword","content","showCancel","confirmText"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAy9B,CAAgB,m7BAAG,EAAC,C;;;;;;;;;;;ACA7+B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACa;;;AAG1E;AACgL;AAChL,gBAAgB,uLAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAA4qB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC+GhsB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,qBACA,6BACA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACA;QAAA,OACAC,iEACAA,uCACAA;MAAA,EACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACAC;QACAC;QACAlC;UAAAmC;QAAA;QACAC;UACA;YACA;UACA;QACA;QACAC;UACAC;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAC;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA,OAIAP;kBACAC;kBACAlC;oBACAmC;oBACAM;sBAAAD;oBAAA;kBACA;gBACA;cAAA;gBANAE;gBAOA;kBACA;gBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAZ;QACAC;QACAlC;UACAmC;UACAM;YAAAK;UAAA;QACA;QACAV;UACA;UACA;YACA;YACA;YACAW;cAAAC;cAAAC;YAAA;UACA;YACAF;cAAAC;cAAAC;YAAA;UACA;QACA;QACAZ;UACAC;UACAS;YAAAC;YAAAC;UAAA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;UAAA;QAAA;QACA;UACA;QACA;UACA;UACA;YAAAC;YAAAC;YAAAC;UAAA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACAZ;UAAAC;UAAAC;QAAA;QACA;MACA;MAEA;MACA;MACA;MACA;MACA;MAEA;QACAW;MACA;MAEA;QACAC;MACA;MAEA;QACAA;QACAC;QACA;QACA;UACAC;QACA;MACA;MAEA;QACAjB;QACAO;QACAD;QACAZ;QACAoB;QACAC;QACAE;QACAD;QACAE;MACA;MACA;MACA;QACAC;MACA;MAEAhC;QACAC;QACAlC;UACAmC;UACAM;QACA;QACAL;UACA;UACA;YACA;YACA;YACAW;cAAAC;cAAAC;YAAA;UACA;YACAF;cAAAC;cAAAC;YAAA;UACA;QACA;QACAZ;UACAC;UACAS;YAAAC;YAAAC;UAAA;QACA;MACA;IACA;IACAiB;MACAnB;IACA;IACAoB;MACA;IAAA,CACA;IACAC;MACA;MACA;MACA;MACA;QACAC;MACA;MAEA;MAEAtB;QACAC;QACAsB;QACAC;QACAC;MACA;IACA;EACA;AACA;AAAA,2B","file":"pages/account-manage/account-manage.js","sourcesContent":["import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account-manage.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account-manage.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1759362723301\n      var cssReload = require(\"D:/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/account-manage/account-manage.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./account-manage.vue?vue&type=template&id=1a64b626&\"\nvar renderjs\nimport script from \"./account-manage.vue?vue&type=script&lang=js&\"\nexport * from \"./account-manage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./account-manage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/account-manage/account-manage.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account-manage.vue?vue&type=template&id=1a64b626&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.showEdit && _vm.editShowSupervisorPicker\n      ? _vm.editSupervisorList.length\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.editShowSupervisorPicker = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.editShowSupervisorPicker = false\n    }\n    _vm.e2 = function ($event) {\n      _vm.editShowSupervisorPicker = false\n    }\n    _vm.e3 = function ($event) {\n      _vm.showEdit = false\n    }\n    _vm.e4 = function ($event) {\n      _vm.showDeleteModal = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account-manage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account-manage.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"account-manage-page\">\r\n\t\t<view class=\"register-title\">账号管理</view>\r\n\t\t<view class=\"search-bar\">\r\n\t\t\t<input v-model=\"searchText\" placeholder=\"搜索姓名/角色/科目\" class=\"search-input\" @confirm=\"searchAccounts\" />\r\n\t\t\t<button class=\"search-btn\" @click=\"searchAccounts\">搜索</button>\r\n\t\t</view>\r\n\t\t<view v-for=\"acc in filteredAccountList\" :key=\"acc.username\" class=\"account-item\">\r\n\t\t\t<view class=\"account-info\">\r\n\t\t\t\t<text class=\"account-name\">{{ acc.teacherName || '未设置姓名' }}</text>\r\n\t\t\t\t<text class=\"account-role\">{{ acc.role }}</text>\r\n\t\t\t\t<view class=\"account-tags\">\r\n\t\t\t\t\t<text v-if=\"acc.subject\" class=\"tag tag-subject\">{{ acc.subject }}</text>\r\n\t\t\t\t\t<text v-if=\"acc.department\" class=\"tag tag-department\">{{ acc.department }}</text>\r\n\t\t\t\t\t<text v-if=\"acc.workType\" class=\"tag tag-worktype\">{{ acc.workType }}</text>\r\n\t\t\t\t\t<text class=\"tag tag-permission\">{{ acc.permission || '无权限' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"account-actions\">\r\n\t\t\t\t<button class=\"edit-btn beautify-btn\" @click=\"openEdit(acc)\">修改</button>\r\n\t\t\t\t<button class=\"delete-btn beautify-btn\" @click=\"openDelete(acc)\">删除</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 悬浮底部返回按钮 -->\r\n\t\t<view class=\"fixed-bottom-bar\">\r\n\t\t\t<button class=\"back-btn\" @click=\"goBack\">返回</button>\r\n\t\t</view>\r\n\r\n\t\t<!-- 编辑弹窗 -->\r\n\t\t<view v-if=\"showEdit\" class=\"edit-modal\">\r\n\t\t\t<view class=\"edit-modal-content\">\r\n\t\t\t\t<view class=\"edit-title\">修改账号信息</view>\r\n\t\t\t\t<view class=\"edit-label\">账号</view>\r\n\t\t\t\t<input v-model=\"editUsername\" placeholder=\"账号\" class=\"edit-input\" />\r\n\t\t\t\t<view class=\"edit-label\">密码</view>\r\n\t\t\t\t<input v-model=\"editPassword\" placeholder=\"留空则不修改密码\" class=\"edit-input\" />\r\n\t\t\t\t<view class=\"edit-label\">姓名</view>\r\n\t\t\t\t<input v-model=\"editTeacherName\" placeholder=\"姓名\" class=\"edit-input\" />\r\n\t\t\t\t<view class=\"edit-label\">角色</view>\r\n\t\t\t\t<view class=\"edit-role-select\">\r\n\t\t\t\t\t<view v-for=\"(role, idx) in editRoleOptions\" :key=\"role\" :class=\"['role-btn', {active: editRoleIndex === idx}]\" @click=\"onEditRoleChange(idx)\">{{ role }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 老师科目选择 -->\r\n\t\t\t\t<view v-if=\"editShowSubjectSelect\" class=\"edit-label\">教学科目</view>\r\n\t\t\t\t<view v-if=\"editShowSubjectSelect\" class=\"edit-subject-select\">\r\n\t\t\t\t\t<view v-for=\"(subject, idx) in editSubjectOptions\" :key=\"subject\" :class=\"['subject-btn', {active: editSubjectIndex === idx}]\" @click=\"onEditSubjectChange(idx)\">{{ subject }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 部门选择 -->\r\n\t\t\t\t<view v-if=\"editShowSubjectSelect\" class=\"edit-label\">所属部门</view>\r\n\t\t\t\t<view v-if=\"editShowSubjectSelect\" class=\"edit-department-select\">\r\n\t\t\t\t\t<view v-for=\"(dept, idx) in editDepartmentOptions\" :key=\"dept\" :class=\"['department-btn', {active: editDepartmentIndex === idx}]\" @click=\"onEditDepartmentChange(idx)\">{{ dept }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 工作类型选择 -->\r\n\t\t\t\t<view v-if=\"editShowSubjectSelect\" class=\"edit-label\">工作类型</view>\r\n\t\t\t\t<view v-if=\"editShowSubjectSelect\" class=\"edit-worktype-select\">\r\n\t\t\t\t\t<view v-for=\"(type, idx) in editWorkTypeOptions\" :key=\"type\" :class=\"['worktype-btn', {active: editWorkTypeIndex === idx}]\" @click=\"onEditWorkTypeChange(idx)\">{{ type }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"editShowPermissionSelect\" class=\"edit-label\">权限</view>\r\n\t\t\t\t<view v-if=\"editShowPermissionSelect\" class=\"edit-permission-select\">\r\n\t\t\t\t\t<view v-for=\"(permission, idx) in editPermissionOptions\" :key=\"permission\" :class=\"['permission-btn', {active: editPermissionIndex === idx}]\" @click=\"onEditPermissionChange(idx)\">{{ permission }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 直属上级选择（仅教师和教务显示） -->\r\n\t\t\t\t<view v-if=\"editShowSupervisorSelect\" class=\"edit-label\">直属上级（可选）</view>\r\n\t\t\t\t<view v-if=\"editShowSupervisorSelect\" class=\"edit-supervisor-select\">\r\n\t\t\t\t\t<view class=\"supervisor-placeholder\" @click=\"editShowSupervisorPicker = true\">\r\n\t\t\t\t\t\t<text v-if=\"editSelectedSupervisor\">{{ editSelectedSupervisor.teacherName }} ({{ editSelectedSupervisor.username }})</text>\r\n\t\t\t\t\t\t<text v-else class=\"placeholder-text\">请选择上级领导</text>\r\n\t\t\t\t\t\t<text class=\"arrow-down\">▼</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 直属上级选择弹窗 -->\r\n\t\t\t\t<view v-if=\"editShowSupervisorPicker\" class=\"supervisor-picker-overlay\" @click=\"editShowSupervisorPicker = false\">\r\n\t\t\t\t\t<view class=\"supervisor-picker-content\" @click.stop>\r\n\t\t\t\t\t\t<view class=\"picker-header\">\r\n\t\t\t\t\t\t\t<text class=\"picker-title\">选择上级领导</text>\r\n\t\t\t\t\t\t\t<text class=\"picker-close\" @click=\"editShowSupervisorPicker = false\">×</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"supervisor-list\">\r\n\t\t\t\t\t\t\t<view v-for=\"supervisor in editSupervisorList\" :key=\"supervisor._id\" class=\"supervisor-item\" @click=\"selectEditSupervisor(supervisor)\">\r\n\t\t\t\t\t\t\t\t<text class=\"supervisor-name\">{{ supervisor.teacherName }}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"supervisor-username\">{{ supervisor.username }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-if=\"editSupervisorList.length === 0\" class=\"no-supervisor\">\r\n\t\t\t\t\t\t\t\t<text>暂无可选的上级领导</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"edit-modal-btns\">\r\n\t\t\t\t\t<button class=\"register-btn\" @click=\"saveEdit\">保存</button>\r\n\t\t\t\t\t<button class=\"cancel-btn\" @click=\"showEdit=false\">取消</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 自定义删除确认弹窗 -->\r\n\t\t<view v-if=\"showDeleteModal\" class=\"edit-modal\">\r\n\t\t\t<view class=\"delete-modal-content\">\r\n\t\t\t\t<view class=\"delete-title\">确认删除</view>\r\n\t\t\t\t<view class=\"delete-content\">确定要删除该账号吗？此操作不可恢复。</view>\r\n\t\t\t\t<view class=\"edit-modal-btns\">\r\n\t\t\t\t\t<button class=\"cancel-btn\" @click=\"showDeleteModal=false\">取消</button>\r\n\t\t\t\t\t<button class=\"confirm-delete-btn\" @click=\"doDeleteAccount\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tshowEdit: false,\r\n\t\t\teditOriginUsername: '',\r\n\t\t\teditUsername: '',\r\n\t\t\teditPassword: '',\r\n\t\t\teditTeacherName: '',\r\n\t\t\teditRoleOptions: ['教师', '家长', '教务'],\r\n\t\t\teditRoleIndex: 0,\r\n\t\t\teditSubjectOptions: [\r\n\t\t\t\t'语文', '数学', '英语', '物理', '化学'\r\n\t\t\t],\r\n\t\t\teditSubjectIndex: 0,\r\n\t\t\teditDepartmentOptions: ['小学部', '初中部'],\r\n\t\t\teditDepartmentIndex: -1, // -1表示未选择\r\n\t\t\teditWorkTypeOptions: ['全职', '兼职'],\r\n\t\t\teditWorkTypeIndex: 0,\r\n\t\t\teditPermissionOptions: ['普通用户', '管理员'],\r\n\t\t\teditPermissionIndex: 0,\r\n\t\t\t// 新增直属上级相关变量\r\n\t\t\teditSupervisorList: [],\r\n\t\t\teditSelectedSupervisor: null,\r\n\t\t\teditShowSupervisorPicker: false,\r\n\t\t\tshowDeleteModal: false,\r\n\t\t\tdeleteUsername: '',\r\n\t\t\tdeleteUid: '',\r\n\t\t\tsearchText: '',\r\n\t\t\taccountList: []\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\teditShowSubjectSelect() {\r\n\t\t\tconst role = this.editRoleOptions[this.editRoleIndex];\r\n\t\t\treturn role === '教师';\r\n\t\t},\r\n\t\teditShowPermissionSelect() {\r\n\t\t\tconst role = this.editRoleOptions[this.editRoleIndex];\r\n\t\t\treturn role !== '家长';\r\n\t\t},\r\n\t\teditShowSupervisorSelect() {\r\n\t\t\tconst role = this.editRoleOptions[this.editRoleIndex];\r\n\t\t\treturn role === '教师' || role === '教务';\r\n\t\t},\r\n\t\tfilteredAccountList() {\r\n\t\t\treturn this.accountList.filter(acc => \r\n\t\t\t\t(acc.teacherName && acc.teacherName.includes(this.searchText)) || \r\n\t\t\t\tacc.role.includes(this.searchText) ||\r\n\t\t\t\t(acc.subject && acc.subject.includes(this.searchText))\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\tthis.fetchAccountList();\r\n\t},\r\n\tmethods: {\r\n\t\tfetchAccountList() {\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'user-center',\r\n\t\t\t\tdata: { action: 'get-accounts' },\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.result && res.result.code === 200) {\r\n\t\t\t\t\t\tthis.accountList = res.result.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('获取账号列表失败', err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync fetchEditSupervisorList(role) {\r\n\t\t\tif (role !== '教师' && role !== '教务') {\r\n\t\t\t\tthis.editSupervisorList = [];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\t\tname: 'user-center',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'getSupervisors',\r\n\t\t\t\t\t\tparams: { role }\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (res.result.code === 200) {\r\n\t\t\t\t\tthis.editSupervisorList = res.result.data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.editSupervisorList = [];\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.editSupervisorList = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectEditSupervisor(supervisor) {\r\n\t\t\tthis.editSelectedSupervisor = supervisor;\r\n\t\t\tthis.editShowSupervisorPicker = false;\r\n\t\t},\r\n\t\topenDelete(acc) {\r\n\t\t\tthis.deleteUsername = acc.username;\r\n\t\t\tthis.deleteUid = acc._id;\r\n\t\t\tthis.showDeleteModal = true;\r\n\t\t},\r\n\t\tdoDeleteAccount() {\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'user-center',\r\n\t\t\t\tdata: { \r\n\t\t\t\t\taction: 'delete-account',\r\n\t\t\t\t\tparams: { id: this.deleteUid }\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconst data = res.result;\r\n\t\t\t\t\tif (data.code === 200) {\r\n\t\t\t\t\t\tthis.fetchAccountList();\r\n\t\t\t\t\t\tthis.showDeleteModal = false;\r\n\t\t\t\t\t\tuni.showToast({ title: '账号已删除', icon: 'success' });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({ title: data.message || '删除账号失败', icon: 'none' });\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('删除账号请求失败', err);\r\n\t\t\t\t\tuni.showToast({ title: '删除账号失败', icon: 'none' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\topenEdit(acc) {\r\n\t\t\tthis.editOriginUsername = acc.username;\r\n\t\t\tthis.editUid = acc._id;\r\n\t\t\tthis.editUsername = acc.username;\r\n\t\t\tthis.editPassword = '';\r\n\t\t\tthis.editTeacherName = acc.teacherName || '';\r\n\t\t\tthis.editRoleIndex = this.editRoleOptions.indexOf(acc.role) > -1 ? this.editRoleOptions.indexOf(acc.role) : 0;\r\n\t\t\tthis.editSubjectIndex = this.editSubjectOptions.indexOf(acc.subject) > -1 ? this.editSubjectOptions.indexOf(acc.subject) : 0;\r\n\t\t\tthis.editDepartmentIndex = acc.department && this.editDepartmentOptions.indexOf(acc.department) > -1 ? this.editDepartmentOptions.indexOf(acc.department) : -1;\r\n\t\t\tthis.editWorkTypeIndex = this.editWorkTypeOptions.indexOf(acc.workType) > -1 ? this.editWorkTypeOptions.indexOf(acc.workType) : 0;\r\n\t\t\tthis.editPermissionIndex = this.editPermissionOptions.indexOf(acc.permission) > -1 ? this.editPermissionOptions.indexOf(acc.permission) : 0;\r\n\t\t\tthis.editSelectedSupervisor = null;\r\n\t\t\tthis.fetchEditSupervisorList(acc.role);\r\n\t\t\tif (acc.supervisor) {\r\n\t\t\t\t// 查找并设置当前直属上级\r\n\t\t\t\tconst found = this.editSupervisorList.find(item => item._id === acc.supervisor);\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\tthis.editSelectedSupervisor = found;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 需要异步拉取\r\n\t\t\t\t\tthis.editSelectedSupervisor = { _id: acc.supervisor, teacherName: '已选上级', username: '' };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.showEdit = true;\r\n\t\t},\r\n\t\tonEditRoleChange(idx) {\r\n\t\t\tthis.editRoleIndex = idx;\r\n\t\t\tconst role = this.editRoleOptions[idx];\r\n\t\t\tthis.fetchEditSupervisorList(role);\r\n\t\t\tthis.editSelectedSupervisor = null;\r\n\t\t},\r\n\t\tonEditSubjectChange(idx) {\r\n\t\t\tthis.editSubjectIndex = idx;\r\n\t\t},\r\n\t\tonEditDepartmentChange(idx) {\r\n\t\t\tthis.editDepartmentIndex = idx;\r\n\t\t},\r\n\t\tonEditWorkTypeChange(idx) {\r\n\t\t\tthis.editWorkTypeIndex = idx;\r\n\t\t},\r\n\t\tonEditPermissionChange(idx) {\r\n\t\t\tthis.editPermissionIndex = idx;\r\n\t\t},\r\n\t\tsaveEdit() {\r\n\t\t\tif (!this.editUsername) {\r\n\t\t\t\tuni.showToast({ title: '账号不能为空', icon: 'none' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst selectedRole = this.editRoleOptions[this.editRoleIndex];\r\n\t\t\tlet permission = '';\r\n\t\t\tlet subject = '';\r\n\t\t\tlet department = '';\r\n\t\t\tlet workType = '';\r\n\t\t\t\r\n\t\t\tif (selectedRole !== '家长') {\r\n\t\t\t\tpermission = this.editPermissionOptions[this.editPermissionIndex];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (selectedRole === '教师') {\r\n\t\t\t\tsubject = this.editSubjectOptions[this.editSubjectIndex];\r\n\t\t\t}\r\n\r\n\t\t\tif (selectedRole === '教师') {\r\n\t\t\t\tsubject = this.editSubjectOptions[this.editSubjectIndex];\r\n\t\t\t\tworkType = this.editWorkTypeOptions[this.editWorkTypeIndex];\r\n\t\t\t\t// 部门是可选的，只有选择了才传递\r\n\t\t\t\tif (this.editDepartmentIndex >= 0) {\r\n\t\t\t\t\tdepartment = this.editDepartmentOptions[this.editDepartmentIndex];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst dataToSend = {\r\n\t\t\t\tid: this.editUid,\r\n\t\t\t\tusername: this.editUsername,\r\n\t\t\t\tteacherName: this.editTeacherName,\r\n\t\t\t\trole: selectedRole,\r\n\t\t\t\tpermission: permission,\r\n\t\t\t\tsubject: subject,\r\n\t\t\t\tdepartment: department,\r\n\t\t\t\tworkType: workType,\r\n\t\t\t\tsupervisor: this.editSelectedSupervisor ? this.editSelectedSupervisor._id : ''\r\n\t\t\t};\r\n\t\t\t// 只有填写了密码才传递\r\n\t\t\tif (this.editPassword) {\r\n\t\t\t\tdataToSend.password = this.editPassword;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'user-center',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\taction: 'update-account',\r\n\t\t\t\t\tparams: dataToSend\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconst data = res.result;\r\n\t\t\t\t\tif (data.code === 200) {\r\n\t\t\t\t\t\tthis.fetchAccountList();\r\n\t\t\t\t\t\tthis.showEdit = false;\r\n\t\t\t\t\t\tuni.showToast({ title: '修改成功', icon: 'success' });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({ title: data.message || '修改账号失败', icon: 'none' });\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('修改账号请求失败', err);\r\n\t\t\t\t\tuni.showToast({ title: '修改账号失败', icon: 'none' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoBack() {\r\n\t\t\tuni.navigateBack();\r\n\t\t},\r\n\t\tsearchAccounts() {\r\n\t\t\t// 只做本地过滤，不重新请求\r\n\t\t},\r\n\t\tresetPassword() {\r\n\t\t\t// 生成随机密码\r\n\t\t\tconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\t\t\tlet newPassword = '';\r\n\t\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\t\tnewPassword += chars.charAt(Math.floor(Math.random() * chars.length));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.editPassword = newPassword;\r\n\t\t\t\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '密码已重设',\r\n\t\t\t\tcontent: `新密码：${newPassword}\\n\\n请将此密码告知用户，建议用户登录后及时修改密码。`,\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: '确定'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n.account-manage-page {\r\n\tmargin: 40rpx auto 0 auto;\r\n\tpadding: 40rpx;\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tborder-radius: 25rpx;\r\n\tbox-shadow: 0 20rpx 60rpx rgba(102, 126, 234, 0.2);\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tmin-height: 100vh;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.register-title {\r\n\tfont-size: 42rpx;\r\n\tcolor: #ffffff;\r\n\tfont-weight: bold;\r\n\ttext-align: center;\r\n\tmargin-bottom: 40rpx;\r\n\tletter-spacing: 3rpx;\r\n\ttext-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.search-bar {\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.search-input {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tborder: 2rpx solid rgba(255, 255, 255, 0.3);\r\n\tborder-radius: 25rpx;\r\n\tpadding: 0 25rpx;\r\n\tfont-size: 28rpx;\r\n\tbackground: rgba(255, 255, 255, 0.9);\r\n\tbackdrop-filter: blur(10rpx);\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n.search-input:focus {\r\n\tborder: 2rpx solid #ffffff;\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tbox-shadow: 0 8rpx 25rpx rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.search-btn {\r\n\twidth: 120rpx;\r\n\theight: 80rpx;\r\n\tbackground: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tborder-radius: 25rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(255, 154, 158, 0.3);\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n.search-btn:active {\r\n\ttransform: translateY(2rpx);\r\n\tbox-shadow: 0 4rpx 15rpx rgba(255, 154, 158, 0.2);\r\n}\r\n\r\n.account-item {\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tborder-radius: 20rpx;\r\n\tpadding: 25rpx;\r\n\tmargin-bottom: 20rpx;\r\n\tdisplay: flex;\r\n\talign-items: flex-start;\r\n\tjustify-content: flex-start;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(0, 0, 0, 0.1);\r\n\tbackdrop-filter: blur(10rpx);\r\n\tborder: 2rpx solid rgba(255, 255, 255, 0.3);\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n.account-item:hover {\r\n\ttransform: translateY(-2rpx);\r\n\tbox-shadow: 0 12rpx 35rpx rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.account-info {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tflex: 1;\r\n\tmin-width: 0;\r\n}\r\n\r\n.account-name {\r\n\tfont-size: 32rpx;\r\n\tcolor: #333;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.account-role {\r\n\tfont-size: 28rpx;\r\n\tcolor: #667eea;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.account-subject {\r\n\tfont-size: 24rpx;\r\n\tcolor: #4CAF50;\r\n\tbackground: rgba(76, 175, 80, 0.1);\r\n\tpadding: 4rpx 12rpx;\r\n\tborder-radius: 12rpx;\r\n\tfont-weight: 500;\r\n\talign-self: flex-start;\r\n}\r\n\r\n.account-permission {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n\tfont-weight: 400;\r\n}\r\n\r\n.account-department {\r\n\tfont-size: 24rpx;\r\n\tcolor: #555;\r\n\tbackground: rgba(102, 126, 234, 0.05);\r\n\tpadding: 4rpx 12rpx;\r\n\tborder-radius: 12rpx;\r\n\tfont-weight: 500;\r\n\talign-self: flex-start;\r\n\tmargin-top: 8rpx;\r\n}\r\n\r\n.account-worktype {\r\n\tfont-size: 24rpx;\r\n\tcolor: #555;\r\n\tbackground: rgba(255, 154, 158, 0.05);\r\n\tpadding: 4rpx 12rpx;\r\n\tborder-radius: 12rpx;\r\n\tfont-weight: 500;\r\n\talign-self: flex-start;\r\n\tmargin-top: 8rpx;\r\n}\r\n\r\n.account-actions {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tgap: 20rpx;\r\n\tmargin-top: 12rpx;\r\n}\r\n\r\n.beautify-btn {\r\n\twidth: 120rpx;\r\n\theight: 60rpx;\r\n\tborder: none;\r\n\tborder-radius: 15rpx;\r\n\tfont-size: 26rpx;\r\n\tfont-weight: bold;\r\n\tmargin-left: 15rpx;\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n.edit-btn {\r\n\tbackground: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);\r\n\tcolor: #ffffff;\r\n\tbox-shadow: 0 6rpx 20rpx rgba(168, 237, 234, 0.3);\r\n}\r\n\r\n.edit-btn:active {\r\n\ttransform: translateY(2rpx);\r\n\tbox-shadow: 0 4rpx 15rpx rgba(168, 237, 234, 0.2);\r\n}\r\n\r\n.delete-btn {\r\n\tbackground: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\r\n\tcolor: #ffffff;\r\n\tbox-shadow: 0 6rpx 20rpx rgba(255, 154, 158, 0.3);\r\n}\r\n\r\n.delete-btn:active {\r\n\ttransform: translateY(2rpx);\r\n\tbox-shadow: 0 4rpx 15rpx rgba(255, 154, 158, 0.2);\r\n}\r\n\r\n.register-btn {\r\n\twidth: 200rpx;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tborder-radius: 25rpx;\r\n\tfont-size: 30rpx;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 12rpx 35rpx rgba(102, 126, 234, 0.3);\r\n\ttransition: all 0.3s ease;\r\n\tletter-spacing: 2rpx;\r\n}\r\n\r\n.register-btn:active {\r\n\ttransform: translateY(3rpx);\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.2);\r\n}\r\n\r\n.edit-modal {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tz-index: 1000;\r\n\tbackdrop-filter: blur(10rpx);\r\n}\r\n\r\n.edit-modal-content {\r\n\twidth: 85%;\r\n\tmax-width: 600rpx;\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tborder-radius: 30rpx;\r\n\tpadding: 50rpx 40rpx;\r\n\tbox-shadow: 0 25rpx 80rpx rgba(0, 0, 0, 0.2);\r\n\tbackdrop-filter: blur(20rpx);\r\n\tborder: 2rpx solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.edit-title {\r\n\tfont-size: 38rpx;\r\n\tcolor: #667eea;\r\n\tfont-weight: bold;\r\n\ttext-align: center;\r\n\tmargin-bottom: 40rpx;\r\n\tletter-spacing: 2rpx;\r\n}\r\n\r\n.edit-label {\r\n\tfont-size: 28rpx;\r\n\tcolor: #667eea;\r\n\tfont-weight: 600;\r\n\tmargin-bottom: 15rpx;\r\n}\r\n\r\n.edit-input {\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tborder: 2rpx solid rgba(102, 126, 234, 0.2);\r\n\tborder-radius: 20rpx;\r\n\tpadding: 0 25rpx;\r\n\tfont-size: 28rpx;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tmargin-bottom: 25rpx;\r\n\ttransition: all 0.3s ease;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.edit-input:focus {\r\n\tborder: 2rpx solid #667eea;\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.15);\r\n}\r\n\r\n.edit-role-select, .edit-permission-select, .edit-subject-select {\r\n\tdisplay: flex;\r\n\tgap: 15rpx;\r\n\tmargin-bottom: 25rpx;\r\n}\r\n\r\n.role-btn, .permission-btn, .subject-btn {\r\n\tflex: 1;\r\n\theight: 70rpx;\r\n\tline-height: 70rpx;\r\n\tborder: 2rpx solid rgba(102, 126, 234, 0.2);\r\n\tborder-radius: 15rpx;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tfont-size: 26rpx;\r\n\tcolor: #667eea;\r\n\ttext-align: center;\r\n\ttransition: all 0.3s ease;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.role-btn.active, .permission-btn.active, .subject-btn.active {\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #ffffff;\r\n\tborder-color: #667eea;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 6rpx 20rpx rgba(102, 126, 234, 0.2);\r\n}\r\n\r\n.edit-modal-btns {\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n\tmargin-top: 40rpx;\r\n}\r\n\r\n.cancel-btn {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tbackground: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tborder-radius: 20rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(255, 154, 158, 0.3);\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n.cancel-btn:active {\r\n\ttransform: translateY(2rpx);\r\n\tbox-shadow: 0 4rpx 15rpx rgba(255, 154, 158, 0.2);\r\n}\r\n\r\n.confirm-delete-btn {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tbackground: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tborder-radius: 20rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(255, 107, 107, 0.3);\r\n\ttransition: all 0.3s ease;\r\n}\r\n\r\n.confirm-delete-btn:active {\r\n\ttransform: translateY(2rpx);\r\n\tbox-shadow: 0 4rpx 15rpx rgba(255, 107, 107, 0.2);\r\n}\r\n\r\n.delete-modal-content {\r\n\twidth: 85%;\r\n\tmax-width: 500rpx;\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tborder-radius: 30rpx;\r\n\tpadding: 50rpx 40rpx;\r\n\tbox-shadow: 0 25rpx 80rpx rgba(0, 0, 0, 0.2);\r\n\tbackdrop-filter: blur(20rpx);\r\n\tborder: 2rpx solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.delete-title {\r\n\tfont-size: 36rpx;\r\n\tcolor: #ff6b6b;\r\n\tfont-weight: bold;\r\n\ttext-align: center;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.delete-content {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n\ttext-align: center;\r\n\tmargin-bottom: 40rpx;\r\n\tline-height: 1.5;\r\n}\r\n\r\n.password-input-container {\r\n\tposition: relative;\r\n}\r\n\r\n.reset-password-btn {\r\n\tposition: absolute;\r\n\tright: 10rpx;\r\n\ttop: 50%;\r\n\ttransform: translateY(-50%);\r\n\tbackground: none;\r\n\tborder: none;\r\n\tfont-size: 26rpx;\r\n\tcolor: #667eea;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.fixed-bottom-bar {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 999;\r\n  background: transparent;\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-bottom: env(safe-area-inset-bottom);\r\n}\r\n.back-btn {\r\n  width: 80vw;\r\n  max-width: 400rpx;\r\n  height: 88rpx;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: #fff;\r\n  border-radius: 44rpx;\r\n  font-size: 32rpx;\r\n  box-shadow: 0 4rpx 16rpx rgba(102,126,234,0.12);\r\n}\r\n\r\n.edit-subject-select {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\twidth: 100%;\r\n\tmargin-bottom: 20rpx;\r\n\tgap: 20rpx;\r\n}\r\n.subject-btn {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tborder: 2rpx solid rgba(102, 126, 234, 0.2);\r\n\tborder-radius: 20rpx;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tfont-size: 28rpx;\r\n\tcolor: #667eea;\r\n\ttext-align: center;\r\n\ttransition: all 0.3s ease;\r\n\tfont-weight: 500;\r\n\tbox-shadow: 0 4rpx 15rpx rgba(102, 126, 234, 0.1);\r\n\tcursor: pointer;\r\n\tbackdrop-filter: blur(10rpx);\r\n}\r\n.subject-btn.active {\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #fff;\r\n\tborder-color: #667eea;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.2);\r\n\ttransform: translateY(-2rpx);\r\n}\r\n.edit-department-select {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\twidth: 100%;\r\n\tmargin-bottom: 20rpx;\r\n\tgap: 20rpx;\r\n}\r\n.department-btn {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tborder: 2rpx solid rgba(102, 126, 234, 0.2);\r\n\tborder-radius: 20rpx;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tfont-size: 28rpx;\r\n\tcolor: #667eea;\r\n\ttext-align: center;\r\n\ttransition: all 0.3s ease;\r\n\tfont-weight: 500;\r\n\tbox-shadow: 0 4rpx 15rpx rgba(102, 126, 234, 0.1);\r\n\tcursor: pointer;\r\n\tbackdrop-filter: blur(10rpx);\r\n}\r\n.department-btn.active {\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #fff;\r\n\tborder-color: #667eea;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.2);\r\n\ttransform: translateY(-2rpx);\r\n}\r\n.edit-worktype-select {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\twidth: 100%;\r\n\tmargin-bottom: 20rpx;\r\n\tgap: 20rpx;\r\n}\r\n.worktype-btn {\r\n\tflex: 1;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tborder: 2rpx solid rgba(102, 126, 234, 0.2);\r\n\tborder-radius: 20rpx;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tfont-size: 28rpx;\r\n\tcolor: #667eea;\r\n\ttext-align: center;\r\n\ttransition: all 0.3s ease;\r\n\tfont-weight: 500;\r\n\tbox-shadow: 0 4rpx 15rpx rgba(102, 126, 234, 0.1);\r\n\tcursor: pointer;\r\n\tbackdrop-filter: blur(10rpx);\r\n}\r\n.worktype-btn.active {\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #fff;\r\n\tborder-color: #667eea;\r\n\tfont-weight: bold;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.2);\r\n\ttransform: translateY(-2rpx);\r\n}\r\n.edit-supervisor-select {\r\n\twidth: 90%;\r\n\tmargin: 15rpx auto 0 auto;\r\n\tmargin-left: -10rpx;\r\n\tpadding-left: 0;\r\n}\r\n.supervisor-placeholder {\r\n\twidth: 100%;\r\n\tmin-width: 180rpx;\r\n\tmax-width: 100%;\r\n\theight: 80rpx;\r\n\tline-height: 80rpx;\r\n\tborder: 2rpx solid rgba(102, 126, 234, 0.2);\r\n\tborder-radius: 20rpx;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tfont-size: 28rpx;\r\n\tcolor: #667eea;\r\n\tpadding: 0 30rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\ttransition: all 0.3s ease;\r\n\tbox-shadow: 0 4rpx 15rpx rgba(102, 126, 234, 0.1);\r\n\tcursor: pointer;\r\n\tbackdrop-filter: blur(10rpx);\r\n}\r\n.supervisor-placeholder:active {\r\n\tborder: 2rpx solid #667eea;\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tbox-shadow: 0 8rpx 25rpx rgba(102, 126, 234, 0.15);\r\n\ttransform: translateY(-2rpx);\r\n}\r\n.placeholder-text {\r\n\tcolor: #999;\r\n}\r\n.arrow-down {\r\n\tfont-size: 24rpx;\r\n\tcolor: #667eea;\r\n}\r\n.supervisor-picker-overlay {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(0, 0, 0, 0.5);\r\n\tz-index: 1000;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.supervisor-picker-content {\r\n\twidth: 80vw;\r\n\tmax-width: 600rpx;\r\n\tmax-height: 70vh;\r\n\tbackground: #fff;\r\n\tborder-radius: 20rpx;\r\n\toverflow: hidden;\r\n\tbox-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.3);\r\n}\r\n.picker-header {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tpadding: 30rpx 40rpx;\r\n\tborder-bottom: 1rpx solid #f0f0f0;\r\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\tcolor: #fff;\r\n}\r\n.picker-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n}\r\n.picker-close {\r\n\tfont-size: 40rpx;\r\n\tcursor: pointer;\r\n\tpadding: 10rpx;\r\n}\r\n.supervisor-list {\r\n\tmax-height: 50vh;\r\n\toverflow-y: auto;\r\n}\r\n.supervisor-item {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tpadding: 30rpx 40rpx;\r\n\tborder-bottom: 1rpx solid #f0f0f0;\r\n\tcursor: pointer;\r\n\ttransition: background 0.2s;\r\n}\r\n.supervisor-item:active {\r\n\tbackground: #f5f5f5;\r\n}\r\n.supervisor-item:last-child {\r\n\tborder-bottom: none;\r\n}\r\n.supervisor-name {\r\n\tfont-size: 30rpx;\r\n\tcolor: #333;\r\n\tfont-weight: 500;\r\n\tmargin-bottom: 8rpx;\r\n}\r\n.supervisor-username {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n}\r\n.no-supervisor {\r\n\tpadding: 60rpx 40rpx;\r\n\ttext-align: center;\r\n\tcolor: #999;\r\n\tfont-size: 28rpx;\r\n}\r\n.account-tags {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 24rpx;\r\n\tmargin-top: 8rpx;\r\n\tmargin-bottom: 2rpx;\r\n\tflex-wrap: wrap;\r\n}\r\n.tag {\r\n\twhite-space: nowrap;\r\n\tpadding: 8rpx 28rpx;\r\n\tborder-radius: 16rpx;\r\n\tfont-size: 26rpx;\r\n\tfont-weight: 500;\r\n\tbackground: #f0f0f0;\r\n\tcolor: #666;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(0,0,0,0.04);\r\n\tborder: 1rpx solid #eee;\r\n}\r\n.tag-subject {\r\n\tbackground: rgba(76, 175, 80, 0.12);\r\n\tcolor: #4CAF50;\r\n}\r\n.tag-department {\r\n\tbackground: rgba(33, 150, 243, 0.12);\r\n\tcolor: #2196F3;\r\n}\r\n.tag-worktype {\r\n\tbackground: rgba(255, 193, 7, 0.12);\r\n\tcolor: #FFC107;\r\n}\r\n.tag-permission {\r\n\tbackground: rgba(255, 87, 34, 0.12);\r\n\tcolor: #FF5722;\r\n}\r\n</style> "],"sourceRoot":""}