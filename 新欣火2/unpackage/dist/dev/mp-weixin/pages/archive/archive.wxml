<view class="container data-v-76a5fae8"><view class="custom-navbar data-v-76a5fae8"><view class="navbar-content data-v-76a5fae8"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="navbar-left data-v-76a5fae8" bindtap="__e"><text class="back-icon data-v-76a5fae8">â€¹</text><text class="back-text data-v-76a5fae8">è¿”å›</text></view><text class="navbar-title data-v-76a5fae8">æ¡£æ¡ˆç®¡ç†</text><view class="navbar-right data-v-76a5fae8"></view></view></view><view class="search-container data-v-76a5fae8"><view class="search-bar data-v-76a5fae8"><text class="search-icon data-v-76a5fae8">ğŸ”</text><input class="search-input data-v-76a5fae8" placeholder="æœç´¢å­¦ç”Ÿå§“åã€å­¦å·æˆ–ç­çº§" data-event-opts="{{[['input',[['__set_model',['','searchKeyword','$event',[]]],['onSearchInput',['$event']]]]]}}" value="{{searchKeyword}}" bindinput="__e"/><block wx:if="{{searchKeyword}}"><view data-event-opts="{{[['tap',[['clearSearch',['$event']]]]]}}" class="clear-btn data-v-76a5fae8" bindtap="__e"><text class="clear-icon data-v-76a5fae8">Ã—</text></view></block></view></view><view class="category-tabs data-v-76a5fae8"><view data-event-opts="{{[['tap',[['switchTab',['all']]]]]}}" class="{{['category-tab','data-v-76a5fae8',(activeTab==='all')?'active':'']}}" bindtap="__e">å…¨éƒ¨</view><view data-event-opts="{{[['tap',[['switchTab',['students']]]]]}}" class="{{['category-tab','data-v-76a5fae8',(activeTab==='students')?'active':'']}}" bindtap="__e">å­¦ç”Ÿæ¡£æ¡ˆ</view><view data-event-opts="{{[['tap',[['switchTab',['classes']]]]]}}" class="{{['category-tab','data-v-76a5fae8',(activeTab==='classes')?'active':'']}}" bindtap="__e">ç­çº§æ¡£æ¡ˆ</view></view><block wx:if="{{!isEditMode}}"><view class="edit-mode-toggle data-v-76a5fae8"><view data-event-opts="{{[['tap',[['enterEditMode',['$event']]]]]}}" class="edit-mode-btn data-v-76a5fae8" bindtap="__e"><image class="edit-icon data-v-76a5fae8" src="/static/745 (1).png" mode="aspectFit"></image></view></view></block><block wx:if="{{localCache.isLoadingBackground}}"><view class="background-loading-indicator data-v-76a5fae8"><view class="loading-progress data-v-76a5fae8"><text class="loading-text data-v-76a5fae8">{{"æ­£åœ¨åå°åŠ è½½æ›´å¤šæ•°æ®... "+localCache.backgroundLoadProgress+"%"}}</text><view class="progress-bar data-v-76a5fae8"><view class="progress-fill data-v-76a5fae8" style="{{'width:'+(localCache.backgroundLoadProgress+'%')+';'}}"></view></view></view></view></block><view class="filter-container data-v-76a5fae8"><view class="filter-row data-v-76a5fae8"><view class="filter-item data-v-76a5fae8"><text class="filter-label data-v-76a5fae8">å¹´çº§ç­›é€‰ï¼š</text><picker mode="selector" value="{{gradeFilterIndex}}" range="{{gradeOptions}}" data-event-opts="{{[['change',[['onGradeFilterChange',['$event']]]]]}}" bindchange="__e" class="data-v-76a5fae8"><view class="filter-picker data-v-76a5fae8">{{''+(gradeFilter||'å…¨éƒ¨å¹´çº§')+''}}<text class="picker-arrow data-v-76a5fae8">â–¼</text></view></picker></view><view class="filter-item data-v-76a5fae8"><text class="filter-label data-v-76a5fae8">æ’åºæ–¹å¼ï¼š</text><picker mode="selector" value="{{sortIndex}}" range="{{sortOptions}}" data-event-opts="{{[['change',[['onSortChange',['$event']]]]]}}" bindchange="__e" class="data-v-76a5fae8"><view class="filter-picker data-v-76a5fae8">{{''+sortOptions[sortIndex]+''}}<text class="picker-arrow data-v-76a5fae8">â–¼</text></view></picker></view></view></view><view class="data-container data-v-76a5fae8"><block wx:if="{{loading}}"><view class="loading-container data-v-76a5fae8"><text class="loading-text data-v-76a5fae8">åŠ è½½ä¸­...</text></view></block><block wx:if="{{activeTab==='all'||activeTab==='students'}}"><view class="section data-v-76a5fae8"><view class="section-title data-v-76a5fae8"><text class="title-text data-v-76a5fae8">{{"å­¦ç”Ÿæ¡£æ¡ˆ ("+studentsTotal+")"}}</text></view><block wx:if="{{$root.g0}}"><view class="empty-state data-v-76a5fae8"><text class="empty-text data-v-76a5fae8">æš‚æ— å­¦ç”Ÿæ¡£æ¡ˆ</text></view></block><block wx:if="{{showStudentsPagination}}"><view class="pagination-container data-v-76a5fae8"><view class="pagination-info data-v-76a5fae8"><text class="pagination-text data-v-76a5fae8">{{"ç¬¬ "+studentsPage+" é¡µï¼Œå…± "+studentsTotalPages+" é¡µ"}}</text></view><view class="pagination-buttons data-v-76a5fae8"><button class="pagination-btn prev-btn data-v-76a5fae8" disabled="{{studentsPage<=1}}" data-event-opts="{{[['tap',[['prevPage',['students']]]]]}}" bindtap="__e">ä¸Šä¸€é¡µ</button><button class="pagination-btn next-btn data-v-76a5fae8" disabled="{{!hasMoreStudents}}" data-event-opts="{{[['tap',[['nextPage',['students']]]]]}}" bindtap="__e">ä¸‹ä¸€é¡µ</button></view></view></block><block wx:if="{{$root.g1>0}}"><view class="student-list data-v-76a5fae8"><block wx:for="{{$root.l0}}" wx:for-item="student" wx:for-index="__i0__" wx:key="_id"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({student:student.$orig})}}" class="{{['student-card','data-v-76a5fae8',(student.m0)?'selected':'']}}" bindtap="__e"><block wx:if="{{isEditMode}}"><view class="selection-checkbox data-v-76a5fae8"><view class="{{['checkbox','data-v-76a5fae8',(student.m1)?'checked':'']}}"><block wx:if="{{student.m2}}"><text class="check-icon data-v-76a5fae8">âœ“</text></block></view></view></block><view class="student-avatar data-v-76a5fae8"><text class="avatar-text data-v-76a5fae8">{{student.g2}}</text></view><view class="student-info data-v-76a5fae8"><view class="student-header data-v-76a5fae8"><text class="student-name data-v-76a5fae8">{{student.$orig.name}}</text><text class="student-id data-v-76a5fae8">{{student.$orig.studentId}}</text></view><view class="student-details data-v-76a5fae8"><text class="student-grade data-v-76a5fae8">{{student.$orig.grade}}</text><text class="student-subjects data-v-76a5fae8">{{student.g3}}</text><block wx:if="{{student.$orig.school}}"><text class="student-school data-v-76a5fae8">{{student.$orig.school}}</text></block></view><view class="student-meta data-v-76a5fae8"><text class="create-time data-v-76a5fae8">{{student.m3}}</text></view></view><view class="student-actions data-v-76a5fae8"><block wx:if="{{!isEditMode}}"><text class="action-icon data-v-76a5fae8">â€º</text></block><block wx:else><view class="edit-actions data-v-76a5fae8"><button data-event-opts="{{[['tap',[['showDeleteConfirm',['$0','student'],[[['paginatedStudents','_id',student.$orig._id]]]]]]]}}" class="delete-btn data-v-76a5fae8" catchtap="__e">åˆ é™¤</button></view></block></view></view></block></view></block></view></block><block wx:if="{{activeTab==='all'||activeTab==='classes'}}"><view class="section data-v-76a5fae8"><view class="section-title data-v-76a5fae8"><text class="title-text data-v-76a5fae8">{{"ç­çº§æ¡£æ¡ˆ ("+classesTotal+")"}}</text></view><block wx:if="{{$root.g4}}"><view class="empty-state data-v-76a5fae8"><text class="empty-text data-v-76a5fae8">æš‚æ— ç­çº§æ¡£æ¡ˆ</text></view></block><block wx:if="{{showClassesPagination}}"><view class="pagination-container data-v-76a5fae8"><view class="pagination-info data-v-76a5fae8"><text class="pagination-text data-v-76a5fae8">{{"ç¬¬ "+classesPage+" é¡µï¼Œå…± "+classesTotalPages+" é¡µ"}}</text></view><view class="pagination-buttons data-v-76a5fae8"><button class="pagination-btn prev-btn data-v-76a5fae8" disabled="{{classesPage<=1}}" data-event-opts="{{[['tap',[['prevPage',['classes']]]]]}}" bindtap="__e">ä¸Šä¸€é¡µ</button><button class="pagination-btn next-btn data-v-76a5fae8" disabled="{{!hasMoreClasses}}" data-event-opts="{{[['tap',[['nextPage',['classes']]]]]}}" bindtap="__e">ä¸‹ä¸€é¡µ</button></view></view></block><block wx:if="{{$root.g5>0}}"><view class="class-list data-v-76a5fae8"><block wx:for="{{$root.l1}}" wx:for-item="classItem" wx:for-index="__i1__" wx:key="_id"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({classItem:classItem.$orig})}}" class="{{['class-card','data-v-76a5fae8',(classItem.m4)?'selected':'']}}" bindtap="__e"><block wx:if="{{isEditMode}}"><view class="selection-checkbox data-v-76a5fae8"><view class="{{['checkbox','data-v-76a5fae8',(classItem.m5)?'checked':'']}}"><block wx:if="{{classItem.m6}}"><text class="check-icon data-v-76a5fae8">âœ“</text></block></view></view></block><view class="class-icon data-v-76a5fae8"><text class="class-icon-text data-v-76a5fae8">ç­</text></view><view class="class-info data-v-76a5fae8"><view class="class-header data-v-76a5fae8"><text class="class-name data-v-76a5fae8">{{classItem.$orig.className}}</text><text class="class-code data-v-76a5fae8">{{classItem.$orig.classCode}}</text></view><view class="class-details data-v-76a5fae8"><text class="class-grade data-v-76a5fae8">{{classItem.$orig.grade}}</text><text class="class-teacher data-v-76a5fae8">{{"ç­ä¸»ä»»ï¼š"+classItem.$orig.teacherName}}</text><text class="class-student-count data-v-76a5fae8">{{"å­¦ç”Ÿæ•°ï¼š"+(classItem.$orig.studentCount||0)}}</text></view><view class="class-meta data-v-76a5fae8"><text class="create-time data-v-76a5fae8">{{classItem.m7}}</text></view></view><view class="class-actions data-v-76a5fae8"><block wx:if="{{!isEditMode}}"><text class="action-icon data-v-76a5fae8">â€º</text></block><block wx:else><view class="edit-actions data-v-76a5fae8"><button data-event-opts="{{[['tap',[['showDeleteConfirm',['$0','class'],[[['paginatedClasses','_id',classItem.$orig._id]]]]]]]}}" class="delete-btn data-v-76a5fae8" catchtap="__e">åˆ é™¤</button></view></block></view></view></block></view></block></view></block></view><block wx:if="{{isEditMode}}"><view class="batch-toolbar-fixed data-v-76a5fae8"><view class="toolbar-left data-v-76a5fae8"><view data-event-opts="{{[['tap',[['toggleSelectAll',['$event']]]]]}}" class="select-all-btn data-v-76a5fae8" bindtap="__e"><text class="select-all-text data-v-76a5fae8">{{isAllSelected?'å–æ¶ˆå…¨é€‰':'å…¨é€‰'}}</text></view><text class="selected-count data-v-76a5fae8">{{"å·²é€‰æ‹© "+$root.g6+" é¡¹"}}</text></view><view class="toolbar-right data-v-76a5fae8"><button class="batch-delete-btn data-v-76a5fae8" disabled="{{$root.g7===0}}" data-event-opts="{{[['tap',[['showBatchDeleteConfirm',['$event']]]]]}}" bindtap="__e">æ‰¹é‡åˆ é™¤</button><button data-event-opts="{{[['tap',[['exitEditMode',['$event']]]]]}}" class="exit-edit-btn data-v-76a5fae8" bindtap="__e">å®Œæˆ</button></view></view></block><block wx:if="{{showDeleteModal}}"><view data-event-opts="{{[['tap',[['closeDeleteModal',['$event']]]]]}}" class="delete-modal data-v-76a5fae8" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="delete-modal-content data-v-76a5fae8" catchtap="__e"><view class="delete-header data-v-76a5fae8"><text class="delete-title data-v-76a5fae8">ç¡®è®¤åˆ é™¤</text></view><view class="delete-body data-v-76a5fae8"><text class="delete-message data-v-76a5fae8">{{deleteMessage}}</text></view><view class="delete-footer data-v-76a5fae8"><button data-event-opts="{{[['tap',[['closeDeleteModal',['$event']]]]]}}" class="cancel-delete-btn data-v-76a5fae8" bindtap="__e">å–æ¶ˆ</button><button data-event-opts="{{[['tap',[['confirmDelete',['$event']]]]]}}" class="confirm-delete-btn data-v-76a5fae8" bindtap="__e">ç¡®è®¤åˆ é™¤</button></view></view></view></block></view>