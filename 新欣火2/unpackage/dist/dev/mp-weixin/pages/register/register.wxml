<view class="register-page-container"><view class="back-btn-container"><button data-event-opts="{{[['tap',[['goBackToHome',['$event']]]]]}}" class="back-btn" bindtap="__e"><text class="back-btn-icon">🏠</text></button></view><view class="register-section"><view class="register-title">注册新账号</view><input class="register-input" placeholder="请输入新账号" data-event-opts="{{[['input',[['__set_model',['','newUsername','$event',[]]]]]]}}" value="{{newUsername}}" bindinput="__e"/><input class="register-input" type="password" placeholder="请输入新密码" data-event-opts="{{[['input',[['__set_model',['','newPassword','$event',[]]]]]]}}" value="{{newPassword}}" bindinput="__e"/><input class="register-input" placeholder="请输入姓名" data-event-opts="{{[['input',[['__set_model',['','newTeacherName','$event',[]]]]]]}}" value="{{newTeacherName}}" bindinput="__e"/><view class="role-label">请选择该教师的身份</view><view class="role-select"><block wx:for="{{roleOptions}}" wx:for-item="role" wx:for-index="idx" wx:key="*this"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({idx})}}" class="{{['role-btn',[(newRoleIndex===idx)?'active':'']]}}" bindtap="__e">{{role}}</view></block></view><block wx:if="{{showSubjectSelect}}"><view class="subject-section"><view class="role-label">请选择教学科目</view><view class="subject-select"><block wx:for="{{subjectOptions}}" wx:for-item="subject" wx:for-index="idx" wx:key="*this"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({idx})}}" class="{{['subject-btn',[(newSubjectIndex===idx)?'active':'']]}}" bindtap="__e">{{subject}}</view></block></view></view></block><block wx:if="{{showSubjectSelect}}"><view class="department-section"><view class="role-label">请选择所属部门<text class="optional-tip">（可选，兼职老师可不选）</text></view><view class="department-select"><block wx:for="{{departmentOptions}}" wx:for-item="dept" wx:for-index="idx" wx:key="*this"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" data-event-params="{{({idx})}}" class="{{['department-btn',[(newDepartmentIndex===idx)?'active':'']]}}" bindtap="__e">{{dept}}</view></block></view></view></block><block wx:if="{{showSubjectSelect}}"><view class="worktype-section"><view class="role-label">请选择工作类型<text class="required-tip">*</text></view><view class="worktype-select"><block wx:for="{{workTypeOptions}}" wx:for-item="type" wx:for-index="idx" wx:key="*this"><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" data-event-params="{{({idx})}}" class="{{['worktype-btn',[(newWorkTypeIndex===idx)?'active':'']]}}" bindtap="__e">{{type}}</view></block></view></view></block><block wx:if="{{showSupervisorSelect}}"><view class="supervisor-section"><view class="role-label">请选择直属上级<text class="optional-tip">（可选）</text></view><view class="supervisor-select"><view data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="supervisor-placeholder" bindtap="__e"><block wx:if="{{selectedSupervisor}}"><text>{{selectedSupervisor.teacherName+" ("+selectedSupervisor.username+")"}}</text></block><block wx:else><text class="placeholder-text">请选择上级领导</text></block><text class="arrow-down">▼</text></view></view></view></block><block wx:if="{{showPermissionSelect}}"><view class="permission-select"><block wx:for="{{permissionOptions}}" wx:for-item="perm" wx:for-index="idx" wx:key="*this"><view data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" data-event-params="{{({idx})}}" class="{{['role-btn',[(newPermissionIndex===idx)?'active':'']]}}" bindtap="__e">{{perm}}</view></block></view></block><button data-event-opts="{{[['tap',[['registerAccount',['$event']]]]]}}" class="register-btn" bindtap="__e">注册</button></view><block wx:if="{{showSupervisorPicker}}"><view data-event-opts="{{[['tap',[['e6',['$event']]]]]}}" class="supervisor-picker-overlay" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="supervisor-picker-content" catchtap="__e"><view class="picker-header"><text class="picker-title">选择上级领导</text><text data-event-opts="{{[['tap',[['e7',['$event']]]]]}}" class="picker-close" bindtap="__e">×</text></view><view class="supervisor-list"><block wx:for="{{supervisorList}}" wx:for-item="supervisor" wx:for-index="__i0__" wx:key="_id"><view data-event-opts="{{[['tap',[['selectSupervisor',['$0'],[[['supervisorList','_id',supervisor._id]]]]]]]}}" class="supervisor-item" bindtap="__e"><text class="supervisor-name">{{supervisor.teacherName}}</text><text class="supervisor-username">{{supervisor.username}}</text></view></block><block wx:if="{{$root.g0===0}}"><view class="no-supervisor"><text>暂无可选的上级领导</text></view></block></view></view></view></block></view>