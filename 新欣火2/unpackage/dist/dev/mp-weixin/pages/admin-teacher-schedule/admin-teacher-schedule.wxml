<view class="page-container data-v-18c29074"><view class="status-bar data-v-18c29074"></view><view class="top-bar data-v-18c29074"><view class="top-nav data-v-18c29074"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-18c29074" bindtap="__e"><text class="back-icon data-v-18c29074">â€¹</text><text class="back-text data-v-18c29074">è¿”å›</text></view><block wx:if="{{!isSelf&&!isTeacher}}"><view class="teacher-selector data-v-18c29074"><picker value="{{teacherIndex}}" range="{{filteredTeacherList}}" range-key="teacherName" data-event-opts="{{[['change',[['onTeacherChange',['$event']]]]]}}" bindchange="__e" class="data-v-18c29074"><view class="picker-display data-v-18c29074"><text class="page-title data-v-18c29074">{{selectedTeacher?selectedTeacher.teacherName:'é€‰æ‹©æ•™å¸ˆ'}}</text><text class="dropdown-arrow-title data-v-18c29074">â–¼</text></view></picker></view></block><block wx:else><view class="teacher-selector data-v-18c29074"><view class="picker-display data-v-18c29074"><text class="page-title data-v-18c29074">{{selectedTeacher?selectedTeacher.teacherName:''}}</text></view></view></block><view class="search-container data-v-18c29074"><view class="search-input-wrapper data-v-18c29074"><input class="search-input data-v-18c29074" placeholder="æœç´¢æ•™å¸ˆå§“å" data-event-opts="{{[['input',[['__set_model',['','searchKeyword','$event',[]]],['onSearchInput',['$event']]]],['focus',[['onSearchFocus',['$event']]]],['blur',[['onSearchBlur',['$event']]]]]}}" value="{{searchKeyword}}" bindinput="__e" bindfocus="__e" bindblur="__e"/><text class="search-icon data-v-18c29074">ğŸ”</text></view></view></view><view class="week-selector-bar data-v-18c29074"><button data-event-opts="{{[['tap',[['changeWeek',[-1]]]]]}}" class="week-btn prev-btn data-v-18c29074" bindtap="__e"><text class="week-btn-icon data-v-18c29074">â—€</text><text class="week-btn-text data-v-18c29074">ä¸Šä¸€å‘¨</text></button><button data-event-opts="{{[['tap',[['changeWeek',[1]]]]]}}" class="week-btn next-btn data-v-18c29074" bindtap="__e"><text class="week-btn-text data-v-18c29074">ä¸‹ä¸€å‘¨</text><text class="week-btn-icon data-v-18c29074">â–¶</text></button><button data-event-opts="{{[['tap',[['returnToCurrentWeek',['$event']]]]]}}" class="today-btn data-v-18c29074" bindtap="__e">ä»Šå¤©</button></view></view><view class="schedule-container data-v-18c29074"><view class="fixed-header data-v-18c29074"><view class="month-cell data-v-18c29074">{{currentMonth+"æœˆ"}}</view><block wx:for="{{$root.l0}}" wx:for-item="day" wx:for-index="dayIndex" wx:key="dayIndex"><view class="{{['day-header','data-v-18c29074',(day.m0)?'is-today':'']}}"><view class="day-name data-v-18c29074">{{day.$orig.name}}</view><view class="day-date data-v-18c29074">{{day.$orig.date}}</view></view></block></view><view class="scrollable-content data-v-18c29074"><view class="schedule-grid data-v-18c29074"><view class="time-column data-v-18c29074"><block wx:for="{{periods}}" wx:for-item="period" wx:for-index="index" wx:key="*this"><view class="time-slot data-v-18c29074">{{''+period+''}}</view></block></view><view class="days-container data-v-18c29074"><block wx:for="{{$root.l2}}" wx:for-item="day" wx:for-index="dayIndex" wx:key="dayIndex"><view class="day-column data-v-18c29074"><view class="course-slots-container data-v-18c29074"><block wx:for="{{periods}}" wx:for-item="p" wx:for-index="index" wx:key="index"><view class="course-placeholder data-v-18c29074"></view></block><block wx:for="{{day.l1}}" wx:for-item="course" wx:for-index="cIndex" wx:key="cIndex"><block wx:if="{{!isLoading}}"><view data-event-opts="{{[['tap',[['handleCourseClick',['$0','$1',dayIndex],[[['coursesByDay.'+dayIndex+'','',cIndex]],[['days','',dayIndex,'fullDate']]]]]]]}}" class="{{['course-block','data-v-18c29074',(course.m1)?'can-apply':'']}}" style="{{(course.$orig.style)}}" bindtap="__e"><view class="data-v-18c29074"><label style="color:#333;" class="_span data-v-18c29074">{{''+course.$orig.name+"-"+(course.$orig.teacher_name||selectedTeacher.teacherName||'')+"@"+(course.$orig.location||'')+'æ•™å®¤'}}</label><block wx:if="{{course.$orig.remark}}"><view class="course-remark-show data-v-18c29074">{{"å¤‡æ³¨ï¼š"+course.$orig.remark}}</view></block><label style="display:block;font-size:13px;font-weight:500;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px;" class="_span data-v-18c29074">{{''+(course.$orig.course_type||course.$orig.type||'')+''}}</label></view></view></block></block></view></view></block></view></view></view></view><block wx:if="{{isLoading}}"><view class="loading-overlay data-v-18c29074"><view class="loading-text data-v-18c29074">è¯¾ç¨‹åŠ è½½ä¸­...</view></view></block><image class="clickable-image data-v-18c29074" style="{{'transform:'+('translate('+imageTranslateX+'px, '+imageTranslateY+'px)')+';'}}" src="{{isImageClicked?'/static/æœºå™¨1.gif':'/static/æœºå™¨.png'}}" mode="aspectFit" data-event-opts="{{[['tap',[['toggleImage',['$event']]]],['touchstart',[['handleImageTouchStart',['$event']]]],['touchmove',[['handleImageTouchMove',['$event']]]],['touchend',[['handleImageTouchEnd',['$event']]]]]}}" bindtap="__e" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"></image><block wx:if="{{showBubble}}"><view class="{{['assistant-bubble','pretty','data-v-18c29074',(isBubbleBelow)?'bubble-below':'']}}" style="{{(bubbleStyle)}}"><text class="bubble-text data-v-18c29074">{{greetingText}}</text><block wx:if="{{hasSchedulePermission}}"><view style="margin-top:12rpx;" class="data-v-18c29074"><text data-event-opts="{{[['tap',[['goToScheduleArrange',['$event']]]]]}}" class="quick-action data-v-18c29074" bindtap="__e">ä¸€é”®æ’è¯¾</text></view></block><view class="pretty-tail pretty-tail-1 data-v-18c29074"></view><view class="pretty-tail pretty-tail-2 data-v-18c29074"></view></view></block></view>