(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"152d":function(e,t,n){"use strict";(function(e,r){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("7eb4")),u=a(n("ee10")),c={onLaunch:function(){e&&e.login&&e.login();var t=r.getStorageSync("userInfo"),n=r.getStorageSync("uni_id_token");t&&n||r.reLaunch({url:"/pages/login/login"})},onShow:function(){var e=(0,u.default)(o.default.mark((function e(t){var n,a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("App onShow with options:",t),n=r.getStorageSync("userInfo"),a=r.getStorageSync("uni_id_token"),n&&a||console.log("用户未登录，但不强制跳转");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onHide:function(){console.log("App Hide")},methods:{updateMessageTabBadge:function(){return(0,u.default)(o.default.mark((function t(){var n,a,u,c,i,s,f,l;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=r.getStorageSync("userInfo"),u=getCurrentPages(),c=["pages/home/home","pages/service/service","pages/message/message","pages/schedule-tab/schedule-tab","pages/my/my"],i=(null===(n=u[u.length-1])||void 0===n?void 0:n.route)||"",s=c.includes(i),s&&"function"===typeof r.removeTabBarBadge&&"function"===typeof r.setTabBarBadge){t.next=7;break}return t.abrupt("return");case 7:if(a&&a._id){t.next=10;break}return r.removeTabBarBadge({index:2}),t.abrupt("return");case 10:return t.prev=10,t.next=13,e.callFunction({name:"user-center/getUnreadMessageCount",data:{userId:a._id}});case 13:f=t.sent,l=f.result&&f.result.count?f.result.count:0,l>0?r.setTabBarBadge({index:2,text:l>99?"99+":String(l)}):r.removeTabBarBadge({index:2}),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](10),r.removeTabBarBadge({index:2});case 21:case"end":return t.stop()}}),t,null,[[10,18]])})))()}}};t.default=c}).call(this,n("861b")["uniCloud"],n("df3c")["default"])},"1bb3":function(e,t,n){"use strict";var r=n("cbc3"),a=n.n(r);a.a},"2a1b":function(e,t,n){"use strict";n.r(t);var r=n("152d"),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},bfc1:function(e,t,n){"use strict";(function(e,t){var r=n("47a9"),a=r(n("7ca3"));n("a226"),n("861b");var o=r(n("ff9b")),u=r(n("3240"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n("6cd0"),e.__webpack_require_UNI_MP_PLUGIN__=n,u.default.config.productionTip=!1,o.default.mpType="app";var i=new u.default(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o.default));t(i).$mount()}).call(this,n("3223")["default"],n("df3c")["createApp"])},cbc3:function(e,t,n){},ff9b:function(e,t,n){"use strict";n.r(t);var r=n("2a1b");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("1bb3");var o=n("828b"),u=Object(o["a"])(r["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=u.exports}},[["bfc1","common/runtime","common/vendor"]]]);