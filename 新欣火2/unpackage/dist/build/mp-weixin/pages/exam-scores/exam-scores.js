(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exam-scores/exam-scores"],{"0453":function(e,t,n){},"0b82":function(e,t,n){"use strict";(function(e,a){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("7eb4")),o=r(n("af34")),c=r(n("ee10")),i=r(n("7ca3"));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h={data:function(){var e;return e={activeTab:"input",formData:{studentId:"",studentName:"",grade:"",examType:"",examDate:"",examYear:"",examMonth:"",remark:"",inputUser:""},examTypeOptions:["期中","期末","月考","中考"],examTypeIndex:-1,gradeOptions:["一年级","二年级","三年级","四年级","五年级","六年级","七年级","八年级","九年级","高一","高二","高三"],gradeIndex:-1,subjectOptions:["语文","数学","英语","物理","化学"],showSubjectModalFlag:!1,selectedSubjects:[],subjectScores:{},yearOptions:[],yearIndex:0,monthOptions:["01","02","03","04","05","06","07","08","09","10","11","12"],monthIndex:0,allStudentHours:[],showStudentModalFlag:!1,availableStudents:[],studentSearchKeyword:"",filteredStudents:[],tempStudent:null,subjects:[],examTypes:[],filterSubjectIndex:-1,analysisSubjectIndex:-1,analysisExamTypeIndex:-1,showStudentList:!1},(0,i.default)(e,"filteredStudents",[]),(0,i.default)(e,"allScores",[]),(0,i.default)(e,"filteredScores",[]),(0,i.default)(e,"progressData",null),(0,i.default)(e,"gradeFilterList",[]),(0,i.default)(e,"filterGradeIndex",-1),(0,i.default)(e,"showRemark",!1),(0,i.default)(e,"editScoreId",null),e},onLoad:function(){this.initExamDate(),this.loadStudentHours(),this.loadStudents(),this.loadScores()},onShow:function(){this.loadStudentHours(),this.loadScores()},methods:{formatYearMonth:function(e){if(!e)return"";if(e instanceof Date){var t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0");return"".concat(t,"-").concat(n)}var a=String(e);return a.length>=7?a.slice(0,7):a},initExamDate:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=n.toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");this.yearOptions=[];for(var s=t-5;s<=t+5;s++)this.yearOptions.push(String(s));this.yearIndex=this.yearOptions.indexOf(String(t)),this.monthIndex=n-1,this.formData.examYear=String(t),this.formData.examMonth=a,this.formData.examDate="".concat(t,"-").concat(a,"-").concat(r)},switchTab:function(e){this.activeTab=e,"list"===e&&this.loadScores()},loadStudentHours:function(){var t=this;return(0,c.default)(s.default.mark((function n(){var r;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,console.log("开始调用student-hours云函数..."),n.next=4,e.callFunction({name:"student-hours",data:{action:"getMyStudents",teacherId:"default"}});case 4:r=n.sent,console.log("student-hours云函数返回结果:",r),200===r.result.code&&Array.isArray(r.result.data)?(t.allStudentHours=r.result.data,t.gradeList=(0,o.default)(new Set(t.allStudentHours.map((function(e){return e.grade})).filter(Boolean))),console.log("年级列表:",t.gradeList)):(console.error("student-hours云函数返回错误:",r.result),a.showToast({title:"课时数据为空: "+(r.result.message||"未知错误"),icon:"none"}),t.gradeList=[]),n.next=14;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("加载学生课时失败:",n.t0),a.showToast({title:"加载学生课时失败",icon:"none"}),t.gradeList=[];case 14:case"end":return n.stop()}}),n,null,[[0,9]])})))()},loadStudents:function(){var t=this;return(0,c.default)(s.default.mark((function n(){var r;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.callFunction({name:"archive-manager",data:{action:"getStudents"}});case 3:r=n.sent,0===r.result.code&&(t.availableStudents=r.result.data||[],t.filteredStudents=t.availableStudents),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.error("加载学生列表失败:",n.t0),a.showToast({title:"加载学生列表失败",icon:"error"});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},onGradeChange:function(e){this.gradeIndex=e.detail.value;var t=this.gradeOptions[this.gradeIndex];this.formData.grade=t},showSubjectModal:function(){this.showSubjectModalFlag=!0},closeSubjectModal:function(){this.showSubjectModalFlag=!1},isSubjectSelected:function(e){return this.selectedSubjects.includes(e)},toggleSubject:function(e){var t=this.selectedSubjects.indexOf(e);t>-1?(this.selectedSubjects.splice(t,1),delete this.subjectScores[e]):(this.selectedSubjects.push(e),this.subjectScores[e]="")},removeSubject:function(e){var t=this.selectedSubjects.indexOf(e);t>-1&&(this.selectedSubjects.splice(t,1),delete this.subjectScores[e])},confirmSubjects:function(){this.showSubjectModalFlag=!1},showStudentModal:function(){var e=this;this.tempStudent=this.formData.studentId?this.availableStudents.find((function(t){return t.studentId===e.formData.studentId})):null,this.showStudentModalFlag=!0,this.filteredStudents=this.availableStudents,this.studentSearchKeyword=""},closeStudentModal:function(){this.showStudentModalFlag=!1},onStudentSearchInput:function(){if(this.studentSearchKeyword){var e=this.studentSearchKeyword.toLowerCase();this.filteredStudents=this.availableStudents.filter((function(t){var n=t.name||"",a=t.studentId||"";return n.toLowerCase().includes(e)||a.toLowerCase().includes(e)}))}else this.filteredStudents=this.availableStudents},isStudentSelected:function(e){return this.tempStudent&&this.tempStudent._id===e._id},selectStudent:function(e){this.tempStudent=e},confirmStudent:function(){var e=this;this.tempStudent?(this.formData.studentId=this.tempStudent.studentId,this.formData.studentName=this.tempStudent.name,this.formData.grade=this.tempStudent.grade,this.gradeIndex=this.gradeOptions.findIndex((function(t){return t===e.tempStudent.grade}))):(this.formData.studentId="",this.formData.studentName="",this.formData.grade="",this.gradeIndex=-1),this.showStudentModalFlag=!1},onYearChange:function(e){this.yearIndex=e.detail.value;var t=Number(this.yearOptions[this.yearIndex]);this.monthIndex;this.formData.examYear=String(t),this.updateExamDateByPickers()},onMonthChange:function(e){this.monthIndex=e.detail.value;Number(this.yearOptions[this.yearIndex]);var t=this.monthIndex+1;this.formData.examMonth=String(t).padStart(2,"0"),this.updateExamDateByPickers()},updateExamDateByPickers:function(){var e=this.yearOptions[this.yearIndex],t=String(this.monthIndex+1).padStart(2,"0");this.formData.examYear=e,this.formData.examMonth=t,this.formData.examDate="".concat(e,"-").concat(t,"-").concat("01")},onExamTypeChange:function(e){this.examTypeIndex=e.detail.value,this.formData.examType=this.examTypeOptions[this.examTypeIndex],this.adjustExamDate()},adjustExamDate:function(){if(this.formData.examType){var e="01";"期中"===this.formData.examType?e="15":"期末"===this.formData.examType?e="25":"月考"===this.formData.examType?e="20":"中考"===this.formData.examType&&(e="15");var t=this.yearOptions[this.yearIndex],n=String(this.monthIndex+1).padStart(2,"0"),a=new Date(Number(t),this.monthIndex+1,0).getDate(),r=Number(e);r>a&&(r=a);var s=String(r).padStart(2,"0");this.formData.examYear=t,this.formData.examMonth=n,this.formData.examDate="".concat(t,"-").concat(n,"-").concat(s)}},submitScore:function(){var t=this;return(0,c.default)(s.default.mark((function n(){var r,o,c,i,u,f,h,m,p,S,x,g;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=a.getStorageSync("userInfo")||{},t.formData.inputUser=r.name||r.nickname||r.teacherName||"未填写姓名",t.formData.studentId){n.next=5;break}return a.showToast({title:"请选择学生",icon:"none"}),n.abrupt("return");case 5:if(t.formData.grade){n.next=8;break}return a.showToast({title:"请选择年级",icon:"none"}),n.abrupt("return");case 8:if(0!==t.selectedSubjects.length){n.next=11;break}return a.showToast({title:"请选择至少一个科目",icon:"none"}),n.abrupt("return");case 11:o=d(t.selectedSubjects),n.prev=12,o.s();case 14:if((c=o.n()).done){n.next=22;break}if(i=c.value,u=Number(t.subjectScores[i]),!(isNaN(u)||u<0)){n.next=20;break}return a.showToast({title:"请输入".concat(i,"的有效成绩"),icon:"none"}),n.abrupt("return");case 20:n.next=14;break;case 22:n.next=27;break;case 24:n.prev=24,n.t0=n["catch"](12),o.e(n.t0);case 27:return n.prev=27,o.f(),n.finish(27);case 30:if(t.formData.examDate){n.next=33;break}return a.showToast({title:"考试日期不能为空",icon:"none"}),n.abrupt("return");case 33:if(!(t.examTypeIndex<0)){n.next=36;break}return a.showToast({title:"请选择考试类型",icon:"none"}),n.abrupt("return");case 36:console.log("提交成绩数据",t.formData,t.selectedSubjects,t.subjectScores),a.showLoading({title:"提交中..."}),n.prev=38,f=[],h=d(t.selectedSubjects);try{for(h.s();!(m=h.n()).done;)p=m.value,S=l(l({},t.formData),{},{subject:p,score:Number(t.subjectScores[p])}),t.editScoreId?f.push(e.callFunction({name:"exam-scores",data:{action:"updateScore",id:t.editScoreId,data:S}})):f.push(e.callFunction({name:"exam-scores",data:{action:"addScore",data:S}}))}catch(s){h.e(s)}finally{h.f()}return n.next=44,Promise.all(f);case 44:x=n.sent,g=x[0],console.log("提交成绩云函数返回:",g),a.hideLoading(),200===g.result.code?(a.showToast({title:"成绩录入成功",icon:"success"}),t.resetForm(),t.loadScores()):409===g.result.code||g.result.isConflict?(console.log("检测到冲突，调用冲突处理函数"),t.handleScoreConflict(g.result.data)):408===g.result.code||g.result.isDuplicate&&200!==g.result.code?(console.log("检测到重复录入，调用重复录入处理函数"),t.handleDuplicateEntry(g.result.data)):a.showToast({title:g.result.message,icon:"none"}),n.next=56;break;case 51:n.prev=51,n.t1=n["catch"](38),a.hideLoading(),console.error("提交失败:",n.t1),a.showToast({title:"提交失败",icon:"none"});case 56:case"end":return n.stop()}}),n,null,[[12,24,27,30],[38,51]])})))()},resetForm:function(){this.gradeIndex=-1,this.examTypeIndex=-1,this.initExamDate(),this.formData={studentId:"",studentName:"",grade:"",examType:"",examDate:"",examYear:"",examMonth:"",remark:"",inputUser:""},this.selectedSubjects=[],this.subjectScores={},this.editScoreId=null},loadScores:function(){var t=this;return(0,c.default)(s.default.mark((function n(){var r;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,console.log("开始调用exam-scores云函数..."),n.next=4,e.callFunction({name:"exam-scores",data:{action:"getStudentScores",data:{}}});case 4:r=n.sent,console.log("exam-scores云函数返回结果:",r),200===r.result.code?(t.allScores=r.result.data,console.log("获取到的成绩数据:",t.allScores),t.subjects=(0,o.default)(new Set(t.allScores.map((function(e){return e.subject})).filter(Boolean))),t.gradeFilterList=(0,o.default)(new Set(t.allScores.map((function(e){return e.grade})).filter(Boolean))),t.examTypes=(0,o.default)(new Set(t.allScores.map((function(e){return e.examType})).filter(Boolean))),t.filterScores()):(console.error("云函数返回错误:",r.result),a.showToast({title:"加载成绩失败: "+r.result.message,icon:"none"})),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("加载成绩列表失败:",n.t0),a.showToast({title:"加载成绩失败",icon:"none"});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},filterScores:function(){var e=this.allScores;if(this.filterGradeIndex>=0){var t=this.gradeFilterList[this.filterGradeIndex];e=e.filter((function(e){return e.grade===t}))}if(this.filterSubjectIndex>=0){var n=this.subjects[this.filterSubjectIndex];e=e.filter((function(e){return e.subject===n}))}this.filteredScores=e},onFilterSubjectChange:function(e){this.filterSubjectIndex=e.detail.value,this.filterScores()},onFilterGradeChange:function(e){this.filterGradeIndex=e.detail.value,this.filterScores()},onAnalysisSubjectChange:function(e){this.analysisSubjectIndex=e.detail.value},onAnalysisExamTypeChange:function(e){this.analysisExamTypeIndex=e.detail.value},getProgressAnalysis:function(){var t=this;return(0,c.default)(s.default.mark((function n(){var r,o,c;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t.analysisSubjectIndex<0||t.analysisExamTypeIndex<0)){n.next=3;break}return a.showToast({title:"请选择科目和考试类型",icon:"none"}),n.abrupt("return");case 3:return r=t.subjects[t.analysisSubjectIndex],o=t.examTypes[t.analysisExamTypeIndex],n.prev=5,n.next=8,e.callFunction({name:"exam-scores",data:{action:"getClassProgressAnalysis",data:{subject:r,examType:o}}});case 8:c=n.sent,200===c.result.code?t.progressData=c.result.data:a.showToast({title:c.result.message,icon:"none"}),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](5),console.error("获取进步分析失败:",n.t0),a.showToast({title:"分析失败",icon:"none"});case 16:case"end":return n.stop()}}),n,null,[[5,12]])})))()},goBack:function(){a.navigateBack()},getScoreColor:function(e,t){var n=t||100,a=e/n;return a>=.85?"score-high":a>=.6?"score-mid":"score-low"},editScore:function(e){this.activeTab="input",this.editScoreId=e._id,this.formData={studentId:e.studentId||"",studentName:e.studentName||"",grade:e.grade||"",courseType:e.courseType||"",subject:e.subject||"",score:e.score||"",maxScore:e.maxScore||"",examType:e.examType||"",examDate:e.examDate||"",className:e.className||"",remark:e.remark||"",inputUser:e.inputUser||""},this.gradeIndex=this.gradeOptions.findIndex((function(t){return t===e.grade}));var t=this.allStudentHours.filter((function(t){return t.grade===e.grade}));this.courseTypeList=(0,o.default)(new Set(t.map((function(e){return e.courseType})))),this.courseTypeIndex=this.courseTypeList.findIndex((function(t){return t===e.courseType}));var n=this.allStudentHours.filter((function(t){return t.grade===e.grade&&t.courseType===e.courseType}));this.subjectList=(0,o.default)(new Set(n.map((function(e){return e.subject})))),this.subjectIndex=this.subjectList.findIndex((function(t){return t===e.subject})),this.studentList=this.allStudentHours.filter((function(t){return t.grade===e.grade&&t.courseType===e.courseType&&t.subject===e.subject})),this.studentIndex=this.studentList.findIndex((function(t){return t._id===e.studentId}))},deleteScore:function(e){var t=this;a.showModal({title:"确认删除",content:"确定要删除 ".concat(e.studentName," 的 ").concat(e.subject," 成绩吗？\n成绩：").concat(e.score,"/").concat(e.maxScore),showCancel:!0,cancelText:"取消",confirmText:"删除",success:function(){var n=(0,c.default)(s.default.mark((function n(a){return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a.confirm){n.next=3;break}return n.next=3,t.confirmDeleteScore(e);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()})},confirmDeleteScore:function(t){var n=this;return(0,c.default)(s.default.mark((function r(){var o;return s.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.showLoading({title:"删除中..."}),r.prev=1,r.next=4,e.callFunction({name:"exam-scores",data:{action:"deleteScore",id:t._id}});case 4:o=r.sent,a.hideLoading(),200===o.result.code?(a.showToast({title:"删除成功",icon:"success"}),n.loadScores()):a.showToast({title:o.result.message||"删除失败",icon:"none"}),r.next=14;break;case 9:r.prev=9,r.t0=r["catch"](1),a.hideLoading(),console.error("删除成绩失败:",r.t0),a.showToast({title:"删除失败",icon:"none"});case 14:case"end":return r.stop()}}),r,null,[[1,9]])})))()},handleScoreConflict:function(e){var t=this;console.log("handleScoreConflict 被调用，参数:",e);var n=e.existingScore,r=e.newScore,s=e.conflictInfo;a.showModal({title:"检测到成绩冲突",content:"学生：".concat(s.studentName,"\n考试：").concat(s.examType," - ").concat(s.subject,"\n日期：").concat(s.examDate,"\n\n现有成绩：").concat(n.score,"/").concat(n.maxScore," (录入人：").concat(s.existingInputUser,")\n新成绩：").concat(r.score,"/").concat(r.maxScore," (录入人：").concat(s.newInputUser,")\n\n请选择处理方式："),showCancel:!0,cancelText:"保留",confirmText:"替换",success:function(e){console.log("冲突处理弹窗回调:",e),e.confirm?t.resolveConflict(n._id,r,"use_new"):e.cancel&&t.resolveConflict(n._id,r,"keep_existing")},fail:function(e){console.error("显示冲突处理弹窗失败:",e)}})},handleDuplicateEntry:function(e){var t=this,n=e.existingScore,r=(e.newScore,e.duplicateInfo);a.showModal({title:"检测到重复录入",content:"学生：".concat(r.studentName,"\n考试：").concat(r.examType," - ").concat(r.subject,"\n日期：").concat(r.examDate,"\n\n成绩：").concat(n.score,"/").concat(n.maxScore,"\n\n现有录入人：").concat(r.existingInputUser,"\n当前录入人：").concat(r.newInputUser,"\n\n检测到相同成绩由不同用户录入，请选择处理方式："),showCancel:!0,cancelText:"取消录入",confirmText:"更新",success:function(e){e.confirm?t.updateInputUser(n._id,r.newInputUser):e.cancel&&a.showToast({title:"已取消录入",icon:"none"})}})},updateInputUser:function(t,n){var r=this;return(0,c.default)(s.default.mark((function o(){var c;return s.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.showLoading({title:"更新中..."}),s.prev=1,s.next=4,e.callFunction({name:"exam-scores",data:{action:"updateScore",id:t,data:{inputUser:n,updateTime:(new Date).toISOString()}}});case 4:c=s.sent,a.hideLoading(),200===c.result.code?(a.showToast({title:"录入人已更新",icon:"success"}),r.resetForm(),r.loadScores()):a.showToast({title:c.result.message,icon:"none"}),s.next=14;break;case 9:s.prev=9,s.t0=s["catch"](1),a.hideLoading(),console.error("更新录入人失败:",s.t0),a.showToast({title:"更新录入人失败",icon:"none"});case 14:case"end":return s.stop()}}),o,null,[[1,9]])})))()},resolveConflict:function(t,n,r){var o=this;return(0,c.default)(s.default.mark((function c(){var i,u,l;return s.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=a.getStorageSync("userInfo")||{},u=i.name||i.nickname||i.teacherName||"未知用户",a.showLoading({title:"处理中..."}),s.prev=3,s.next=6,e.callFunction({name:"exam-scores",data:{action:"resolveConflict",data:{existingScoreId:t,newScoreData:n,resolution:r,resolvedBy:u}}});case 6:l=s.sent,a.hideLoading(),200===l.result.code?(a.showToast({title:l.result.message,icon:"success"}),o.resetForm(),o.loadScores()):a.showToast({title:l.result.message,icon:"none"}),s.next=16;break;case 11:s.prev=11,s.t0=s["catch"](3),a.hideLoading(),console.error("解决冲突失败:",s.t0),a.showToast({title:"解决冲突失败",icon:"none"});case 16:case"end":return s.stop()}}),c,null,[[3,11]])})))()}}};t.default=h}).call(this,n("861b")["uniCloud"],n("df3c")["default"])},2191:function(e,t,n){"use strict";var a=n("0453"),r=n.n(a);r.a},bdd4:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("a226"),n("861b");a(n("3240"));var r=a(n("c29b"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},c29b:function(e,t,n){"use strict";n.r(t);var a=n("f583"),r=n("d3f5");for(var s in r)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n("2191");var o=n("828b"),c=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"2cd060de",null,!1,a["a"],void 0);t["default"]=c.exports},d3f5:function(e,t,n){"use strict";n.r(t);var a=n("0b82"),r=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=r.a},f583:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=(e._self._c,"input"===e.activeTab?e.selectedSubjects.length:null),a="input"===e.activeTab?e.selectedSubjects.length:null,r=e.showStudentModalFlag?e.__map(e.filteredStudents,(function(t,n){var a=e.__get_orig(t),r=e.isStudentSelected(t),s=(t.name||"学").charAt(0),o=e.isStudentSelected(t),c=e.isStudentSelected(t);return{$orig:a,m0:r,g2:s,m1:o,m2:c}})):null,s=e.showStudentModalFlag?e.filteredStudents.length:null,o=e.showSubjectModalFlag?e.__map(e.subjectOptions,(function(t,n){var a=e.__get_orig(t),r=e.isSubjectSelected(t),s=e.isSubjectSelected(t),o=e.isSubjectSelected(t);return{$orig:a,m3:r,m4:s,m5:o}})):null,c=e.showSubjectModalFlag?e.selectedSubjects.length:null,i="list"===e.activeTab?e.__map(e.filteredScores,(function(t,n){var a=e.__get_orig(t),r=e.getScoreColor(t.score,t.maxScore),s=e.formatYearMonth(t.examDate);return{$orig:a,m6:r,m7:s}})):null;e.$mp.data=Object.assign({},{$root:{g0:n,g1:a,l0:r,g3:s,l1:o,g4:c,l2:i}})},r=[]}},[["bdd4","common/runtime","common/vendor"]]]);