<view class="permission-assign-container data-v-3268cbaf"><view class="top-bar-no-bg data-v-3268cbaf"><view class="top-nav-flex data-v-3268cbaf"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-3268cbaf" bindtap="__e"><text class="back-icon data-v-3268cbaf">‹</text><text class="back-text data-v-3268cbaf">返回</text></view><view class="page-title-center data-v-3268cbaf">权限分配</view></view></view><view class="desc data-v-3268cbaf">可为成员分配你当前账号拥有的功能权限。</view><block wx:if="{{!isAdmin}}"><view class="no-feature-tip data-v-3268cbaf">你当前账号没有可分配的功能权限</view></block><block wx:else><view class="assign-section data-v-3268cbaf"><picker range="{{memberList}}" range-key="teacherName" data-event-opts="{{[['change',[['onMemberChange',['$event']]]]]}}" bindchange="__e" class="data-v-3268cbaf"><view class="member-picker data-v-3268cbaf"><text class="data-v-3268cbaf">{{selectedMember?selectedMember.teacherName+'（'+(selectedMember.role||selectedMember.username)+'）':'请选择成员'}}</text></view></picker><block wx:if="{{selectedMember}}"><view class="feature-list data-v-3268cbaf"><checkbox-group value="{{memberFeatures}}" data-event-opts="{{[['change',[['onFeatureChange',['$event']]]]]}}" bindchange="__e" class="data-v-3268cbaf"><block wx:for="{{allAssignableFeatures}}" wx:for-item="feature" wx:for-index="__i0__" wx:key="key"><checkbox value="{{feature.key}}" class="data-v-3268cbaf">{{''+feature.name+''}}</checkbox></block></checkbox-group><button class="save-btn data-v-3268cbaf" disabled="{{saveLoading}}" data-event-opts="{{[['tap',[['saveFeatures',['$event']]]]]}}" bindtap="__e"><block wx:if="{{!saveLoading}}"><text class="data-v-3268cbaf">保存</text></block><block wx:else><text class="data-v-3268cbaf">保存中...</text></block></button></view></block></view></block></view>