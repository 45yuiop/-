(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/permission-assign/add"],{"14f5":function(e,t,a){"use strict";a.r(t);var r=a("7748"),n=a("781b");for(var u in n)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(u);a("3495");var i=a("828b"),s=Object(i["a"])(n["default"],r["b"],r["c"],!1,null,"ef0a859e",null,!1,r["a"],void 0);t["default"]=s.exports},3495:function(e,t,a){"use strict";var r=a("6674"),n=a.n(r);n.a},"545c":function(e,t,a){"use strict";(function(e,t){var r=a("47a9");a("a226"),a("861b");r(a("3240"));var n=r(a("14f5"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(n.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},6674:function(e,t,a){},7748:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var r=function(){var e=this.$createElement;this._self._c},n=[]},"781b":function(e,t,a){"use strict";a.r(t);var r=a("efdb"),n=a.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(u);t["default"]=n.a},efdb:function(e,t,a){"use strict";(function(e,r){var n=a("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(a("7eb4")),i=n(a("af34")),s=n(a("ee10")),c=n(a("5fe4")),o={data:function(){return{memberList:[],selectedMember:null,memberFeatures:[],saveLoading:!1,allAssignableFeatures:c.default.filter((function(e){return e.assignable}))}},onShow:function(){this.initData()},methods:{goBack:function(){getCurrentPages().length>1?e.navigateBack():e.reLaunch({url:"/pages/home/home"})},initData:function(){var t=this;return(0,s.default)(u.default.mark((function a(){var n,i;return u.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.getStorageSync("userInfo"),a.next=3,r.callFunction({name:"user-center",data:{action:"get-accounts"}});case 3:i=a.sent,i.result&&200===i.result.code&&(t.memberList=i.result.data.filter((function(e){var t=e.role&&(Array.isArray(e.role)?e.role.includes("家长"):"家长"===e.role),a=e._id===n._id,r="普通用户"===e.permission;return!t&&!a&&r}))),t.selectedMember=null,t.memberFeatures=[];case 7:case"end":return a.stop()}}),a)})))()},onMemberChange:function(e){var t=e.detail.value;this.selectedMember=this.memberList[t],this.memberFeatures=Array.isArray(this.selectedMember.featureList)?(0,i.default)(this.selectedMember.featureList):[]},onFeatureChange:function(e){this.memberFeatures=e.detail.value},saveFeatures:function(){var t=this;return(0,s.default)(u.default.mark((function a(){var n;return u.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.selectedMember){a.next=2;break}return a.abrupt("return");case 2:return t.saveLoading=!0,n=Array.isArray(t.memberFeatures)?Array.from(t.memberFeatures):[],a.next=6,r.callFunction({name:"user-center",data:{action:"update-account",params:{id:t.selectedMember._id,featureList:n}}});case 6:a.sent,t.saveLoading=!1,e.showToast({title:"保存成功",icon:"success"}),t.initData();case 10:case"end":return a.stop()}}),a)})))()}}};t.default=o}).call(this,a("df3c")["default"],a("861b")["uniCloud"])}},[["545c","common/runtime","common/vendor"]]]);