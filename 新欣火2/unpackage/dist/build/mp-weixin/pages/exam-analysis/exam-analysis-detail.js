(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/exam-analysis/exam-analysis-detail"],{"50ec":function(t,a,e){},5648:function(t,a,e){"use strict";var n=e("50ec"),s=e.n(n);s.a},"7a9c":function(t,a,e){"use strict";e.r(a);var n=e("9091"),s=e.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(i);a["default"]=s.a},9091:function(t,a,e){"use strict";(function(t,n){var s=e("47a9");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i,o=s(e("7eb4")),c=s(e("7ca3")),r=s(e("ee10")),u={components:{ImageZoomViewer:function(){e.e("components/ImageZoomViewer").then(function(){return resolve(e("f9eb"))}.bind(null,e)).catch(e.oe)}},data:function(){return{loading:!0,analysisData:null,analysisId:"",showImageZoom:!1,currentImages:[],currentImageIndex:0}},onLoad:function(a){a.id?(this.analysisId=a.id,this.loadAnalysisDetail(a.id)):(this.loading=!1,t.showToast({title:"缺少必要参数",icon:"none"}))},methods:(i={loadAnalysisDetail:function(a){var e=this;return(0,r.default)(o.default.mark((function s(){var i;return o.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,n.callFunction({name:"exam-analysis",data:{action:"getDetail",data:{id:a}}});case 3:i=s.sent,0===i.result.code?e.analysisData=i.result.data:t.showToast({title:i.result.message||"加载失败",icon:"none"}),s.next=11;break;case 7:s.prev=7,s.t0=s["catch"](0),console.error("加载详情失败:",s.t0),t.showToast({title:"加载失败，请重试",icon:"none"});case 11:return s.prev=11,e.loading=!1,s.finish(11);case 14:case"end":return s.stop()}}),s,null,[[0,7,11,14]])})))()},openImageZoom:function(a,e){a&&0!==a.length?(this.currentImages=a,this.currentImageIndex=e,this.showImageZoom=!0):t.showToast({title:"没有图片可预览",icon:"none"})},editAnalysis:function(){t.navigateTo({url:"/pages/exam-analysis/exam-analysis?id=".concat(this.analysisId)})},deleteAnalysis:function(){var a=this;t.showModal({title:"确认删除",content:"确定要删除这条试卷分析吗？",success:function(){var e=(0,r.default)(o.default.mark((function e(s){var i,c;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s.confirm){e.next=13;break}return e.prev=1,i=t.getStorageSync("userInfo"),e.next=5,n.callFunction({name:"exam-analysis",data:{action:"delete",data:{id:a.analysisId,userId:i._id}}});case 5:c=e.sent,0===c.result.code?(t.showToast({title:"删除成功",icon:"success"}),setTimeout((function(){t.navigateBack()}),1500)):t.showToast({title:c.result.message||"删除失败",icon:"none"}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error("删除失败:",e.t0),t.showToast({title:"删除失败，请重试",icon:"none"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()})},formatTime:function(t){if(!t)return"";var a=new Date(t);return"".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"),"-").concat(String(a.getDate()).padStart(2,"0")," ").concat(String(a.getHours()).padStart(2,"0"),":").concat(String(a.getMinutes()).padStart(2,"0"))},viewStudentDetail:function(){this.analysisData&&this.analysisData.studentId?t.navigateTo({url:"/pages/student-hours-detail/student-hours-detail?id=".concat(this.analysisData.studentId)}):t.showToast({title:"学生信息不完整",icon:"none"})},viewUserDetail:function(){this.analysisData&&this.analysisData.userId?t.showToast({title:"用户详情功能开发中",icon:"none"}):t.showToast({title:"用户信息不完整",icon:"none"})},goBack:function(){t.navigateBack()},previewImage:function(a,e){a&&0!==a.length?t.previewImage({urls:a,current:e,loop:!0,indicator:"number"}):t.showToast({title:"没有图片可预览",icon:"none"})}},(0,c.default)(i,"openImageZoom",(function(t,a){this.currentImages=t,this.currentImageIndex=a,this.showImageZoom=!0})),(0,c.default)(i,"closeImageZoom",(function(){this.showImageZoom=!1,this.currentImages=[],this.currentImageIndex=0})),(0,c.default)(i,"switchImage",(function(t){this.currentImageIndex=t})),i)};a.default=u}).call(this,e("df3c")["default"],e("861b")["uniCloud"])},c872:function(t,a,e){"use strict";e.r(a);var n=e("d759"),s=e("7a9c");for(var i in s)["default"].indexOf(i)<0&&function(t){e.d(a,t,(function(){return s[t]}))}(i);e("5648");var o=e("828b"),c=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"673a1ca0",null,!1,n["a"],void 0);a["default"]=c.exports},cf52:function(t,a,e){"use strict";(function(t,a){var n=e("47a9");e("a226"),e("861b");n(e("3240"));var s=n(e("c872"));t.__webpack_require_UNI_MP_PLUGIN__=e,a(s.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},d759:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,e=(t._self._c,!t.loading&&t.analysisData?t.formatTime(t.analysisData.createTime):null),n=!t.loading&&t.analysisData?t.analysisData.analysisImages&&t.analysisData.analysisImages.length>0:null;t.$mp.data=Object.assign({},{$root:{m0:e,g0:n}})},s=[]}},[["cf52","common/runtime","common/vendor"]]]);