<view class="page-container data-v-4de4aae2"><view class="exam-analysis-list-container data-v-4de4aae2"><view class="nav-bar data-v-4de4aae2"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-4de4aae2" bindtap="__e"><text class="back-icon data-v-4de4aae2">←</text></view><view class="nav-title data-v-4de4aae2">试卷分析列表</view></view><view class="filter-section data-v-4de4aae2"><view class="filter-row data-v-4de4aae2"><picker class="filter-picker data-v-4de4aae2" value="{{yearIndex}}" range="{{yearList}}" data-event-opts="{{[['change',[['onYearChange',['$event']]]]]}}" bindchange="__e"><view class="picker-box data-v-4de4aae2"><text class="data-v-4de4aae2">{{selectedYear||'选择年份'}}</text><text class="arrow data-v-4de4aae2">></text></view></picker><picker class="filter-picker data-v-4de4aae2" value="{{monthIndex}}" range="{{monthList}}" data-event-opts="{{[['change',[['onMonthChange',['$event']]]]]}}" bindchange="__e"><view class="picker-box data-v-4de4aae2"><text class="data-v-4de4aae2">{{selectedMonth||'选择月份'}}</text><text class="arrow data-v-4de4aae2">></text></view></picker><picker class="filter-picker data-v-4de4aae2" value="{{examTypeIndex}}" range="{{examTypeList}}" data-event-opts="{{[['change',[['onExamTypeChange',['$event']]]]]}}" bindchange="__e"><view class="picker-box data-v-4de4aae2"><text class="data-v-4de4aae2">{{selectedExamType||'选择类型'}}</text><text class="arrow data-v-4de4aae2">></text></view></picker></view></view><view class="list-container data-v-4de4aae2"><block wx:if="{{loading}}"><view class="loading data-v-4de4aae2"><text class="data-v-4de4aae2">加载中...</text></view></block><block wx:else><block wx:if="{{$root.g0===0}}"><view class="empty data-v-4de4aae2"><text class="data-v-4de4aae2">暂无数据</text></view></block><block wx:else><view class="analysis-list data-v-4de4aae2"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="__i0__" wx:key="_id"><view data-event-opts="{{[['tap',[['viewDetail',['$0'],[[['analysisList','_id',item.$orig._id]]]]]]]}}" class="analysis-item data-v-4de4aae2" bindtap="__e"><view class="item-header data-v-4de4aae2"><view class="item-title data-v-4de4aae2">{{''+item.$orig.year+"年"+item.$orig.month+" - "+item.$orig.examType+''}}</view><view class="item-time data-v-4de4aae2">{{''+item.m0+''}}</view></view><view class="item-student data-v-4de4aae2"><text data-event-opts="{{[['tap',[['viewStudentDetail',['$0'],[[['analysisList','_id',item.$orig._id]]]]]]]}}" class="student-info data-v-4de4aae2" catchtap="__e">{{''+(item.$orig.grade||'未知年级')+" - "+(item.$orig.studentName||'未知学生')+''}}</text></view><view class="item-content data-v-4de4aae2"><view class="content-row data-v-4de4aae2"><text class="label data-v-4de4aae2">考试难度：</text><view class="stars data-v-4de4aae2"><block wx:for="{{5}}" wx:for-item="index" wx:for-index="__i1__" wx:key="*this"><text class="{{['star','data-v-4de4aae2',(index<=item.$orig.difficultyRating)?'active':'']}}">★</text></block></view></view><view class="content-row data-v-4de4aae2"><text class="label data-v-4de4aae2">答题效果：</text><view class="stars data-v-4de4aae2"><block wx:for="{{5}}" wx:for-item="index" wx:for-index="__i2__" wx:key="*this"><text class="{{['star','data-v-4de4aae2',(index<=item.$orig.studentPerformance)?'active':'']}}">★</text></block></view></view><block wx:if="{{item.$orig.analysisText}}"><view class="content-row data-v-4de4aae2"><text class="label data-v-4de4aae2">分析内容：</text><text class="analysis-text data-v-4de4aae2">{{item.g1+(item.g2>50?'...':'')}}</text></view></block><block wx:if="{{item.g3}}"><view class="content-row data-v-4de4aae2"><text class="label data-v-4de4aae2">试卷图片：</text><view class="image-preview-list data-v-4de4aae2"><block wx:for="{{item.l0}}" wx:for-item="image" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['openImageZoom',['$0',index],[[['analysisList','_id',item.$orig._id,'examImages']]]]]]]}}" class="image-preview-item data-v-4de4aae2" catchtap="__e"><image class="preview-image data-v-4de4aae2" src="{{image.$orig}}" mode="aspectFill"></image><block wx:if="{{image.g4}}"><view class="more-indicator data-v-4de4aae2"><text class="data-v-4de4aae2">{{"+"+(image.g5-3)}}</text></view></block></view></block></view></view></block></view><view class="item-footer data-v-4de4aae2"><text data-event-opts="{{[['tap',[['viewUserDetail',['$0'],[[['analysisList','_id',item.$orig._id]]]]]]]}}" class="user-name data-v-4de4aae2" catchtap="__e">{{item.$orig.userName||'未知用户'}}</text><view class="action-buttons data-v-4de4aae2"><button data-event-opts="{{[['tap',[['editAnalysis',['$0'],[[['analysisList','_id',item.$orig._id]]]]]]]}}" class="action-btn edit data-v-4de4aae2" catchtap="__e">编辑</button><button data-event-opts="{{[['tap',[['deleteAnalysis',['$0'],[[['analysisList','_id',item.$orig._id]]]]]]]}}" class="action-btn delete data-v-4de4aae2" catchtap="__e">删除</button></view></view></view></block></view></block></block><block wx:if="{{total>pageSize}}"><view class="pagination data-v-4de4aae2"><button class="page-btn data-v-4de4aae2" disabled="{{currentPage<=1}}" data-event-opts="{{[['tap',[['changePage',[currentPage-1]]]]]}}" bindtap="__e">上一页</button><text class="page-info data-v-4de4aae2">{{currentPage+" / "+totalPages}}</text><button class="page-btn data-v-4de4aae2" disabled="{{currentPage>=totalPages}}" data-event-opts="{{[['tap',[['changePage',[currentPage+1]]]]]}}" bindtap="__e">下一页</button></view></block></view><view data-event-opts="{{[['tap',[['addAnalysis',['$event']]]]]}}" class="fab data-v-4de4aae2" bindtap="__e"><text class="fab-icon data-v-4de4aae2">+</text></view></view><image-zoom-viewer vue-id="34bb0447-1" visible="{{showImageZoom}}" images="{{currentImages}}" currentIndex="{{currentImageIndex}}" data-event-opts="{{[['^close',[['closeImageZoom']]],['^switch',[['switchImage']]]]}}" bind:close="__e" bind:switch="__e" class="data-v-4de4aae2" bind:__l="__l"></image-zoom-viewer></view>