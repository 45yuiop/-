<view class="page-container data-v-4c9fe918"><view class="exam-analysis-container data-v-4c9fe918"><view class="nav-bar data-v-4c9fe918"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-4c9fe918" bindtap="__e"><text class="back-icon data-v-4c9fe918">←</text></view><view class="nav-title data-v-4c9fe918">试卷分析</view></view><view class="content data-v-4c9fe918"><view class="section data-v-4c9fe918"><view class="section-title data-v-4c9fe918">基本信息</view><view class="form-item data-v-4c9fe918"><text class="label data-v-4c9fe918">年级</text><picker value="{{gradeIndex}}" range="{{gradeList}}" data-event-opts="{{[['change',[['onGradeChange',['$event']]]]]}}" bindchange="__e" class="data-v-4c9fe918"><view class="picker-box data-v-4c9fe918"><text class="data-v-4c9fe918">{{selectedGrade}}</text><text class="arrow data-v-4c9fe918">></text></view></picker></view><view class="form-item data-v-4c9fe918"><text class="label data-v-4c9fe918">学生</text><picker value="{{studentIndex}}" range="{{studentList}}" range-key="studentName" data-event-opts="{{[['change',[['onStudentChange',['$event']]]]]}}" bindchange="__e" class="data-v-4c9fe918"><view class="picker-box data-v-4c9fe918"><text class="data-v-4c9fe918">{{selectedStudent?selectedStudent.studentName:'请选择学生'}}</text><text class="arrow data-v-4c9fe918">></text></view></picker></view><view class="form-item data-v-4c9fe918"><text class="label data-v-4c9fe918">年份</text><picker value="{{yearIndex}}" range="{{yearList}}" data-event-opts="{{[['change',[['onYearChange',['$event']]]]]}}" bindchange="__e" class="data-v-4c9fe918"><view class="picker-box data-v-4c9fe918"><text class="data-v-4c9fe918">{{selectedYear}}</text><text class="arrow data-v-4c9fe918">></text></view></picker></view><view class="form-item data-v-4c9fe918"><text class="label data-v-4c9fe918">月份</text><picker value="{{monthIndex}}" range="{{monthList}}" data-event-opts="{{[['change',[['onMonthChange',['$event']]]]]}}" bindchange="__e" class="data-v-4c9fe918"><view class="picker-box data-v-4c9fe918"><text class="data-v-4c9fe918">{{selectedMonth}}</text><text class="arrow data-v-4c9fe918">></text></view></picker></view><view class="form-item data-v-4c9fe918"><text class="label data-v-4c9fe918">考试类型</text><view class="exam-type-container data-v-4c9fe918"><view class="exam-type-list data-v-4c9fe918"><block wx:for="{{examTypes}}" wx:for-item="type" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectExamType',['$0'],[[['examTypes','',index]]]]]]]}}" class="{{['exam-type-item','data-v-4c9fe918',(selectedExamType===type)?'active':'']}}" bindtap="__e">{{''+type+''}}</view></block></view><view class="custom-exam-type data-v-4c9fe918"><input class="custom-input data-v-4c9fe918" placeholder="自定义考试类型" data-event-opts="{{[['input',[['__set_model',['','customExamType','$event',[]]],['onCustomTypeInput',['$event']]]]]}}" value="{{customExamType}}" bindinput="__e"/></view></view></view></view><view class="section data-v-4c9fe918"><view class="section-title data-v-4c9fe918">试卷上传</view><view class="upload-container data-v-4c9fe918"><view class="upload-list data-v-4c9fe918"><block wx:for="{{examImageFileIDs}}" wx:for-item="fileID" wx:for-index="index" wx:key="index"><view class="upload-item data-v-4c9fe918"><image class="upload-image data-v-4c9fe918" src="{{fileID}}" mode="aspectFit" data-event-opts="{{[['tap',[['openImageZoom',['$0',index],['examImageFileIDs']]]]]}}" bindtap="__e"></image><view data-event-opts="{{[['tap',[['deleteCloudExamImage',[index]]]]]}}" class="delete-btn data-v-4c9fe918" bindtap="__e">×</view></view></block><block wx:for="{{examImages}}" wx:for-item="image" wx:for-index="index"><view class="upload-item data-v-4c9fe918"><image class="upload-image data-v-4c9fe918" src="{{image}}" mode="aspectFit" data-event-opts="{{[['tap',[['openImageZoom',['$0',index],['examImages']]]]]}}" bindtap="__e"></image><view data-event-opts="{{[['tap',[['deleteLocalExamImage',[index]]]]]}}" class="delete-btn data-v-4c9fe918" bindtap="__e">×</view></view></block><block wx:if="{{$root.g1+$root.g2<5}}"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="upload-btn data-v-4c9fe918" bindtap="__e"><text class="plus data-v-4c9fe918">+</text><text class="upload-text data-v-4c9fe918">上传试卷</text></view></block></view></view></view><view class="section data-v-4c9fe918"><view class="section-title data-v-4c9fe918">试卷分析</view><view class="analysis-container data-v-4c9fe918"><textarea class="analysis-textarea data-v-4c9fe918" placeholder="请输入试卷分析内容，支持粘贴文本..." maxlength="{{2000}}" show-confirm-bar="false" data-event-opts="{{[['input',[['__set_model',['','analysisText','$event',[]]]]]]}}" value="{{analysisText}}" bindinput="__e"></textarea><view class="analysis-upload data-v-4c9fe918"><view class="upload-list data-v-4c9fe918"><block wx:for="{{analysisImageFileIDs}}" wx:for-item="fileID" wx:for-index="index" wx:key="index"><view class="upload-item data-v-4c9fe918"><image class="upload-image data-v-4c9fe918" src="{{fileID}}" mode="aspectFit" data-event-opts="{{[['tap',[['openImageZoom',['$0',index],['analysisImageFileIDs']]]]]}}" bindtap="__e"></image><view data-event-opts="{{[['tap',[['deleteCloudAnalysisImage',[index]]]]]}}" class="delete-btn data-v-4c9fe918" bindtap="__e">×</view></view></block><block wx:for="{{analysisImages}}" wx:for-item="image" wx:for-index="index"><view class="upload-item data-v-4c9fe918"><image class="upload-image data-v-4c9fe918" src="{{image}}" mode="aspectFit" data-event-opts="{{[['tap',[['openImageZoom',['$0',index],['analysisImages']]]]]}}" bindtap="__e"></image><view data-event-opts="{{[['tap',[['deleteLocalAnalysisImage',[index]]]]]}}" class="delete-btn data-v-4c9fe918" bindtap="__e">×</view></view></block><block wx:if="{{$root.g4+$root.g5<3}}"><view data-event-opts="{{[['tap',[['chooseAnalysisImage',['$event']]]]]}}" class="upload-btn data-v-4c9fe918" bindtap="__e"><text class="plus data-v-4c9fe918">+</text><text class="upload-text data-v-4c9fe918">上传分析图片</text></view></block></view></view></view></view><view class="section data-v-4c9fe918"><view class="section-title data-v-4c9fe918">考试难度</view><view class="rating-container data-v-4c9fe918"><view class="stars data-v-4c9fe918"><block wx:for="{{5}}" wx:for-item="index" wx:for-index="__i0__" wx:key="*this"><view data-event-opts="{{[['tap',[['setDifficultyRating',['$0'],[[[5,'',__i0__]]]]]]]}}" class="{{['star','data-v-4c9fe918',(index<=difficultyRating)?'active':'']}}" bindtap="__e">★</view></block></view><text class="rating-text data-v-4c9fe918"></text></view></view><view class="section data-v-4c9fe918"><view class="section-title data-v-4c9fe918">学生答题效果</view><view class="rating-container data-v-4c9fe918"><view class="stars data-v-4c9fe918"><block wx:for="{{5}}" wx:for-item="index" wx:for-index="__i1__" wx:key="*this"><view data-event-opts="{{[['tap',[['setStudentPerformance',['$0'],[[[5,'',__i1__]]]]]]]}}" class="{{['star','data-v-4c9fe918',(index<=studentPerformance)?'active':'']}}" bindtap="__e">★</view></block></view><text class="rating-text data-v-4c9fe918"></text></view></view><view class="submit-section data-v-4c9fe918"><button data-event-opts="{{[['tap',[['submitAnalysis',['$event']]]]]}}" class="submit-btn data-v-4c9fe918" bindtap="__e">{{isEdit?'更新分析':'提交分析'}}</button></view><view class="list-section data-v-4c9fe918"><button data-event-opts="{{[['tap',[['goToList',['$event']]]]]}}" class="list-btn data-v-4c9fe918" bindtap="__e">查看分析列表</button></view></view></view><image-zoom-viewer vue-id="9e2b6eac-1" visible="{{showImageZoom}}" images="{{currentImages}}" currentIndex="{{currentImageIndex}}" data-event-opts="{{[['^close',[['closeImageZoom']]],['^switch',[['switchImage']]]]}}" bind:close="__e" bind:switch="__e" class="data-v-4c9fe918" bind:__l="__l"></image-zoom-viewer></view>