(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"05d0":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){}));var s=function(){var t=this,e=t.$createElement,n=(t._self._c,t.filteredFeatures.length),s=t.__map(t.filteredFeatures,(function(e,n){var s=t.__get_orig(e),r=n<8?t.getLightColor(e.color,e.bgAlpha||.15):null;return{$orig:s,m0:r}})),r=t.__map(t.newsList,(function(e,n){var s=t.__get_orig(e),r=t.getNewsSnippet(e),a=e.contentBlocks&&e.contentBlocks.length>0,i=a?e.contentBlocks.filter((function(t){return"image"===t.type})).slice(0,1):null,o=t.formatTime(e.time);return{$orig:s,m1:r,g1:a,l1:i,m2:o}}));t.$mp.data=Object.assign({},{$root:{g0:n,l0:s,l2:r}})},r=[]},"1a6e":function(t,e,n){},"66e8":function(t,e,n){"use strict";(function(t,e){var s=n("47a9");n("a226"),n("861b");s(n("3240"));var r=s(n("cd68"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},9563:function(t,e,n){"use strict";var s=n("1a6e"),r=n.n(s);r.a},a2bd:function(t,e,n){"use strict";n.r(e);var s=n("a736"),r=n.n(s);for(var a in s)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(a);e["default"]=r.a},a736:function(t,e,n){"use strict";(function(t,s){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("7eb4")),i=r(n("ee10")),o=r(n("af34"));var c={data:function(){return{announcementText:"é‡è¦é€šçŸ¥ï¼šè€å¸ˆè¯¾ç¨‹è¡¨å·²æ›´æ–°ï¼Œè¯·å„ä½è€å¸ˆåŠæ—¶æŸ¥çœ‹ã€‚",bannerList:["/static/jj.png","/static/j.png"],showSubscriptionBanner:!1,subscriptionBannerTitle:"",subscriptionBannerDesc:"",subscriptionBannerBtnText:"",quickActions:[{text:"æ•™å¸ˆè¯¾ç¨‹è¡¨",icon:"/static/bbb.png",page:"/pages/admin-teacher-schedule/admin-teacher-schedule",color:"#64B5F6"},{text:"æˆ‘çš„è¯¾è¡¨",icon:"/static/d.png",page:"/pages/teacher-courses/teacher-courses",color:"#FFF3CD",bgAlpha:.8},{text:"æ•™å¸ˆæŽ’è¯¾",icon:"/static/bb.png",page:"/pages/teacher-schedule/teacher-schedule",color:"#7C4DFF"},{text:"è¯¾æ—¶ç»Ÿè®¡",icon:"/static/b.png",page:"/pages/salary-statistics/salary-statistics",color:"#FF8A65"},{text:"æ³¨å†Œè´¦å·",icon:"/static/aaa.png",page:"/pages/register/register",color:"#4FC3F7"},{text:"è´¦å·ç®¡ç†",icon:"/static/c.png",page:"/pages/account-manage/account-manage",color:"#FFD600"},{text:"æˆ‘çš„ç­çº§",icon:"/static/æ•™å®¤.png",page:"/pages/my-class/my-class",color:"#9C27B0"},{text:"æƒé™åˆ†é…",icon:"/static/dd.png",page:"/pages/permission-assign/index",color:"#BA68C8",bgAlpha:1},{text:"è°ƒè¯¾å®¡æ‰¹",icon:"/static/e.png",page:"/pages/course-change-approval/course-change-approval",color:"#FFB300"},{text:"ç³»ç»Ÿè®¾ç½®",icon:"/static/cc.png",page:"/pages/system-setting/system-setting",color:"#42A5F5"},{text:"æ›´å¤š",icon:"/static/f.png",page:"/pages/service/service",color:"#e0e0e0"},{text:"å­¦ç”Ÿæ¡£æ¡ˆ",icon:"/static/gongju.png",page:"/pages/archive/archive",color:"#42A5F5"},{text:"å­¦ç”Ÿå½•å…¥",icon:"/static/1234.png",page:"/pages/student-input/student-input",color:"#4FC3F7"},{text:"ç­çº§ç®¡ç†",icon:"/static/222.png",page:"/pages/class-management/class-management",color:"#9C27B0"},{text:"æˆç»©",icon:"/static/1.png",page:"/pages/exam-scores/exam-scores",color:"#FF6B6B"},{text:"è¿›æ­¥åˆ†æž",icon:"/static/ii.png",page:"/pages/student-progress/student-progress",color:"#4ECDC4"},{text:"æ•™å®¤",icon:"/static/2.png",page:"/pages/classroom/classroom",color:"#1976D2"},{text:"å¸ˆèµ„åŠ›é‡",icon:"/static/user.png",page:"/pages/faculty-strength/faculty-strength",color:"#FF9800"},{text:"è¯•å·åˆ†æž",icon:"/static/22.png",page:"/pages/exam-analysis/exam-analysis",color:"#E91E63"}],newsList:[{id:"1",title:"å…¬å¸è£èŽ·XXå¥–é¡¹11",content:"è¿‘æ—¥ï¼Œå…¬å¸åœ¨æ•™è‚²é¢†åŸŸå–å¾—äº†é‡å¤§çªç ´ï¼Œè£èŽ·XXå¥–é¡¹ã€‚è¿™æ˜¯å¯¹æˆ‘ä»¬ä¸“æ³¨æ•™è‚²ã€ç‚¹äº®æˆé•¿ç†å¿µçš„è‚¯å®šã€‚",time:"2024-06-01"},{id:"2",title:"æ–°äº§å“å‘å¸ƒ",content:"æˆ‘ä»¬æŽ¨å‡ºäº†å…¨æ–°çš„æ•™è‚²ç®¡ç†ç³»ç»Ÿï¼Œä¸ºå­¦ç”Ÿå’Œè€å¸ˆæä¾›æ›´å¥½çš„æœåŠ¡ä½“éªŒã€‚",time:"2024-05-28"}]}},computed:{isAdmin:function(){var e=t.getStorageSync("userInfo");return e&&("ç®¡ç†å‘˜"===e.permission||"superadmin"===e.permission)},isAcademic:function(){var e=t.getStorageSync("userInfo");return e&&(Array.isArray(e.role)?e.role.includes("æ•™åŠ¡"):"æ•™åŠ¡"===e.role)},filteredFeatures:function(){var e=this,n=t.getStorageSync("userInfo");if(!n)return[];var s="superadmin"===n.permission,r="ç®¡ç†å‘˜"===n.permission||s||Array.isArray(n.role)&&n.role.includes("ç®¡ç†å‘˜"),a=Array.isArray(n.role)?n.role.includes("æ•™å¸ˆ"):"æ•™å¸ˆ"===n.role,i=Array.isArray(n.role)?n.role.includes("å®¶é•¿"):"parent"===n.role,c=this.isAcademic,u=(c&&n.permission,a&&r),l=(0,o.default)(this.quickActions),p=l.filter((function(t){if(s)return!0;if(c){if("æ•™å¸ˆè¯¾ç¨‹è¡¨"===t.text||"å­¦ç”Ÿæ¡£æ¡ˆ"===t.text||"æ•™å®¤"===t.text||"æˆç»©"===t.text||"æ³¨å†Œè´¦å·"===t.text||"æ•™å¸ˆæŽ’è¯¾"===t.text||"æƒé™åˆ†é…"===t.text||"ç­çº§ç®¡ç†"===t.text||"å­¦ç”Ÿå½•å…¥"===t.text||"è¯•å·åˆ†æž"===t.text||"æ›´å¤š"===t.text)return!0;if(n.featureList&&Array.isArray(n.featureList)){var o=e.getFeatureKey(t.text);return n.featureList.includes(o)}return!1}return(!u||"å­¦ç”Ÿè¯¾æ—¶å½•å…¥"!==t.text)&&((!s||"æˆ‘çš„è¯¾è¡¨"!==t.text)&&(r?"å¸ˆèµ„åŠ›é‡"!==t.text:i?"æ•™å¸ˆè¯¾ç¨‹è¡¨"===t.text||"å¸ˆèµ„åŠ›é‡"===t.text:!!a&&("æˆ‘çš„è¯¾è¡¨"===t.text||"è¯¾æ—¶ç»Ÿè®¡"===t.text||"æ•™å®¤"===t.text||"æˆç»©"===t.text||"è¿›æ­¥åˆ†æž"===t.text||"è¯•å·åˆ†æž"===t.text||"æˆ‘çš„ç­çº§"===t.text||"æ›´å¤š"===t.text)))}));c&&(p=p.filter((function(t){return"æˆ‘çš„è¯¾è¡¨"!==t.text&&"æˆ‘çš„ç­çº§"!==t.text&&"è¿›æ­¥åˆ†æž"!==t.text&&"è¯•å·åˆ†æž"!==t.text&&"æ•™å¸ˆæŽ’è¯¾"!==t.text&&"æƒé™åˆ†é…"!==t.text&&"è¯¾æ—¶ç»Ÿè®¡"!==t.text&&"å¸ˆèµ„åŠ›é‡"!==t.text&&"ç³»ç»Ÿè®¾ç½®"!==t.text&&"è´¦å·ç®¡ç†"!==t.text}))),p=p.filter((function(t){return"æ›´å¤š"!==t.text})),p.length>8&&(p=p.slice(0,7));var g=l.find((function(t){return"æ›´å¤š"===t.text}));return g&&p.push(g),p}},methods:{goTo:function(e){"æ›´å¤š"===e.text?t.switchTab({url:e.page}):t.navigateTo({url:e.page})},goToSearch:function(){t.navigateTo({url:"/pages/search-page/search-page"})},openNewsEditor:function(){var e=t.getStorageSync("userInfo");!e||"ç®¡ç†å‘˜"!==e.permission&&"superadmin"!==e.permission?t.showToast({title:"åªæœ‰ç®¡ç†å‘˜å¯ä»¥å‘å¸ƒæ–°é—»",icon:"none"}):t.navigateTo({url:"/pages/news-edit/news-edit"})},viewNewsDetail:function(e){t.navigateTo({url:"/pages/news-detail/news-detail?id=".concat(e.id)})},getLightColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;if(!t)return"rgba(200,200,200,".concat(e,")");t=t.replace("#",""),3===t.length&&(t=t.split("").map((function(t){return t+t})).join(""));var n=parseInt(t.substring(0,2),16),s=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);return"rgba(".concat(n,",").concat(s,",").concat(r,",").concat(e,")")},getFeatureKey:function(t){return{"æ³¨å†Œè´¦å·":"register","è´¦å·ç®¡ç†":"user_manage","æ•™å¸ˆæŽ’è¯¾":"schedule","è¯¾æ—¶ç»Ÿè®¡":"salary","æ•™å¸ˆè¯¾ç¨‹è¡¨":"admin_teacher_schedule","æˆ‘çš„è¯¾è¡¨":"teacher_courses","æƒé™åˆ†é…":"permission_assign","ç³»ç»Ÿè®¾ç½®":"system_setting","å­¦ç”Ÿè¯¾æ—¶":"student_hours_query","å­¦ç”Ÿè¯¾æ—¶å½•å…¥":"student_hours","æˆ‘çš„ç­çº§":"my_class","å¸ˆèµ„åŠ›é‡":"faculty_strength","è¯•å·åˆ†æž":"exam_analysis","æ•™å®¤":"classroom","æˆç»©":"exam_scores","è¿›æ­¥åˆ†æž":"student_progress","è®¢é˜…é€šçŸ¥":"subscription_notification"}[t]||t},onLoad:function(){this.loadNewsFromCloud()},onShow:function(){this.loadNewsFromCloud(),this.checkAndPromptSubscription()},checkAndPromptSubscription:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var s,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,s=t.getStorageSync("openid"),s){n.next=6;break}return e.setSubscriptionBanner("å¾®ä¿¡ç»‘å®š","ä¸ºäº†åŠæ—¶æŽ¥æ”¶è¯¾ç¨‹é€šçŸ¥ï¼Œå»ºè®®å…ˆç»‘å®šå¾®ä¿¡è´¦å·","ç«‹å³ç»‘å®š"),setTimeout((function(){e.showSubscriptionPrompt("å¾®ä¿¡ç»‘å®š","ä¸ºäº†åŠæ—¶æŽ¥æ”¶è¯¾ç¨‹é€šçŸ¥ï¼Œå»ºè®®å…ˆç»‘å®šå¾®ä¿¡è´¦å·")}),2e3),n.abrupt("return");case 6:r=t.getStorageSync("subscriptionStatus"),r&&"accepted"===r.status?e.showSubscriptionBanner=!1:(e.setSubscriptionBanner("è®¢é˜…é€šçŸ¥","å¼€é€šè®¢é˜…é€šçŸ¥ï¼ŒåŠæ—¶æŽ¥æ”¶è¯¾ç¨‹å®‰æŽ’ã€è°ƒè¯¾ç­‰é‡è¦ä¿¡æ¯","ç«‹å³å¼€é€š"),setTimeout((function(){e.showSubscriptionPrompt("è®¢é˜…é€šçŸ¥","å¼€é€šè®¢é˜…é€šçŸ¥ï¼ŒåŠæ—¶æŽ¥æ”¶è¯¾ç¨‹å®‰æŽ’ã€è°ƒè¯¾ç­‰é‡è¦ä¿¡æ¯")}),2e3)),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),console.error("æ£€æŸ¥è®¢é˜…çŠ¶æ€å¤±è´¥:",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},setSubscriptionBanner:function(t,e,n){this.subscriptionBannerTitle=t,this.subscriptionBannerDesc=e,this.subscriptionBannerBtnText=n,this.showSubscriptionBanner=!0},goToSubscription:function(){t.navigateTo({url:"/pages/subscription-settings/subscription-settings"})},showSubscriptionPrompt:function(e,n){t.showModal({title:"ðŸ’¡ ".concat(e),content:n,confirmText:"ç«‹å³å¼€é€š",cancelText:"ç¨åŽå†è¯´",success:function(e){e.confirm&&t.navigateTo({url:"/pages/subscription-settings/subscription-settings"})}})},onReady:function(){t.$on("newsUpdated",this.handleNewsUpdated),t.$on("subscriptionStatusChanged",this.handleSubscriptionStatusChanged),t.$on("wechatBoundSuccess",this.handleWechatBoundSuccess)},onUnload:function(){t.$off("newsUpdated",this.handleNewsUpdated),t.$off("subscriptionStatusChanged",this.handleSubscriptionStatusChanged),t.$off("wechatBoundSuccess",this.handleWechatBoundSuccess)},loadNewsFromCloud:function(){var e=this;return(0,i.default)(a.default.mark((function n(){var r,i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.callFunction({name:"news-service",data:{action:"listNews",page:1,pageSize:50}});case 3:if(r=n.sent,!r||!r.result||0!==r.result.code){n.next=7;break}return e.newsList=r.result.data.map((function(t){return{id:t._id||t.id,title:t.title,content:t.content,time:t.time,contentBlocks:t.contentBlocks||[]}})),n.abrupt("return");case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("äº‘ç«¯åŠ è½½æ–°é—»å¤±è´¥ï¼Œå›žé€€æœ¬åœ°:",n.t0);case 12:i=t.getStorageSync("newsList"),i&&Array.isArray(i)&&(e.newsList=i);case 14:case"end":return n.stop()}}),n,null,[[0,9]])})))()},handleNewsUpdated:function(){this.loadNewsFromCloud()},handleSubscriptionStatusChanged:function(t){this.showSubscriptionBanner="accepted"===t.status,this.subscriptionBannerTitle=t.title,this.subscriptionBannerDesc=t.desc,this.subscriptionBannerBtnText=t.btnText},handleWechatBoundSuccess:function(){this.checkAndPromptSubscription()},getNewsSnippet:function(t){if(!t.content)return"";if(t.contentBlocks&&t.contentBlocks.length>0){var e=t.contentBlocks.filter((function(t){return"text"===t.type})).map((function(t){return t.content})).join(" ");if(e.trim()){return e.length<=80?e:e.substring(0,80)+"..."}}return t.content.length<=80?t.content:t.content.substring(0,80)+"..."},formatTime:function(t){if(!t)return"";var e=new Date(t),n=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return"".concat(n,"-").concat(s,"-").concat(r)}}};e.default=c}).call(this,n("df3c")["default"],n("861b")["uniCloud"])},cd68:function(t,e,n){"use strict";n.r(e);var s=n("05d0"),r=n("a2bd");for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("9563");var i=n("828b"),o=Object(i["a"])(r["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],void 0);e["default"]=o.exports}},[["66e8","common/runtime","common/vendor"]]]);