<view class="page-container data-v-63ee5c25"><view class="status-bar data-v-63ee5c25"></view><view class="top-bar data-v-63ee5c25"><view class="top-nav data-v-63ee5c25"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-63ee5c25" bindtap="__e"><text class="back-icon data-v-63ee5c25">←</text><text class="data-v-63ee5c25">返回</text></view><view class="page-title data-v-63ee5c25">订阅通知设置</view></view></view><view class="content data-v-63ee5c25"><view class="subscription-section data-v-63ee5c25"><view class="section-title data-v-63ee5c25">📨 订阅通知</view><view class="section-desc data-v-63ee5c25">开启订阅通知，及时接收课程安排信息</view><view class="switch-container data-v-63ee5c25"><view class="switch-label data-v-63ee5c25"><text class="switch-text data-v-63ee5c25">订阅消息通知</text><text class="switch-status data-v-63ee5c25">{{isSubscribed?'已开启':'已关闭'}}</text></view><switch class="subscription-switch data-v-63ee5c25" checked="{{isSubscribed}}" color="#667eea" data-event-opts="{{[['change',[['onSubscriptionToggle',['$event']]]]]}}" bindchange="__e"></switch></view></view><view class="wechat-section data-v-63ee5c25"><view class="section-title data-v-63ee5c25">🔗 微信绑定</view><view class="section-desc data-v-63ee5c25">{{hasOpenid?'微信已绑定，可以接收消息':'绑定微信账号以接收订阅消息'}}</view><view class="wechat-action data-v-63ee5c25"><button class="{{['wechat-btn','data-v-63ee5c25',(hasOpenid)?'bound':'']}}" loading="{{isBinding}}" data-event-opts="{{[['tap',[['handleWechatBinding',['$event']]]]]}}" bindtap="__e">{{''+(isBinding?'绑定中...':hasOpenid?'✓ 已绑定微信':'绑定微信')+''}}</button></view></view><block wx:if="{{isSubscribed&&hasOpenid}}"><view class="test-section data-v-63ee5c25"><view class="section-title data-v-63ee5c25">🧪 测试消息</view><view class="section-desc data-v-63ee5c25">发送一条测试订阅消息，验证功能是否正常</view><view class="test-action data-v-63ee5c25"><button class="test-btn data-v-63ee5c25" loading="{{isTesting}}" data-event-opts="{{[['tap',[['sendTestMessage',['$event']]]]]}}" bindtap="__e">{{''+(isTesting?'发送中...':'📤 发送测试消息')+''}}</button></view></view></block></view></view>