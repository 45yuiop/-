(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"077a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},s=[]},1122:function(t,e,i){"use strict";i.r(e);var n=i("6f62"),s=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(c);e["default"]=s.a},"2bdc":function(t,e,i){"use strict";i.r(e);var n=i("077a"),s=i("1122");for(var c in s)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(c);i("aa6b");var o=i("828b"),a=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=a.exports},"6f62":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{bannerList:["https://dummyimage.com/710x260/cccccc/fff.png&text=Banner1","https://dummyimage.com/710x260/cccccc/fff.png&text=Banner2","https://dummyimage.com/710x260/cccccc/fff.png&text=Banner3"],initQuickActions:[{text:"教师课程表",icon:"/static/bbb.png",page:"/pages/admin-teacher-schedule/admin-teacher-schedule"},{text:"我的课表",icon:"/static/d.png",page:"/pages/teacher-courses/teacher-courses"},{text:"账号管理",icon:"/static/c.png",page:"/pages/account-manage/account-manage"},{text:"课时统计",icon:"/static/b.png",page:"/pages/salary-statistics/salary-statistics"},{text:"教师排课",icon:"/static/bb.png",page:"/pages/teacher-schedule/teacher-schedule"},{text:"注册账号",icon:"/static/aaa.png",page:"/pages/register/register"},{text:"系统设置",icon:"/static/cc.png",page:"/pages/system-setting/system-setting"},{text:"学生档案",icon:"/static/教室.png",page:"/pages/archive/archive"},{text:"更多",icon:"/static/more.png",page:"/pages/service/service"}],quickActions:[],newsList:[{id:1,title:"公司荣获XX奖项",content:"近日，公司在...",time:"2024-06-01"},{id:2,title:"新产品发布",content:"我们推出了...",time:"2024-06-28"}],isSubscribed:!1}},computed:{actionRows:function(){for(var t=[],e=0;e<this.quickActions.length;e+=4)t.push(this.quickActions.slice(e,e+4));return t},isAdmin:function(){var e=t.getStorageSync("userInfo");return e&&("管理员"===e.permission||"superadmin"===e.permission)}},onMounted:function(){console.log("🚀 首页 onMounted 开始执行"),t.$on("subscriptionStatusChanged",this.handleSubscriptionStatusChanged),console.log("📡 首页已设置事件监听器"),this.checkSubscriptionStatus()},onUnmounted:function(){t.$off("subscriptionStatusChanged",this.handleSubscriptionStatusChanged)},onShow:function(){var e=this,i=t.getStorageSync("userInfo");if(i){console.log("🏠 首页 onShow 开始执行"),this.checkSubscriptionStatus(),setTimeout((function(){console.log("⏰ 首页延迟检查订阅状态..."),e.checkSubscriptionStatus()}),300),this.quickActions=JSON.parse(JSON.stringify(this.initQuickActions));var n=Array.isArray(i.role)?i.role.includes("教师"):"教师"===i.role,s=Array.isArray(i.role)?i.role.includes("教务"):"教务"===i.role;n&&!s&&(this.quickActions=this.quickActions.filter((function(t){return"成绩"!==t.text&&"进步分析"!==t.text})))}else t.reLaunch({url:"/pages/login/login"})},onFocus:function(){console.log("🎯 首页获得焦点，检查订阅状态"),this.checkSubscriptionStatus()},methods:{goTo:function(e){t.navigateTo({url:e.page})},openNewsEditor:function(){t.showToast({title:"请接入新闻编辑功能",icon:"none"})},checkSubscriptionStatus:function(){var e=t.getStorageSync("subscriptionStatus");console.log("🔍 首页检查订阅状态:",e),e&&!0===e.isSubscribed?(this.isSubscribed=!0,console.log("✅ 首页：订阅已开启，隐藏提示框")):(this.isSubscribed=!1,console.log("❌ 首页：订阅未开启，显示提示框")),console.log("🔍 首页当前 isSubscribed 状态:",this.isSubscribed)},goToSubscriptionSettings:function(){t.navigateTo({url:"/pages/subscription-settings/subscription-settings"})},handleSubscriptionStatusChanged:function(t){console.log("📢 首页收到订阅状态变化通知:",t),this.isSubscribed=t.isSubscribed,t.isSubscribed?console.log("✅ 首页：订阅状态已更新为开启，隐藏提示框"):console.log("❌ 首页：订阅状态已更新为关闭，显示提示框")},forceRefreshSubscription:function(){console.log("🔄 强制刷新订阅状态..."),this.isSubscribed=!1;var e=t.getStorageSync("subscriptionStatus");console.log("🔍 强制刷新：从存储获取的订阅状态:",e),e&&!0===e.isSubscribed?(this.isSubscribed=!0,console.log("✅ 强制刷新：订阅状态已恢复为开启")):(this.isSubscribed=!1,console.log("❌ 强制刷新：订阅状态仍为关闭")),console.log("🔍 强制刷新后：首页当前 isSubscribed 状态:",this.isSubscribed)},testEventEmit:function(){console.log("🧪 测试事件发送..."),t.$emit("subscriptionStatusChanged",{isSubscribed:!0}),console.log("📤 测试事件已发送")}}};e.default=i}).call(this,i("df3c")["default"])},"7d3d":function(t,e,i){},aa6b:function(t,e,i){"use strict";var n=i("7d3d"),s=i.n(n);s.a},b53b:function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("a226"),i("861b");n(i("3240"));var s=n(i("2bdc"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])}},[["b53b","common/runtime","common/vendor"]]]);