(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ImageZoomViewer"],{"03d0":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={name:"ImageZoomViewer",props:{visible:{type:Boolean,default:!1},images:{type:Array,default:function(){return[]}},currentIndex:{type:Number,default:0}},data:function(){return{scale:1,translateX:0,translateY:0,lastScale:1,lastTranslateX:0,lastTranslateY:0,startDistance:0,startX:0,startY:0,isMoving:!1,imageWidth:0,imageHeight:0,containerWidth:0,containerHeight:0,touchStartTime:0,isDoubleTap:!1}},computed:{currentImage:function(){return this.images[this.currentIndex]||""},imageWrapperStyle:function(){return{transform:"translate(".concat(this.translateX,"px, ").concat(this.translateY,"px) scale(").concat(this.scale,")"),transition:this.isMoving?"none":"transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)"}}},watch:{visible:function(t){var i=this;t&&(this.resetZoom(),this.$nextTick((function(){i.initContainerSize()})))},currentIndex:function(){var t=this;this.resetZoom(),this.$nextTick((function(){t.initContainerSize()}))}},methods:{initContainerSize:function(){var i=this,e=t.createSelectorQuery().in(this);e.select(".image-container").boundingClientRect((function(t){t&&(i.containerWidth=t.width,i.containerHeight=t.height)})).exec()},onImageLoad:function(t){var i=t.detail,e=i.width,a=i.height;this.imageWidth=e,this.imageHeight=a},onImageError:function(){t.showToast({title:"图片加载失败",icon:"none"})},resetZoom:function(){this.scale=1,this.translateX=0,this.translateY=0,this.lastScale=1,this.lastTranslateX=0,this.lastTranslateY=0},toggleZoom:function(){this.scale>1?this.resetZoom():(this.scale=2,this.lastScale=2)},closeViewer:function(){this.$emit("close")},switchImage:function(t){t>=0&&t<this.images.length&&this.$emit("switch",t)},switchToPreviousImage:function(){var t=this.currentIndex-1;t>=0&&this.switchImage(t)},switchToNextImage:function(){var t=this.currentIndex+1;t<this.images.length&&this.switchImage(t)},handleTouchStart:function(t){var i=t.touches;this.touchStartTime=Date.now(),1===i.length?(this.startX=i[0].clientX,this.startY=i[0].clientY,this.isMoving=!0):2===i.length&&(this.startDistance=this.getDistance(i[0],i[1]),this.lastScale=this.scale,this.isMoving=!0)},handleTouchMove:function(t){if(this.isMoving){var i=t.touches;if(1===i.length){var e=i[0].clientX-this.startX,a=i[0].clientY-this.startY;if(this.scale<=1&&Math.abs(e)>Math.abs(a)&&Math.abs(e)>50)return;this.translateX=this.lastTranslateX+e,this.translateY=this.lastTranslateY+a,this.limitTranslation()}else if(2===i.length){var s=this.getDistance(i[0],i[1]),n=s/this.startDistance*this.lastScale;this.scale=Math.max(1,Math.min(4,n))}}},handleTouchEnd:function(t){var i=this,e=Date.now(),a=e-this.touchStartTime;if(a<300&&0===t.touches.length&&(this.isDoubleTap?(this.handleDoubleClick(),this.isDoubleTap=!1):(this.isDoubleTap=!0,setTimeout((function(){i.isDoubleTap=!1}),300))),this.scale<=1&&0===t.touches.length){var s=t.changedTouches[0].clientX-this.startX,n=t.changedTouches[0].clientY-this.startY;Math.abs(s)>Math.abs(n)&&Math.abs(s)>100&&(s>0?this.switchToPreviousImage():this.switchToNextImage())}this.isMoving=!1,this.lastTranslateX=this.translateX,this.lastTranslateY=this.translateY,this.lastScale=this.scale},handleDoubleClick:function(){this.scale>1?this.resetZoom():(this.scale=2,this.lastScale=2)},getDistance:function(t,i){var e=t.clientX-i.clientX,a=t.clientY-i.clientY;return Math.sqrt(e*e+a*a)},limitTranslation:function(){var t=(this.scale-1)*this.containerWidth/2,i=(this.scale-1)*this.containerHeight/2;this.translateX=Math.max(-t,Math.min(t,this.translateX)),this.translateY=Math.max(-i,Math.min(i,this.translateY))}}};i.default=e}).call(this,e("df3c")["default"])},"52a5":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=(t._self._c,t.visible?t.images.length:null),a=t.visible?t.images.length:null,s=t.visible?t.scale<=1&&t.images.length>1:null;t.$mp.data=Object.assign({},{$root:{g0:e,g1:a,g2:s}})},s=[]},"644f":function(t,i,e){},8996:function(t,i,e){"use strict";e.r(i);var a=e("03d0"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},f97c:function(t,i,e){"use strict";var a=e("644f"),s=e.n(a);s.a},f9eb:function(t,i,e){"use strict";e.r(i);var a=e("52a5"),s=e("8996");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("f97c");var h=e("828b"),c=Object(h["a"])(s["default"],a["b"],a["c"],!1,null,"0afefe57",null,!1,a["a"],void 0);i["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ImageZoomViewer-create-component',
    {
        'components/ImageZoomViewer-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("f9eb"))
        })
    },
    [['components/ImageZoomViewer-create-component']]
]);
